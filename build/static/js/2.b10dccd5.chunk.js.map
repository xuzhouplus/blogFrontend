{"version":3,"sources":["../node_modules/bootstrap-fileinput/js/fileinput.js"],"names":["factory","define","$","$h","FileInput","fn","fileinputLocales","fileinputThemes","String","prototype","setTokens","replacePairs","key","re","str","this","toString","hasOwnProperty","RegExp","replace","FRAMES","SORT_CSS","INIT_FLAG","OBJECT_PARAMS","DEFAULT_PREVIEW","MODAL_ID","MODAL_EVENTS","logMessages","ajaxError","badDroppedFiles","badExifParser","badInputType","exifWarning","invalidChunkSize","invalidThumb","noResumableSupport","noUploadUrl","retryStatus","objUrl","window","URL","webkitURL","now","Date","round","num","parseFloat","isNaN","Math","floor","getFileRelativePath","file","relativePath","webkitRelativePath","getFileName","getFileId","generateFileId","size","getFrameSelector","id","selector","getZoomSelector","getFrameElement","$element","find","getZoomElement","getElapsed","seconds","delta","out","result","structure","year","month","week","day","hour","minute","second","Object","keys","forEach","each","value","substring","debounce","func","delay","inDebounce","args","arguments","context","clearTimeout","setTimeout","apply","stopEvent","e","stopPropagation","preventDefault","fileName","name","createObjectURL","data","revokeObjectURL","compare","input","exact","undefined","match","isIE","ver","div","status","navigator","appName","test","userAgent","document","createElement","innerHTML","getElementsByTagName","length","body","appendChild","parentNode","removeChild","canAssignFilesToInput","type","files","err","getDragDropFolders","items","i","item","len","folders","webkitGetAsEntry","isDirectory","initModal","$modal","$body","appendTo","isFunction","v","isEmpty","trim","isArray","a","Array","call","ifSet","needle","haystack","def","cleanArray","arr","filter","spliceArray","index","reverseOrder","newArr","j","extend","reverse","getNum","hasFileAPISupport","File","FileReader","hasDragDropSupport","draggable","ondragstart","ondrop","hasFileUploadSupport","FormData","hasBlobSupport","Blob","Boolean","hasArrayBufferViewSupport","Uint8Array","hasResumableUploadSupport","webkitSlice","mozSlice","slice","dataURI2Blob","dataURI","byteStr","arrayBuffer","intArray","mimeStr","bb","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","canBlob","atob","ArrayBuffer","split","indexOf","decodeURIComponent","charCodeAt","append","getBlob","arrayBuffer2String","buffer","TextDecoder","decode","c","char2","char3","array","fromCharCode","isHtml","childNodes","nodeType","isSvg","getMimeType","signature","contents","addCss","$el","css","removeClass","addClass","getElement","options","param","uniqId","getTime","random","htmlEncode","undefVal","replaceTags","tags","join","cleanMemory","$thumb","is","attr","findFileName","filePath","sepIndex","lastIndexOf","pop","checkFullScreen","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","toggleFullScreen","maximize","doc","de","documentElement","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","moveArray","oldIndex","newIndex","k","push","splice","cleanZoomCache","$cache","closest","remove","closeButton","getRotation","setTransform","el","val","style","transform","webkitTransform","element","$parent","parent","_validate","isPreviewable","isIE9","isIE10","_init","_listen","constructor","_cleanup","reader","clearFileStack","fileBatchCompleted","isError","cancelling","paused","lastProgress","_initAjax","ajaxQueue","ajaxRequests","ajaxQueueIntervalId","ajaxCurrentThreads","ajaxAborted","refreshMode","f","$cont","t","tmp","self","maxTotalFileCount","maxFileCount","rtl","previewZoomButtonIcons","prev","next","maxAjaxThreads","resumableUploadOptions","maxThreads","_initFileManager","autoOrientImage","autoOrientImageInitial","duplicateErrors","$form","_initTemplateDefaults","uploadFileAttr","_getLayoutTemplate","progressTemplate","progressClass","progressInfoTemplate","progressInfoClass","progressPauseTemplate","progressPauseClass","progressCompleteTemplate","progressCompleteClass","progressErrorTemplate","progressErrorClass","isDisabled","isClickable","browseOnZoneClick","showPreview","dropZoneEnabled","defaultPreviewContent","isAjaxUpload","uploadUrl","slug","slugCallback","_slugDefault","mainTemplate","showCaption","captionTemplate","previewGenericTemplate","_getPreviewTemplate","imageCanvas","resizeImage","maxImageWidth","maxImageHeight","imageCanvasContext","getContext","namespace","$container","_createContainer","_refreshContainer","$dropZone","$progress","$btnUpload","$captionContainer","$caption","msgPlaceholder","filePlural","fileSingle","$captionIcon","$previewContainer","$preview","$previewStatus","$errorContainer","_validateDisabled","msgErrorClass","_errorsExist","hide","previewInitId","_initPreviewCache","_initPreview","_initPreviewActions","hasClass","insertBefore","_setFileDropZoneTitle","disable","_initZoom","hideThumbnailContent","fileManager","stack","processed","errors","loadedImages","totalImages","totalFiles","totalSize","uploadedSize","stats","initStats","started","getUploadStats","loaded","total","fm","elapsed","bps","fileId","bitrate","_getSize","pendingBytes","exists","inArray","getIdList","count","getTotalSize","add","getId","nameFmt","_getFileName","sizeFmt","removeFile","move","idFrom","idTo","list","isPending","isProcessed","clear","clearImages","addImage","config","removeImage","getImageIdList","getImageCount","_getFileId","getIndex","getThumb","_getThumbs","$t","getThumbIndex","getFile","fmt","getFirstFile","ids","setFile","setProcessed","getProgress","ceil","setProgress","pct","progress","_setUploadData","fd","uploadParamNames","_initResumableUpload","opts","logs","enableResumableUpload","fallback","s","_log","chunkSize","resumableManager","init","rm","currThreads","error","chunkIntervalId","fileIndex","completed","testing","$btnDelete","chunkCount","getTotalChunks","logAjaxError","jqXHR","textStatus","errorThrown","showErrorLog","text","responseText","reset","msg","$prog","hasThumb","params","_setProgress","_setThumbStatus","_initUploadSuccess","_raise","_setPreviewError","msgProgressError","msgResumableUploadRetriesExceeded","max","maxRetries","_showFileError","check","clearInterval","processedResumables","getUploadedSize","checkAborted","intervalId","unlock","upload","flag","setInterval","lock","shift","testUpload","uploadResumable","$initThumbs","_initSortable","_clearFileInput","previewCache","initialPreview","content","initialPreviewConfig","initialPreviewThumbTags","_getExtraData","processDelay","pushAjax","loopAjax","queueDelay","fnBefore","fnSuccess","fnError","fnComplete","outData","testUrl","fileSize","fileRelativePath","_getOutData","chunksUploaded","_ajaxSubmit","retry","sendAjax","blob","chunkIndex","chunkSizeStart","fileBlob","retryCount","show","filename","chunk","tClose","tModalMain","tTagBef","tVideo","tAudio","tObject","tPdf","tOther","tStyle","vDefaultDim","width","height","_isPdfRendered","pdfRendererTemplate","_encodeURI","pdfRendererUrl","defaults","layoutTemplates","main1","main2","preview","close","fileIcon","caption","modalMain","modal","footer","indicator","actions","actionDelete","actionUpload","actionDownload","actionZoom","actionDrag","btnDefault","btnLink","btnBrowse","zoomCache","previewMarkupTags","tagBefore1","tagBefore2","tagAfter","previewContentTemplates","generic","html","image","office","gdocs","video","audio","flash","object","pdf","other","allowedPreviewTypes","previewTemplates","previewSettings","previewSettingsSmall","previewZoomSettings","mimeTypeAliases","fileTypeSettings","vType","vName","fileActionSettings","showRemove","showUpload","showDownload","showZoom","showDrag","removeIcon","removeErrorClass","removeTitle","uploadIcon","uploadClass","uploadTitle","uploadRetryIcon","uploadRetryTitle","downloadIcon","downloadClass","downloadTitle","zoomIcon","zoomClass","zoomTitle","dragIcon","dragClass","dragTitle","dragSettings","indicatorNew","indicatorSuccess","indicatorError","indicatorLoading","indicatorPaused","indicatorNewTitle","indicatorSuccessTitle","indicatorErrorTitle","indicatorLoadingTitle","indicatorPausedTitle","setting","_initPreviewTemplates","tagBef","tagAft","initialPreviewDelimiter","skipNull","n","get","$tmp","cat","ftr","fname","ftype","frameClass","ind","asData","initialPreviewAsData","title","alt","parseTemplate","dat","fclass","fc","_generatePreviewTemplate","zoomData","initialPreviewFileType","frameAttr","clean","set","unset","chk","rev","reversePreviewOrder","_getMsgSelected","url","fs","initPreviewShowDel","initialPreviewShowDelete","downloadInitialUrl","initialPreviewDownloadUrl","dUrl","downloadUrl","dFil","initPreviewShowDwl","sDel","sDwl","sZm","sDrg","dis","_renderFileActions","_renderThumbProgress","useLib","usePdfRenderer","_handler","event","callback","ns","ev","off","on","vUrl","encodeUrl","encodeURI","tokens","showConsoleLogs","console","log","alert","$err","_errorHandler","evt","target","showError","_showError","code","NOT_FOUND_ERR","msgFileNotFound","SECURITY_ERR","msgFileSecured","NOT_READABLE_ERR","msgFileNotReadable","ABORT_ERR","msgFilePreviewAborted","msgFilePreviewError","_addError","$error","errorCloseButton","getFrames","fadeOut","_setValidationError","_resetErrors","fade","_showFolderError","msgFoldersNotAllowed","fadeIn","fadeDelay","fId","_noFilesError","label","minFileCount","msgFilesTooLess","_updateFileDetails","_parseError","operation","textPre","errMsg","responseJSON","msgUploadAborted","showAjaxErrorDetails","msgAjaxError","_parseFileType","types","isValid","_getPreviewIcon","ext","previewFileIconSettings","toLowerCase","previewFileExtSettings","previewFileIcon","_parseFilePreviewIcon","icn","previewFileIconClass","Event","trigger","isDefaultPrevented","_listenFullScreen","isFullScreen","$btnFull","$btnBord","_maximizeZoomDialog","proxy","_change","showBrowse","$btnFile","_browse","cancel","pause","_initDragDrop","_submitForm","_uploadClick","screen","innerWidth","innerHeight","_autoFitContent","_initClickable","_refreshPreview","sel","clientWidth","settings","_scanDroppedItems","path","dirReader","readDir","errorHandler","isFile","createReader","readEntries","entries","$zone","_zoneDragEnter","_zoneDragLeave","_zoneDrop","_zoneDragDropInit","dataTransfer","originalEvent","hasFiles","effectAllowed","dropEffect","Files","processFiles","changeTriggered","$btn","isEnabled","_isFileSelectionValid","_abort","_clearPreview","showUploadedThumbs","$zoom","_getZoom","_resetUpload","_validateDefaultPreview","KvSortable","handle","dataIdAttr","scroll","onSort","previewId","kvsortable","_setPreviewContent","_initPreviewImageOrientations","$img","$zoomImg","exif","Orientation","setImageOrientation","isInit","cap","initialCaption","_setCaption","_initCaption","_setInitThumbAttr","_getZoomButton","previewZoomButtonClasses","previewZoomButtonTitles","_getModalContent","msgZoomModalHeading","_listenModalEvent","sourceEvent","getParams","$dialog","modalId","insertAfter","_initZoomButtons","$first","$last","thumbs","toArray","$prev","$next","removeAttr","$head","$foot","h","outerHeight","_resizeZoomDialog","fullScreen","zoomModalHeight","focus","_setZoomContent","$frame","animate","$content","tmplt","$dataEl","$zoomPreview","$btnTogh","clone","_zoomSlideShow","ht","$header","$floatBar","$actions","resize","slideUp","slideDown","which","keyCode","vId","vPrevKey","vNextKey","_zoomPreview","dir","$targFrame","thumbsData","_initZoomButton","_inputFileCount","readFiles","_clearObjects","$srcFrm","$tmpFrm","$tmpEl","before","after","uploadCache","_hideProgress","_resetCanvas","overwriteInitial","canvas","clearRect","_hasInitialPreview","_resetPreview","_clearDefaultPreview","_resetPreviewThumbs","isAjax","template","customLayoutTags","templates","customPreviewTags","formdata","responseData","filesData","filenames","filescount","getFilesCount","extra","response","strFiles","msgSelected","msgNoFilesSelected","_getFrame","skipWarning","_getThumbId","uploadExtraData","_initXhr","xhrobj","fileCount","position","lengthComputable","_setFileUploadStats","_getStats","progressDelay","addEventListener","_initAjaxSettings","_ajaxSettings","ajaxSettings","_ajaxDeleteSettings","ajaxDeleteSettings","_mergeAjaxCallback","funcName","srcFunc","targFunc","mergeAjaxCallbacks","mergeAjaxDeleteCallbacks","processQueue","JSON","stringify","uploadUrlThumb","xhr","dataType","cache","processData","contentType","ajax","done","_mergeArray","prop","arr1","arr2","concat","allFiles","$div","$newCache","isEmptyObject","hasInitData","_getUploadCacheIndex","$newThumb","_resetCaption","_initSuccessThumbs","$remove","_updateInitialPreview","u","_uploadSingle","isBatch","chkComplete","uploadFailed","updateUploadLog","hasPostData","op","ajaxOperations","uploadThumb","fileObj","triggerReset","errCount","uploadAsync","retryErrorUploads","abort","_setProgressCancelled","pid","msgUploadError","msgAjaxProgressError","_uploadBatch","setAllUploaded","uploadBatch","$thumbs","errorkeys","uploadFileCount","ctr","_uploadExtraOnly","uploadExtra","_deleteFileIndex","parseInt","$nFrame","nInd","_initFileActions","hasError","_validateMinCount","deleteExtraData","btnRemove","origClass","errClass","resetProgress","deleteUrl","vKey","deleteThumb","extraData","msgDeleteError","Promise","then","_hideFileIcon","_showFileIcon","bytes","sizes","fileSizeGetter","isNumeric","pow","toFixed","_getFileType","foot","templ","attrs","getContent","zoomContent","styleAttribs","screenW","typeCss","_renderFileFooter","forcePrevIcon","preferIconicPreview","forceZoomIcon","preferIconicZoomPreview","newCat","d","zoom","frameCss","sanitizeZoomCache","_addToPreview","prepend","_previewDefault","_setThumbAttr","_previewFile","theFile","fileInfo","fsize","iData","purifyHtml","DOMPurify","sanitize","_validateImageOrientation","numFiles","skipRaiseEvent","nFiles","icon","$indicator","msgCancelled","p","min","pctLimit","progressUploadThreshold","msgUploadThreshold","msgUploadEnd","dropZoneTitle","dropZoneClickTitle","dropZoneTitleClass","pendingTime","showUploadStats","msgPendingTime","time","msgCalculatingTime","uploadSpeed","_setResumableProgress","obj","_toggleResumableProgress","message","percent","pctTot","totUpSize","totSize","totStats","totLoaded","currUplSize","currTotSize","cfg","validateInitialCount","_getFileCount","includeInitial","defaultValue","_getFileNames","keepFile","removeFrame","removeFromPreviewOnError","_refreshUploadButton","_checkDimensions","dim","$imgEl","limit","naturalWidth","naturalHeight","_getExifObj","exifObj","piexif","load","details","$mark","invalidImg","invalidZoomImg","isHidden","zoomOnly","img","zoomImg","offsetHeight","w","offsetWidth","r","offsetAngle","atan","origFactor","sqrt","scale","cos","PI","abs","ImageIFD","_validateImage","w1","w2","one","thumb","typ","siz","validated","imgData","_validateAllImages","complete","counter","numImgs","minSize","resizeIfSizeMoreThan","_getResizedImage","chkWidth","chkHeight","throwError","exifStr","evParams","ratio","maxWidth","maxHeight","isValidImage","resizeDefaultImageType","resizePreference","drawImage","toDataURL","resizeQuality","dump","insert","msgImageResizeError","msgImageResizeException","_showProgress","_initBrowse","$tmpZone","$tar","elErrorContainer","parents","blur","msgValidationError","msgNo","msgValidationErrorClass","msgValidationErrorIcon","attribs","_renderMain","theme","readonly","dropCss","showClose","previewClass","captionClass","mainClass","_renderButton","btnType","showCancel","showPause","buttonLabelClass","msgUploadBegin","rem","drg","upl","tInd","previewThumbTags","showUpl","showDwn","showDel","disabled","dFile","btnZoom","btnDrag","btnDelete","btnUpload","btnDownload","otherButtons","otherActionButtons","focusCaptionOnBrowse","tfiles","initCount","isDragDrop","isSingleUpl","maxCount","maxTotCount","inclAll","flagSingle","mesg","p1","p2","maxCountCheck","m","all","msgTotalFilesTooMany","msgFilesTooMany","autoReplace","abortData","abortMessage","_resetFileStack","cnt","required","msgFileRequired","_canPreview","allowedTypes","allowedMimes","allowedExts","mimes","allowedPreviewMimeTypes","exts","allowedPreviewExtensions","dTypes","disabledPreviewTypes","dMimes","disabledPreviewMimeTypes","dExts","disabledPreviewExtensions","maxSize","maxFilePreviewSize","expAllExt","expDisExt","addToStack","getFileStack","getFileList","readFile","$status","msgLoading","msgProgress","fileTypes","allowedFileTypes","typLen","fileExt","allowedFileExtensions","strExt","removeThumb","fSizeKB","typ1","typ2","canLoad","isText","isImage","txtFlag","fnText","fnImage","fnHtml","fileExtExpr","previewData","strTypes","knownTypes","processFileLoaded","msgFileTypes","msgInvalidFileName","msgDuplicateFile","maxFileSize","msgSizeTooLarge","minFileSize","msgSizeTooSmall","msgInvalidFileType","msgInvalidFileExtension","extensions","onerror","onload","hex","uint","byte","mime","textFlag","newReader","theFileNew","readAsText","textEncoding","readAsDataURL","readTextImage","onprogress","fact","readAsArrayBuffer","selectMode","enable","resume","msgUploadResume","msgPaused","focusCaptionOnClear","totLen","hasExtraData","msgUploadEmpty","destroy","removeData","refresh","frameId","getExif","cssFilter","$frames","getPreview","fileinput","option","retvals","opt","l","lang","language","en","ua","webkit","toggleheader","fullscreen","borderless","browseIcon","browseClass","cancelIcon","cancelClass","pauseIcon","pauseClass","minImageWidth","minImageHeight","progressThumbClass","previewFileType","elCaptionContainer","elCaptionText","elPreviewContainer","elPreviewImage","elPreviewStatus","isIE11","MSInputMethodContext","documentMode","browseLabel","removeLabel","cancelLabel","cancelTitle","pauseLabel","pauseTitle","uploadLabel","msgImageWidthSmall","msgImageHeightSmall","msgImageWidthLarge","msgImageHeightLarge","Constructor","ready","$input"],"mappings":"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","file":"static/js/2.b10dccd5.chunk.js","sourcesContent":["/*!\r\n * bootstrap-fileinput v5.0.8\r\n * http://plugins.krajee.com/file-input\r\n *\r\n * Author: Kartik Visweswaran\r\n * Copyright: 2014 - 2019, Kartik Visweswaran, Krajee.com\r\n *\r\n * Licensed under the BSD-3-Clause\r\n * https://github.com/kartik-v/bootstrap-fileinput/blob/master/LICENSE.md\r\n */\r\n(function (factory) {\r\n    'use strict';\r\n    //noinspection JSUnresolvedVariable\r\n    if (typeof define === 'function' && define.amd) { // jshint ignore:line\r\n        // AMD. Register as an anonymous module.\r\n        define(['jquery'], factory); // jshint ignore:line\r\n    } else { // noinspection JSUnresolvedVariable\r\n        if (typeof module === 'object' && module.exports) { // jshint ignore:line\r\n            // Node/CommonJS\r\n            // noinspection JSUnresolvedVariable\r\n            module.exports = factory(require('jquery')); // jshint ignore:line\r\n        } else {\r\n            // Browser globals\r\n            factory(window.jQuery);\r\n        }\r\n    }\r\n}(function ($) {\r\n    'use strict';\r\n\r\n    $.fn.fileinputLocales = {};\r\n    $.fn.fileinputThemes = {};\r\n\r\n    String.prototype.setTokens = function (replacePairs) {\r\n        var str = this.toString(), key, re;\r\n        for (key in replacePairs) {\r\n            if (replacePairs.hasOwnProperty(key)) {\r\n                re = new RegExp('\\{' + key + '\\}', 'g');\r\n                str = str.replace(re, replacePairs[key]);\r\n            }\r\n        }\r\n        return str;\r\n    };\r\n\r\n    var $h, FileInput;\r\n\r\n    // fileinput helper object for all global variables and internal helper methods\r\n    //noinspection JSUnresolvedVariable\r\n    $h = {\r\n        FRAMES: '.kv-preview-thumb',\r\n        SORT_CSS: 'file-sortable',\r\n        INIT_FLAG: 'init-',\r\n        OBJECT_PARAMS: '<param name=\"controller\" value=\"true\" />\\n' +\r\n            '<param name=\"allowFullScreen\" value=\"true\" />\\n' +\r\n            '<param name=\"allowScriptAccess\" value=\"always\" />\\n' +\r\n            '<param name=\"autoPlay\" value=\"false\" />\\n' +\r\n            '<param name=\"autoStart\" value=\"false\" />\\n' +\r\n            '<param name=\"quality\" value=\"high\" />\\n',\r\n        DEFAULT_PREVIEW: '<div class=\"file-preview-other\">\\n' +\r\n            '<span class=\"{previewFileIconClass}\">{previewFileIcon}</span>\\n' +\r\n            '</div>',\r\n        MODAL_ID: 'kvFileinputModal',\r\n        MODAL_EVENTS: ['show', 'shown', 'hide', 'hidden', 'loaded'],\r\n        logMessages: {\r\n            ajaxError: '{status}: {error}. Error Details: {text}.',\r\n            badDroppedFiles: 'Error scanning dropped files!',\r\n            badExifParser: 'Error loading the piexif.js library. {details}',\r\n            badInputType: 'The input \"type\" must be set to \"file\" for initializing the \"bootstrap-fileinput\" plugin.',\r\n            exifWarning: 'To avoid this warning, either set \"autoOrientImage\" to \"false\" OR ensure you have loaded ' +\r\n                'the \"piexif.js\" library correctly on your page before the \"fileinput.js\" script.',\r\n            invalidChunkSize: 'Invalid upload chunk size: \"{chunkSize}\". Resumable uploads are disabled.',\r\n            invalidThumb: 'Invalid thumb frame with id: \"{id}\".',\r\n            noResumableSupport: 'The browser does not support resumable or chunk uploads.',\r\n            noUploadUrl: 'The \"uploadUrl\" is not set. Ajax uploads and resumable uploads have been disabled.',\r\n            retryStatus: 'Retrying upload for chunk # {chunk} for {filename}... retry # {retry}.'\r\n        },\r\n        objUrl: window.URL || window.webkitURL,\r\n        now: function () {\r\n            return new Date();\r\n        },\r\n        round: function (num) {\r\n            num = parseFloat(num);\r\n            return isNaN(num) ? 0 : Math.floor(Math.round(num));\r\n        },\r\n        getFileRelativePath: function (file) {\r\n            /** @namespace file.relativePath */\r\n            /** @namespace file.webkitRelativePath */\r\n            return String(file.relativePath || file.webkitRelativePath || $h.getFileName(file) || null);\r\n\r\n        },\r\n        getFileId: function (file, generateFileId) {\r\n            var relativePath = $h.getFileRelativePath(file);\r\n            if (typeof generateFileId === 'function') {\r\n                return generateFileId(file);\r\n            }\r\n            if (!file) {\r\n                return null;\r\n            }\r\n            if (!relativePath) {\r\n                return null;\r\n            }\r\n            return (file.size + '_' + relativePath.replace(/\\s/img, '_'));\r\n        },\r\n        getFrameSelector: function (id, selector) {\r\n            selector = selector || '';\r\n            return '[id=\"' + id + '\"]' + selector;\r\n        },\r\n        getZoomSelector: function (id, selector) {\r\n            selector = selector || '';\r\n            return '[id=\"zoom-' + id + '\"]' + selector;\r\n        },\r\n        getFrameElement: function ($element, id, selector) {\r\n            return $element.find($h.getFrameSelector(id, selector));\r\n        },\r\n        getZoomElement: function ($element, id, selector) {\r\n            return $element.find($h.getZoomSelector(id, selector));\r\n        },\r\n        getElapsed: function (seconds) {\r\n            var delta = seconds, out = '', result = {}, structure = {\r\n                year: 31536000,\r\n                month: 2592000,\r\n                week: 604800, // uncomment row to ignore\r\n                day: 86400,   // feel free to add your own row\r\n                hour: 3600,\r\n                minute: 60,\r\n                second: 1\r\n            };\r\n            Object.keys(structure).forEach(function (key) {\r\n                result[key] = Math.floor(delta / structure[key]);\r\n                delta -= result[key] * structure[key];\r\n            });\r\n            $.each(result, function (key, value) {\r\n                if (value > 0) {\r\n                    out += (out ? ' ' : '') + value + key.substring(0, 1);\r\n                }\r\n            });\r\n            return out;\r\n        },\r\n        debounce: function (func, delay) {\r\n            var inDebounce;\r\n            return function () {\r\n                var args = arguments, context = this;\r\n                clearTimeout(inDebounce);\r\n                inDebounce = setTimeout(function () {\r\n                    func.apply(context, args);\r\n                }, delay);\r\n            };\r\n        },\r\n        stopEvent: function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        },\r\n        getFileName: function (file) {\r\n            /** @namespace file.fileName */\r\n            return file ? (file.fileName || file.name || '') : ''; // some confusion in different versions of Firefox\r\n        },\r\n        createObjectURL: function (data) {\r\n            if ($h.objUrl && $h.objUrl.createObjectURL && data) {\r\n                return $h.objUrl.createObjectURL(data);\r\n            }\r\n            return '';\r\n        },\r\n        revokeObjectURL: function (data) {\r\n            if ($h.objUrl && $h.objUrl.revokeObjectURL && data) {\r\n                $h.objUrl.revokeObjectURL(data);\r\n            }\r\n        },\r\n        compare: function (input, str, exact) {\r\n            return input !== undefined && (exact ? input === str : input.match(str));\r\n        },\r\n        isIE: function (ver) {\r\n            var div, status;\r\n            // check for IE versions < 11\r\n            if (navigator.appName !== 'Microsoft Internet Explorer') {\r\n                return false;\r\n            }\r\n            if (ver === 10) {\r\n                return new RegExp('msie\\\\s' + ver, 'i').test(navigator.userAgent);\r\n            }\r\n            div = document.createElement('div');\r\n            div.innerHTML = '<!--[if IE ' + ver + ']> <i></i> <![endif]-->';\r\n            status = div.getElementsByTagName('i').length;\r\n            document.body.appendChild(div);\r\n            div.parentNode.removeChild(div);\r\n            return status;\r\n        },\r\n        canAssignFilesToInput: function () {\r\n            var input = document.createElement('input');\r\n            try {\r\n                input.type = 'file';\r\n                input.files = null;\r\n                return true;\r\n            } catch (err) {\r\n                return false;\r\n            }\r\n        },\r\n        getDragDropFolders: function (items) {\r\n            var i, item, len = items ? items.length : 0, folders = 0;\r\n            if (len > 0 && items[0].webkitGetAsEntry()) {\r\n                for (i = 0; i < len; i++) {\r\n                    item = items[i].webkitGetAsEntry();\r\n                    if (item && item.isDirectory) {\r\n                        folders++;\r\n                    }\r\n                }\r\n            }\r\n            return folders;\r\n        },\r\n        initModal: function ($modal) {\r\n            var $body = $('body');\r\n            if ($body.length) {\r\n                $modal.appendTo($body);\r\n            }\r\n        },\r\n        isFunction: function (v) {\r\n            return typeof v === 'function';\r\n        },\r\n        isEmpty: function (value, trim) {\r\n            return value === undefined || value === null || (!$h.isFunction(\r\n                value) && (value.length === 0 || (trim && $.trim(value) === '')));\r\n        },\r\n        isArray: function (a) {\r\n            return Array.isArray(a) || Object.prototype.toString.call(a) === '[object Array]';\r\n        },\r\n        ifSet: function (needle, haystack, def) {\r\n            def = def || '';\r\n            return (haystack && typeof haystack === 'object' && needle in haystack) ? haystack[needle] : def;\r\n        },\r\n        cleanArray: function (arr) {\r\n            if (!(arr instanceof Array)) {\r\n                arr = [];\r\n            }\r\n            return arr.filter(function (e) {\r\n                return (e !== undefined && e !== null);\r\n            });\r\n        },\r\n        spliceArray: function (arr, index, reverseOrder) {\r\n            var i, j = 0, out = [], newArr;\r\n            if (!(arr instanceof Array)) {\r\n                return [];\r\n            }\r\n            newArr = $.extend(true, [], arr);\r\n            if (reverseOrder) {\r\n                newArr.reverse();\r\n            }\r\n            for (i = 0; i < newArr.length; i++) {\r\n                if (i !== index) {\r\n                    out[j] = newArr[i];\r\n                    j++;\r\n                }\r\n            }\r\n            if (reverseOrder) {\r\n                out.reverse();\r\n            }\r\n            return out;\r\n        },\r\n        getNum: function (num, def) {\r\n            def = def || 0;\r\n            if (typeof num === 'number') {\r\n                return num;\r\n            }\r\n            if (typeof num === 'string') {\r\n                num = parseFloat(num);\r\n            }\r\n            return isNaN(num) ? def : num;\r\n        },\r\n        hasFileAPISupport: function () {\r\n            return !!(window.File && window.FileReader);\r\n        },\r\n        hasDragDropSupport: function () {\r\n            var div = document.createElement('div');\r\n            /** @namespace div.draggable */\r\n            /** @namespace div.ondragstart */\r\n            /** @namespace div.ondrop */\r\n            return !$h.isIE(9) &&\r\n                (div.draggable !== undefined || (div.ondragstart !== undefined && div.ondrop !== undefined));\r\n        },\r\n        hasFileUploadSupport: function () {\r\n            return $h.hasFileAPISupport() && window.FormData;\r\n        },\r\n        hasBlobSupport: function () {\r\n            try {\r\n                return !!window.Blob && Boolean(new Blob());\r\n            } catch (e) {\r\n                return false;\r\n            }\r\n        },\r\n        hasArrayBufferViewSupport: function () {\r\n            try {\r\n                return new Blob([new Uint8Array(100)]).size === 100;\r\n            } catch (e) {\r\n                return false;\r\n            }\r\n        },\r\n        hasResumableUploadSupport: function () {\r\n            /** @namespace Blob.prototype.webkitSlice */\r\n            /** @namespace Blob.prototype.mozSlice */\r\n            return $h.hasFileUploadSupport() && $h.hasBlobSupport() && $h.hasArrayBufferViewSupport() &&\r\n                (!!Blob.prototype.webkitSlice || !!Blob.prototype.mozSlice || !!Blob.prototype.slice || false);\r\n        },\r\n        dataURI2Blob: function (dataURI) {\r\n            //noinspection JSUnresolvedVariable\r\n            var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder ||\r\n                window.MSBlobBuilder, canBlob = $h.hasBlobSupport(), byteStr, arrayBuffer, intArray, i, mimeStr, bb,\r\n                canProceed = (canBlob || BlobBuilder) && window.atob && window.ArrayBuffer && window.Uint8Array;\r\n            if (!canProceed) {\r\n                return null;\r\n            }\r\n            if (dataURI.split(',')[0].indexOf('base64') >= 0) {\r\n                byteStr = atob(dataURI.split(',')[1]);\r\n            } else {\r\n                byteStr = decodeURIComponent(dataURI.split(',')[1]);\r\n            }\r\n            arrayBuffer = new ArrayBuffer(byteStr.length);\r\n            intArray = new Uint8Array(arrayBuffer);\r\n            for (i = 0; i < byteStr.length; i += 1) {\r\n                intArray[i] = byteStr.charCodeAt(i);\r\n            }\r\n            mimeStr = dataURI.split(',')[0].split(':')[1].split(';')[0];\r\n            if (canBlob) {\r\n                return new Blob([$h.hasArrayBufferViewSupport() ? intArray : arrayBuffer], {type: mimeStr});\r\n            }\r\n            bb = new BlobBuilder();\r\n            bb.append(arrayBuffer);\r\n            return bb.getBlob(mimeStr);\r\n        },\r\n        arrayBuffer2String: function (buffer) {\r\n            //noinspection JSUnresolvedVariable\r\n            if (window.TextDecoder) {\r\n                // noinspection JSUnresolvedFunction\r\n                return new TextDecoder('utf-8').decode(buffer);\r\n            }\r\n            var array = Array.prototype.slice.apply(new Uint8Array(buffer)), out = '', i = 0, len, c, char2, char3;\r\n            len = array.length;\r\n            while (i < len) {\r\n                c = array[i++];\r\n                switch (c >> 4) { // jshint ignore:line\r\n                    case 0:\r\n                    case 1:\r\n                    case 2:\r\n                    case 3:\r\n                    case 4:\r\n                    case 5:\r\n                    case 6:\r\n                    case 7:\r\n                        // 0xxxxxxx\r\n                        out += String.fromCharCode(c);\r\n                        break;\r\n                    case 12:\r\n                    case 13:\r\n                        // 110x xxxx   10xx xxxx\r\n                        char2 = array[i++];\r\n                        out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F)); // jshint ignore:line\r\n                        break;\r\n                    case 14:\r\n                        // 1110 xxxx  10xx xxxx  10xx xxxx\r\n                        char2 = array[i++];\r\n                        char3 = array[i++];\r\n                        out += String.fromCharCode(((c & 0x0F) << 12) | // jshint ignore:line\r\n                            ((char2 & 0x3F) << 6) |  // jshint ignore:line\r\n                            ((char3 & 0x3F) << 0)); // jshint ignore:line\r\n                        break;\r\n                }\r\n            }\r\n            return out;\r\n        },\r\n        isHtml: function (str) {\r\n            var a = document.createElement('div');\r\n            a.innerHTML = str;\r\n            for (var c = a.childNodes, i = c.length; i--;) {\r\n                if (c[i].nodeType === 1) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n        isSvg: function (str) {\r\n            return str.match(/^\\s*<\\?xml/i) && (str.match(/<!DOCTYPE svg/i) || str.match(/<svg/i));\r\n        },\r\n        getMimeType: function (signature, contents, type) {\r\n            switch (signature) {\r\n                case 'ffd8ffe0':\r\n                case 'ffd8ffe1':\r\n                case 'ffd8ffe2':\r\n                    return 'image/jpeg';\r\n                case '89504E47':\r\n                    return 'image/png';\r\n                case '47494638':\r\n                    return 'image/gif';\r\n                case '49492a00':\r\n                    return 'image/tiff';\r\n                case '52494646':\r\n                    return 'image/webp';\r\n                case '66747970':\r\n                    return 'video/3gp';\r\n                case '4f676753':\r\n                    return 'video/ogg';\r\n                case '1a45dfa3':\r\n                    return 'video/mkv';\r\n                case '000001ba':\r\n                case '000001b3':\r\n                    return 'video/mpeg';\r\n                case '3026b275':\r\n                    return 'video/wmv';\r\n                case '25504446':\r\n                    return 'application/pdf';\r\n                case '25215053':\r\n                    return 'application/ps';\r\n                case '504b0304':\r\n                case '504b0506':\r\n                case '504b0508':\r\n                    return 'application/zip';\r\n                case '377abcaf':\r\n                    return 'application/7z';\r\n                case '75737461':\r\n                    return 'application/tar';\r\n                case '7801730d':\r\n                    return 'application/dmg';\r\n                default:\r\n                    switch (signature.substring(0, 6)) {\r\n                        case '435753':\r\n                            return 'application/x-shockwave-flash';\r\n                        case '494433':\r\n                            return 'audio/mp3';\r\n                        case '425a68':\r\n                            return 'application/bzip';\r\n                        default:\r\n                            switch (signature.substring(0, 4)) {\r\n                                case '424d':\r\n                                    return 'image/bmp';\r\n                                case 'fffb':\r\n                                    return 'audio/mp3';\r\n                                case '4d5a':\r\n                                    return 'application/exe';\r\n                                case '1f9d':\r\n                                case '1fa0':\r\n                                    return 'application/zip';\r\n                                case '1f8b':\r\n                                    return 'application/gzip';\r\n                                default:\r\n                                    return contents && !contents.match(\r\n                                        /[^\\u0000-\\u007f]/) ? 'application/text-plain' : type;\r\n                            }\r\n                    }\r\n            }\r\n        },\r\n        addCss: function ($el, css) {\r\n            $el.removeClass(css).addClass(css);\r\n        },\r\n        getElement: function (options, param, value) {\r\n            return ($h.isEmpty(options) || $h.isEmpty(options[param])) ? value : $(options[param]);\r\n        },\r\n        uniqId: function () {\r\n            return Math.round(new Date().getTime()) + '_' + Math.round(Math.random() * 100);\r\n        },\r\n        htmlEncode: function (str, undefVal) {\r\n            if (str === undefined) {\r\n                return undefVal || null;\r\n            }\r\n            return str.replace(/&/g, '&amp;')\r\n                .replace(/</g, '&lt;')\r\n                .replace(/>/g, '&gt;')\r\n                .replace(/\"/g, '&quot;')\r\n                .replace(/'/g, '&apos;');\r\n        },\r\n        replaceTags: function (str, tags) {\r\n            var out = str;\r\n            if (!tags) {\r\n                return out;\r\n            }\r\n            $.each(tags, function (key, value) {\r\n                if (typeof value === 'function') {\r\n                    value = value();\r\n                }\r\n                out = out.split(key).join(value);\r\n            });\r\n            return out;\r\n        },\r\n        cleanMemory: function ($thumb) {\r\n            var data = $thumb.is('img') ? $thumb.attr('src') : $thumb.find('source').attr('src');\r\n            $h.revokeObjectURL(data);\r\n        },\r\n        findFileName: function (filePath) {\r\n            var sepIndex = filePath.lastIndexOf('/');\r\n            if (sepIndex === -1) {\r\n                sepIndex = filePath.lastIndexOf('\\\\');\r\n            }\r\n            return filePath.split(filePath.substring(sepIndex, sepIndex + 1)).pop();\r\n        },\r\n        checkFullScreen: function () {\r\n            //noinspection JSUnresolvedVariable\r\n            return document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement ||\r\n                document.msFullscreenElement;\r\n        },\r\n        toggleFullScreen: function (maximize) {\r\n            var doc = document, de = doc.documentElement;\r\n            if (de && maximize && !$h.checkFullScreen()) {\r\n                /** @namespace document.requestFullscreen */\r\n                /** @namespace document.msRequestFullscreen */\r\n                /** @namespace document.mozRequestFullScreen */\r\n                /** @namespace document.webkitRequestFullscreen */\r\n                /** @namespace Element.ALLOW_KEYBOARD_INPUT */\r\n                if (de.requestFullscreen) {\r\n                    de.requestFullscreen();\r\n                } else {\r\n                    if (de.msRequestFullscreen) {\r\n                        de.msRequestFullscreen();\r\n                    } else {\r\n                        if (de.mozRequestFullScreen) {\r\n                            de.mozRequestFullScreen();\r\n                        } else {\r\n                            if (de.webkitRequestFullscreen) {\r\n                                de.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                /** @namespace document.exitFullscreen */\r\n                /** @namespace document.msExitFullscreen */\r\n                /** @namespace document.mozCancelFullScreen */\r\n                /** @namespace document.webkitExitFullscreen */\r\n                if (doc.exitFullscreen) {\r\n                    doc.exitFullscreen();\r\n                } else {\r\n                    if (doc.msExitFullscreen) {\r\n                        doc.msExitFullscreen();\r\n                    } else {\r\n                        if (doc.mozCancelFullScreen) {\r\n                            doc.mozCancelFullScreen();\r\n                        } else {\r\n                            if (doc.webkitExitFullscreen) {\r\n                                doc.webkitExitFullscreen();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        moveArray: function (arr, oldIndex, newIndex, reverseOrder) {\r\n            var newArr = $.extend(true, [], arr);\r\n            if (reverseOrder) {\r\n                newArr.reverse();\r\n            }\r\n            if (newIndex >= newArr.length) {\r\n                var k = newIndex - newArr.length;\r\n                while ((k--) + 1) {\r\n                    newArr.push(undefined);\r\n                }\r\n            }\r\n            newArr.splice(newIndex, 0, newArr.splice(oldIndex, 1)[0]);\r\n            if (reverseOrder) {\r\n                newArr.reverse();\r\n            }\r\n            return newArr;\r\n        },\r\n        cleanZoomCache: function ($el) {\r\n            var $cache = $el.closest('.kv-zoom-cache-theme');\r\n            if (!$cache.length) {\r\n                $cache = $el.closest('.kv-zoom-cache');\r\n            }\r\n            $cache.remove();\r\n        },\r\n        closeButton: function (css) {\r\n            css = css ? 'close ' + css : 'close';\r\n            return '<button type=\"button\" class=\"' + css + '\" aria-label=\"Close\">\\n' +\r\n                '  <span aria-hidden=\"true\">&times;</span>\\n' +\r\n                '</button>';\r\n        },\r\n        getRotation: function (value) {\r\n            switch (value) {\r\n                case 2:\r\n                    return 'rotateY(180deg)';\r\n                case 3:\r\n                    return 'rotate(180deg)';\r\n                case 4:\r\n                    return 'rotate(180deg) rotateY(180deg)';\r\n                case 5:\r\n                    return 'rotate(270deg) rotateY(180deg)';\r\n                case 6:\r\n                    return 'rotate(90deg)';\r\n                case 7:\r\n                    return 'rotate(90deg) rotateY(180deg)';\r\n                case 8:\r\n                    return 'rotate(270deg)';\r\n                default:\r\n                    return '';\r\n            }\r\n        },\r\n        setTransform: function (el, val) {\r\n            if (!el) {\r\n                return;\r\n            }\r\n            el.style.transform = val;\r\n            el.style.webkitTransform = val;\r\n            el.style['-moz-transform'] = val;\r\n            el.style['-ms-transform'] = val;\r\n            el.style['-o-transform'] = val;\r\n        }\r\n    };\r\n    FileInput = function (element, options) {\r\n        var self = this;\r\n        self.$element = $(element);\r\n        self.$parent = self.$element.parent();\r\n        if (!self._validate()) {\r\n            return;\r\n        }\r\n        self.isPreviewable = $h.hasFileAPISupport();\r\n        self.isIE9 = $h.isIE(9);\r\n        self.isIE10 = $h.isIE(10);\r\n        if (self.isPreviewable || self.isIE9) {\r\n            self._init(options);\r\n            self._listen();\r\n        }\r\n        self.$element.removeClass('file-loading');\r\n    };\r\n    //noinspection JSUnusedGlobalSymbols\r\n    FileInput.prototype = {\r\n        constructor: FileInput,\r\n        _cleanup: function () {\r\n            var self = this;\r\n            self.reader = null;\r\n            self.clearFileStack();\r\n            self.fileBatchCompleted = true;\r\n            self.isError = false;\r\n            self.cancelling = false;\r\n            self.paused = false;\r\n            self.lastProgress = 0;\r\n            self._initAjax();\r\n        },\r\n        _initAjax: function () {\r\n            var self = this;\r\n            self.ajaxQueue = [];\r\n            self.ajaxRequests = [];\r\n            self.ajaxQueueIntervalId = null;\r\n            self.ajaxCurrentThreads = 0;\r\n            self.ajaxAborted = false;\r\n        },\r\n        _init: function (options, refreshMode) {\r\n            var self = this, f, $el = self.$element, $cont, t, tmp;\r\n            self.options = options;\r\n            $.each(options, function (key, value) {\r\n                switch (key) {\r\n                    case 'minFileCount':\r\n                    case 'maxFileCount':\r\n                    case 'maxTotalFileCount':\r\n                    case 'minFileSize':\r\n                    case 'maxFileSize':\r\n                    case 'maxFilePreviewSize':\r\n                    case 'resizeImageQuality':\r\n                    case 'resizeIfSizeMoreThan':\r\n                    case 'progressUploadThreshold':\r\n                    case 'initialPreviewCount':\r\n                    case 'zoomModalHeight':\r\n                    case 'minImageHeight':\r\n                    case 'maxImageHeight':\r\n                    case 'minImageWidth':\r\n                    case 'maxImageWidth':\r\n                        self[key] = $h.getNum(value);\r\n                        break;\r\n                    default:\r\n                        self[key] = value;\r\n                        break;\r\n                }\r\n            });\r\n            if (self.maxTotalFileCount > 0 && self.maxTotalFileCount < self.maxFileCount) {\r\n                self.maxTotalFileCount = self.maxFileCount;\r\n            }\r\n            if (self.rtl) { // swap buttons for rtl\r\n                tmp = self.previewZoomButtonIcons.prev;\r\n                self.previewZoomButtonIcons.prev = self.previewZoomButtonIcons.next;\r\n                self.previewZoomButtonIcons.next = tmp;\r\n            }\r\n            // validate chunk threads to not exceed maxAjaxThreads\r\n            if (!isNaN(self.maxAjaxThreads) && self.maxAjaxThreads < self.resumableUploadOptions.maxThreads) {\r\n                self.resumableUploadOptions.maxThreads = self.maxAjaxThreads;\r\n            }\r\n            self._initFileManager();\r\n            if (typeof self.autoOrientImage === 'function') {\r\n                self.autoOrientImage = self.autoOrientImage();\r\n            }\r\n            if (typeof self.autoOrientImageInitial === 'function') {\r\n                self.autoOrientImageInitial = self.autoOrientImageInitial();\r\n            }\r\n            if (!refreshMode) {\r\n                self._cleanup();\r\n            }\r\n            self.duplicateErrors = [];\r\n            self.$form = $el.closest('form');\r\n            self._initTemplateDefaults();\r\n            self.uploadFileAttr = !$h.isEmpty($el.attr('name')) ? $el.attr('name') : 'file_data';\r\n            t = self._getLayoutTemplate('progress');\r\n            self.progressTemplate = t.replace('{class}', self.progressClass);\r\n            self.progressInfoTemplate = t.replace('{class}', self.progressInfoClass);\r\n            self.progressPauseTemplate = t.replace('{class}', self.progressPauseClass);\r\n            self.progressCompleteTemplate = t.replace('{class}', self.progressCompleteClass);\r\n            self.progressErrorTemplate = t.replace('{class}', self.progressErrorClass);\r\n            self.isDisabled = $el.attr('disabled') || $el.attr('readonly');\r\n            if (self.isDisabled) {\r\n                $el.attr('disabled', true);\r\n            }\r\n            self.isClickable = self.browseOnZoneClick && self.showPreview &&\r\n                (self.dropZoneEnabled || !$h.isEmpty(self.defaultPreviewContent));\r\n            self.isAjaxUpload = $h.hasFileUploadSupport() && !$h.isEmpty(self.uploadUrl);\r\n            self.dropZoneEnabled = $h.hasDragDropSupport() && self.dropZoneEnabled;\r\n            if (!self.isAjaxUpload) {\r\n                self.dropZoneEnabled = self.dropZoneEnabled && $h.canAssignFilesToInput();\r\n            }\r\n            self.slug = typeof options.slugCallback === 'function' ? options.slugCallback : self._slugDefault;\r\n            self.mainTemplate = self.showCaption ? self._getLayoutTemplate('main1') : self._getLayoutTemplate('main2');\r\n            self.captionTemplate = self._getLayoutTemplate('caption');\r\n            self.previewGenericTemplate = self._getPreviewTemplate('generic');\r\n            if (!self.imageCanvas && self.resizeImage && (self.maxImageWidth || self.maxImageHeight)) {\r\n                self.imageCanvas = document.createElement('canvas');\r\n                self.imageCanvasContext = self.imageCanvas.getContext('2d');\r\n            }\r\n            if ($h.isEmpty($el.attr('id'))) {\r\n                $el.attr('id', $h.uniqId());\r\n            }\r\n            self.namespace = '.fileinput_' + $el.attr('id').replace(/-/g, '_');\r\n            if (self.$container === undefined) {\r\n                self.$container = self._createContainer();\r\n            } else {\r\n                self._refreshContainer();\r\n            }\r\n            $cont = self.$container;\r\n            self.$dropZone = $cont.find('.file-drop-zone');\r\n            self.$progress = $cont.find('.kv-upload-progress');\r\n            self.$btnUpload = $cont.find('.fileinput-upload');\r\n            self.$captionContainer = $h.getElement(options, 'elCaptionContainer', $cont.find('.file-caption'));\r\n            self.$caption = $h.getElement(options, 'elCaptionText', $cont.find('.file-caption-name'));\r\n            if (!$h.isEmpty(self.msgPlaceholder)) {\r\n                f = $el.attr('multiple') ? self.filePlural : self.fileSingle;\r\n                self.$caption.attr('placeholder', self.msgPlaceholder.replace('{files}', f));\r\n            }\r\n            self.$captionIcon = self.$captionContainer.find('.file-caption-icon');\r\n            self.$previewContainer = $h.getElement(options, 'elPreviewContainer', $cont.find('.file-preview'));\r\n            self.$preview = $h.getElement(options, 'elPreviewImage', $cont.find('.file-preview-thumbnails'));\r\n            self.$previewStatus = $h.getElement(options, 'elPreviewStatus', $cont.find('.file-preview-status'));\r\n            self.$errorContainer = $h.getElement(options, 'elErrorContainer',\r\n                self.$previewContainer.find('.kv-fileinput-error'));\r\n            self._validateDisabled();\r\n            if (!$h.isEmpty(self.msgErrorClass)) {\r\n                $h.addCss(self.$errorContainer, self.msgErrorClass);\r\n            }\r\n            if (!refreshMode) {\r\n                self.$errorContainer.hide();\r\n                self.previewInitId = 'thumb-' + $el.attr('id');\r\n                self._initPreviewCache();\r\n                self._initPreview(true);\r\n                self._initPreviewActions();\r\n                if (self.$parent.hasClass('file-loading')) {\r\n                    self.$container.insertBefore(self.$parent);\r\n                    self.$parent.remove();\r\n                }\r\n            } else {\r\n                if (!self._errorsExist()) {\r\n                    self.$errorContainer.hide();\r\n                }\r\n            }\r\n            self._setFileDropZoneTitle();\r\n            if ($el.attr('disabled')) {\r\n                self.disable();\r\n            }\r\n            self._initZoom();\r\n            if (self.hideThumbnailContent) {\r\n                $h.addCss(self.$preview, 'hide-content');\r\n            }\r\n        },\r\n        _initFileManager: function () {\r\n            var self = this;\r\n            self.fileManager = {\r\n                stack: {},\r\n                processed: [],\r\n                errors: [],\r\n                loadedImages: {},\r\n                totalImages: 0,\r\n                totalFiles: null,\r\n                totalSize: null,\r\n                uploadedSize: 0,\r\n                stats: {},\r\n                initStats: function (id) {\r\n                    var data = {started: $h.now().getTime()};\r\n                    if (id) {\r\n                        self.fileManager.stats[id] = data;\r\n                    } else {\r\n                        self.fileManager.stats = data;\r\n                    }\r\n                },\r\n                getUploadStats: function (id, loaded, total) {\r\n                    var fm = self.fileManager, started = id ? fm.stats[id] && fm.stats[id].started || null : null;\r\n                    if (!started) {\r\n                        started = $h.now().getTime();\r\n                    }\r\n                    var elapsed = ($h.now().getTime() - started) / 1000,\r\n                        speeds = ['B/s', 'KB/s', 'MB/s', 'GB/s', 'TB/s', 'PB/s', 'EB/s', 'ZB/s', 'YB/s'],\r\n                        bps = elapsed ? loaded / elapsed : 0, bitrate = self._getSize(bps, speeds),\r\n                        pendingBytes = total - loaded,\r\n                        out = {\r\n                            fileId: id,\r\n                            started: started,\r\n                            elapsed: elapsed,\r\n                            loaded: loaded,\r\n                            total: total,\r\n                            bps: bps,\r\n                            bitrate: bitrate,\r\n                            pendingBytes: pendingBytes\r\n                        };\r\n                    if (id) {\r\n                        fm.stats[id] = out;\r\n                    } else {\r\n                        fm.stats = out;\r\n                    }\r\n                    return out;\r\n                },\r\n                exists: function (id) {\r\n                    return $.inArray(id, self.fileManager.getIdList()) !== -1;\r\n                },\r\n                count: function () {\r\n                    return self.fileManager.getIdList().length;\r\n                },\r\n                total: function () {\r\n                    var fm = self.fileManager;\r\n                    if (!fm.totalFiles) {\r\n                        fm.totalFiles = fm.count();\r\n                    }\r\n                    return fm.totalFiles;\r\n                },\r\n                getTotalSize: function () {\r\n                    var fm = self.fileManager;\r\n                    if (fm.totalSize) {\r\n                        return fm.totalSize;\r\n                    }\r\n                    fm.totalSize = 0;\r\n                    $.each(self.fileManager.stack, function (id, f) {\r\n                        var size = parseFloat(f.size);\r\n                        fm.totalSize += isNaN(size) ? 0 : size;\r\n                    });\r\n                    return fm.totalSize;\r\n                },\r\n                add: function (file, id) {\r\n                    if (!id) {\r\n                        id = self.fileManager.getId(file);\r\n                    }\r\n                    if (!id) {\r\n                        return;\r\n                    }\r\n                    self.fileManager.stack[id] = {\r\n                        file: file,\r\n                        name: $h.getFileName(file),\r\n                        relativePath: $h.getFileRelativePath(file),\r\n                        size: file.size,\r\n                        nameFmt: self._getFileName(file, ''),\r\n                        sizeFmt: self._getSize(file.size)\r\n                    };\r\n                },\r\n                remove: function ($thumb) {\r\n                    var id = $thumb.attr('data-fileid');\r\n                    if (id) {\r\n                        self.fileManager.removeFile(id);\r\n                    }\r\n                },\r\n                removeFile: function (id) {\r\n                    delete self.fileManager.stack[id];\r\n                    delete self.fileManager.loadedImages[id];\r\n                },\r\n                move: function (idFrom, idTo) {\r\n                    var result = {}, stack = self.fileManager.stack;\r\n                    if (!idFrom && !idTo || idFrom === idTo) {\r\n                        return;\r\n                    }\r\n                    $.each(stack, function (k, v) {\r\n                        if (k !== idFrom) {\r\n                            result[k] = v;\r\n                        }\r\n                        if (k === idTo) {\r\n                            result[idFrom] = stack[idFrom];\r\n                        }\r\n                    });\r\n                    self.fileManager.stack = result;\r\n                },\r\n                list: function () {\r\n                    var files = [];\r\n                    $.each(self.fileManager.stack, function (k, v) {\r\n                        if (v && v.file) {\r\n                            files.push(v.file);\r\n                        }\r\n                    });\r\n                    return files;\r\n                },\r\n                isPending: function (id) {\r\n                    return $.inArray(id, self.fileManager.processed) === -1 && self.fileManager.exists(id);\r\n                },\r\n                isProcessed: function () {\r\n                    var processed = true, fm = self.fileManager;\r\n                    $.each(fm.stack, function (id) {\r\n                        if (fm.isPending(id)) {\r\n                            processed = false;\r\n                        }\r\n                    });\r\n                    return processed;\r\n                },\r\n                clear: function () {\r\n                    var fm = self.fileManager;\r\n                    fm.totalFiles = null;\r\n                    fm.totalSize = null;\r\n                    fm.uploadedSize = 0;\r\n                    fm.stack = {};\r\n                    fm.errors = [];\r\n                    fm.processed = [];\r\n                    fm.stats = {};\r\n                    fm.clearImages();\r\n                },\r\n                clearImages: function () {\r\n                    self.fileManager.loadedImages = {};\r\n                    self.fileManager.totalImages = 0;\r\n                },\r\n                addImage: function (id, config) {\r\n                    self.fileManager.loadedImages[id] = config;\r\n                },\r\n                removeImage: function (id) {\r\n                    delete self.fileManager.loadedImages[id];\r\n                },\r\n                getImageIdList: function () {\r\n                    return Object.keys(self.fileManager.loadedImages);\r\n                },\r\n                getImageCount: function () {\r\n                    return self.fileManager.getImageIdList().length;\r\n                },\r\n                getId: function (file) {\r\n                    return self._getFileId(file);\r\n                },\r\n                getIndex: function (id) {\r\n                    return self.fileManager.getIdList().indexOf(id);\r\n                },\r\n                getThumb: function (id) {\r\n                    var $thumb = null;\r\n                    self._getThumbs().each(function () {\r\n                        var $t = $(this);\r\n                        if ($t.attr('data-fileid') === id) {\r\n                            $thumb = $t;\r\n                        }\r\n                    });\r\n                    return $thumb;\r\n                },\r\n                getThumbIndex: function ($thumb) {\r\n                    var id = $thumb.attr('data-fileid');\r\n                    return self.fileManager.getIndex(id);\r\n                },\r\n                getIdList: function () {\r\n                    return Object.keys(self.fileManager.stack);\r\n                },\r\n                getFile: function (id) {\r\n                    return self.fileManager.stack[id] || null;\r\n                },\r\n                getFileName: function (id, fmt) {\r\n                    var file = self.fileManager.getFile(id);\r\n                    if (!file) {\r\n                        return '';\r\n                    }\r\n                    return fmt ? (file.nameFmt || '') : file.name || '';\r\n                },\r\n                getFirstFile: function () {\r\n                    var ids = self.fileManager.getIdList(), id = ids && ids.length ? ids[0] : null;\r\n                    return self.fileManager.getFile(id);\r\n                },\r\n                setFile: function (id, file) {\r\n                    if (self.fileManager.getFile(id)) {\r\n                        self.fileManager.stack[id].file = file;\r\n                    } else {\r\n                        self.fileManager.add(file, id);\r\n                    }\r\n                },\r\n                setProcessed: function (id) {\r\n                    self.fileManager.processed.push(id);\r\n                },\r\n                getProgress: function () {\r\n                    var total = self.fileManager.total(), processed = self.fileManager.processed.length;\r\n                    if (!total) {\r\n                        return 0;\r\n                    }\r\n                    return Math.ceil(processed / total * 100);\r\n\r\n                },\r\n                setProgress: function (id, pct) {\r\n                    var f = self.fileManager.getFile(id);\r\n                    if (!isNaN(pct) && f) {\r\n                        f.progress = pct;\r\n                    }\r\n                }\r\n            };\r\n        },\r\n        _setUploadData: function (fd, config) {\r\n            var self = this;\r\n            $.each(config, function (key, value) {\r\n                var param = self.uploadParamNames[key] || key;\r\n                if ($h.isArray(value)) {\r\n                    fd.append(param, value[0], value[1]);\r\n                } else {\r\n                    fd.append(param, value);\r\n                }\r\n            });\r\n        },\r\n        _initResumableUpload: function () {\r\n            var self = this, opts = self.resumableUploadOptions, logs = $h.logMessages;\r\n            if (!self.enableResumableUpload) {\r\n                return;\r\n            }\r\n            if (opts.fallback !== false && typeof opts.fallback !== 'function') {\r\n                opts.fallback = function (s) {\r\n                    s._log(logs.noResumableSupport);\r\n                    s.enableResumableUpload = false;\r\n                };\r\n            }\r\n            if (!$h.hasResumableUploadSupport() && opts.fallback !== false) {\r\n                opts.fallback(self);\r\n                return;\r\n            }\r\n            if (!self.uploadUrl && self.enableResumableUpload) {\r\n                self._log(logs.noUploadUrl);\r\n                self.enableResumableUpload = false;\r\n                return;\r\n\r\n            }\r\n            opts.chunkSize = parseFloat(opts.chunkSize);\r\n            if (opts.chunkSize <= 0 || isNaN(opts.chunkSize)) {\r\n                self._log(logs.invalidChunkSize, {chunkSize: opts.chunkSize});\r\n                self.enableResumableUpload = false;\r\n                return;\r\n            }\r\n            self.resumableManager = {\r\n                init: function (id, f, index) {\r\n                    var rm = self.resumableManager, fm = self.fileManager;\r\n                    rm.currThreads = 0;\r\n                    rm.logs = [];\r\n                    rm.stack = [];\r\n                    rm.error = '';\r\n                    rm.chunkIntervalId = null;\r\n                    rm.id = id;\r\n                    rm.file = f.file;\r\n                    rm.fileName = f.name;\r\n                    rm.fileIndex = index;\r\n                    rm.completed = false;\r\n                    rm.testing = false;\r\n                    rm.lastProgress = 0;\r\n                    if (self.showPreview) {\r\n                        rm.$thumb = fm.getThumb(id) || null;\r\n                        rm.$progress = rm.$btnDelete = null;\r\n                        if (rm.$thumb && rm.$thumb.length) {\r\n                            rm.$progress = rm.$thumb.find('.file-thumb-progress');\r\n                            rm.$btnDelete = rm.$thumb.find('.kv-file-remove');\r\n                        }\r\n                    }\r\n                    rm.chunkSize = self.resumableUploadOptions.chunkSize * 1024;\r\n                    rm.chunkCount = rm.getTotalChunks();\r\n                },\r\n                logAjaxError: function (jqXHR, textStatus, errorThrown) {\r\n                    if (self.resumableUploadOptions.showErrorLog) {\r\n                        self._log(logs.ajaxError, {\r\n                            status: jqXHR.status,\r\n                            error: errorThrown,\r\n                            text: jqXHR.responseText || ''\r\n                        });\r\n                    }\r\n                },\r\n                reset: function () {\r\n                    var rm = self.resumableManager;\r\n                    rm.processed = {};\r\n                },\r\n                setProcessed: function (status) {\r\n                    var rm = self.resumableManager, fm = self.fileManager, id = rm.id, msg,\r\n                        $thumb = rm.$thumb, $prog = rm.$progress, hasThumb = $thumb && $thumb.length,\r\n                        params = {id: hasThumb ? $thumb.attr('id') : '', index: fm.getIndex(id), fileId: id};\r\n                    rm.completed = true;\r\n                    rm.lastProgress = 0;\r\n                    fm.uploadedSize += rm.file.size;\r\n                    if (hasThumb) {\r\n                        $thumb.removeClass('file-uploading');\r\n                    }\r\n                    if (status === 'success') {\r\n                        if (self.showPreview) {\r\n                            self._setProgress(101, $prog);\r\n                            self._setThumbStatus($thumb, 'Success');\r\n                            self._initUploadSuccess(rm.processed[id].data, $thumb);\r\n                        }\r\n                        self.fileManager.removeFile(id);\r\n                        delete rm.processed[id];\r\n                        self._raise('fileuploaded', [params.id, params.index, params.fileId]);\r\n                        if (fm.isProcessed()) {\r\n                            self._setProgress(101);\r\n                        }\r\n                    } else {\r\n                        if (self.showPreview) {\r\n                            self._setThumbStatus($thumb, 'Error');\r\n                            self._setPreviewError($thumb, true);\r\n                            self._setProgress(101, $prog, self.msgProgressError);\r\n                            self._setProgress(101, self.$progress, self.msgProgressError);\r\n                            self.cancelling = true;\r\n                        }\r\n                        if (!self.$errorContainer.find('li[data-file-id=\"' + params.fileId + '\"]').length) {\r\n                            msg = self.msgResumableUploadRetriesExceeded.setTokens({\r\n                                file: rm.fileName,\r\n                                max: self.resumableUploadOptions.maxRetries,\r\n                                error: rm.error\r\n                            });\r\n                            self._showFileError(msg, params);\r\n                        }\r\n                    }\r\n                    if (fm.isProcessed()) {\r\n                        rm.reset();\r\n                    }\r\n                },\r\n                check: function () {\r\n                    var rm = self.resumableManager, status = true;\r\n                    $.each(rm.logs, function (index, value) {\r\n                        if (!value) {\r\n                            status = false;\r\n                            return false;\r\n                        }\r\n                    });\r\n                    if (status) {\r\n                        clearInterval(rm.chunkIntervalId);\r\n                        rm.setProcessed('success');\r\n                    }\r\n                },\r\n                processedResumables: function () {\r\n                    var logs = self.resumableManager.logs, i, count = 0;\r\n                    if (!logs || !logs.length) {\r\n                        return 0;\r\n                    }\r\n                    for (i = 0; i < logs.length; i++) {\r\n                        if (logs[i] === true) {\r\n                            count++;\r\n                        }\r\n                    }\r\n                    return count;\r\n                },\r\n                getUploadedSize: function () {\r\n                    var rm = self.resumableManager, size = rm.processedResumables() * rm.chunkSize;\r\n                    return size > rm.file.size ? rm.file.size : size;\r\n                },\r\n                getTotalChunks: function () {\r\n                    var rm = self.resumableManager, chunkSize = parseFloat(rm.chunkSize);\r\n                    if (!isNaN(chunkSize) && chunkSize > 0) {\r\n                        return Math.ceil(rm.file.size / chunkSize);\r\n                    }\r\n                    return 0;\r\n                },\r\n                getProgress: function () {\r\n                    var rm = self.resumableManager, processed = rm.processedResumables(), total = rm.chunkCount;\r\n                    if (total === 0) {\r\n                        return 0;\r\n                    }\r\n                    return Math.ceil(processed / total * 100);\r\n                },\r\n                checkAborted: function (intervalId) {\r\n                    if (self.paused || self.cancelling) {\r\n                        clearInterval(intervalId);\r\n                        self.unlock();\r\n                    }\r\n                },\r\n                upload: function () {\r\n                    var rm = self.resumableManager, fm = self.fileManager, ids = fm.getIdList(), flag = 'new',\r\n                        intervalId;\r\n                    intervalId = setInterval(function () {\r\n                        var id;\r\n                        rm.checkAborted(intervalId);\r\n                        if (flag === 'new') {\r\n                            self.lock();\r\n                            flag = 'processing';\r\n                            id = ids.shift();\r\n                            fm.initStats(id);\r\n                            if (fm.stack[id]) {\r\n                                rm.init(id, fm.stack[id], fm.getIndex(id));\r\n                                rm.testUpload();\r\n                                rm.uploadResumable();\r\n                            }\r\n                        }\r\n                        if (!fm.isPending(id) && rm.completed) {\r\n                            flag = 'new';\r\n                        }\r\n                        if (fm.isProcessed()) {\r\n                            var $initThumbs = self.$preview.find('.file-preview-initial');\r\n                            if ($initThumbs.length) {\r\n                                $h.addCss($initThumbs, $h.SORT_CSS);\r\n                                self._initSortable();\r\n                            }\r\n                            clearInterval(intervalId);\r\n                            self._clearFileInput();\r\n                            self.unlock();\r\n                            setTimeout(function () {\r\n                                var data = self.previewCache.data;\r\n                                if (data) {\r\n                                    self.initialPreview = data.content;\r\n                                    self.initialPreviewConfig = data.config;\r\n                                    self.initialPreviewThumbTags = data.tags;\r\n                                }\r\n                                self._raise('filebatchuploadcomplete', [\r\n                                    self.initialPreview,\r\n                                    self.initialPreviewConfig,\r\n                                    self.initialPreviewThumbTags,\r\n                                    self._getExtraData()\r\n                                ]);\r\n                            }, self.processDelay);\r\n                        }\r\n                    }, self.processDelay);\r\n                },\r\n                uploadResumable: function () {\r\n                    var i, rm = self.resumableManager, total = rm.chunkCount;\r\n                    for (i = 0; i < total; i++) {\r\n                        rm.logs[i] = !!(rm.processed[rm.id] && rm.processed[rm.id][i]);\r\n                    }\r\n                    for (i = 0; i < total; i++) {\r\n                        rm.pushAjax(i, 0);\r\n                    }\r\n                    rm.chunkIntervalId = setInterval(rm.loopAjax, self.queueDelay);\r\n                },\r\n                testUpload: function () {\r\n                    var rm = self.resumableManager, opts = self.resumableUploadOptions, fd, f,\r\n                        fm = self.fileManager, id = rm.id, fnBefore, fnSuccess, fnError, fnComplete, outData;\r\n                    if (!opts.testUrl) {\r\n                        rm.testing = false;\r\n                        return;\r\n                    }\r\n                    rm.testing = true;\r\n                    fd = new FormData();\r\n                    f = fm.stack[id];\r\n                    self._setUploadData(fd, {\r\n                        fileId: id,\r\n                        fileName: f.fileName,\r\n                        fileSize: f.size,\r\n                        fileRelativePath: f.relativePath,\r\n                        chunkSize: rm.chunkSize,\r\n                        chunkCount: rm.chunkCount\r\n                    });\r\n                    fnBefore = function (jqXHR) {\r\n                        outData = self._getOutData(fd, jqXHR);\r\n                        self._raise('filetestbeforesend', [id, fm, rm, outData]);\r\n                    };\r\n                    fnSuccess = function (data, textStatus, jqXHR) {\r\n                        outData = self._getOutData(fd, jqXHR, data);\r\n                        var pNames = self.uploadParamNames, chunksUploaded = pNames.chunksUploaded || 'chunksUploaded',\r\n                            params = [id, fm, rm, outData];\r\n                        if (!data[chunksUploaded] || !$h.isArray(data[chunksUploaded])) {\r\n                            self._raise('filetesterror', params);\r\n                        } else {\r\n                            if (!rm.processed[id]) {\r\n                                rm.processed[id] = {};\r\n                            }\r\n                            $.each(data[chunksUploaded], function (key, index) {\r\n                                rm.logs[index] = true;\r\n                                rm.processed[id][index] = true;\r\n                            });\r\n                            rm.processed[id].data = data;\r\n                            self._raise('filetestsuccess', params);\r\n                        }\r\n                        rm.testing = false;\r\n                    };\r\n                    fnError = function (jqXHR, textStatus, errorThrown) {\r\n                        outData = self._getOutData(fd, jqXHR);\r\n                        self._raise('filetestajaxerror', [id, fm, rm, outData]);\r\n                        rm.logAjaxError(jqXHR, textStatus, errorThrown);\r\n                        rm.testing = false;\r\n                    };\r\n                    fnComplete = function () {\r\n                        self._raise('filetestcomplete', [id, fm, rm, self._getOutData(fd)]);\r\n                        rm.testing = false;\r\n                    };\r\n                    self._ajaxSubmit(fnBefore, fnSuccess, fnComplete, fnError, fd, id, rm.fileIndex, opts.testUrl);\r\n                },\r\n                pushAjax: function (index, retry) {\r\n                    self.resumableManager.stack.push([index, retry]);\r\n                },\r\n                sendAjax: function (index, retry) {\r\n                    var fm = self.fileManager, rm = self.resumableManager, opts = self.resumableUploadOptions, f,\r\n                        chunkSize = rm.chunkSize, id = rm.id, file = rm.file, $thumb = rm.$thumb,\r\n                        $btnDelete = rm.$btnDelete;\r\n                    if (rm.processed[id] && rm.processed[id][index]) {\r\n                        return;\r\n                    }\r\n                    rm.currThreads++;\r\n                    if (retry > opts.maxRetries) {\r\n                        rm.setProcessed('error');\r\n                        return;\r\n                    }\r\n                    var fd, outData, fnBefore, fnSuccess, fnError, fnComplete, slice = file.slice ? 'slice' :\r\n                        (file.mozSlice ? 'mozSlice' : (file.webkitSlice ? 'webkitSlice' : 'slice')),\r\n                        blob = file[slice](chunkSize * index, chunkSize * (index + 1));\r\n                    fd = new FormData();\r\n                    f = fm.stack[id];\r\n                    self._setUploadData(fd, {\r\n                        chunkCount: rm.chunkCount,\r\n                        chunkIndex: index,\r\n                        chunkSize: chunkSize,\r\n                        chunkSizeStart: chunkSize * index,\r\n                        fileBlob: [blob, rm.fileName],\r\n                        fileId: id,\r\n                        fileName: rm.fileName,\r\n                        fileRelativePath: f.relativePath,\r\n                        fileSize: file.size,\r\n                        retryCount: retry\r\n                    });\r\n                    if (rm.$progress && rm.$progress.length) {\r\n                        rm.$progress.show();\r\n                    }\r\n                    fnBefore = function (jqXHR) {\r\n                        outData = self._getOutData(fd, jqXHR);\r\n                        if (self.showPreview) {\r\n                            if (!$thumb.hasClass('file-preview-success')) {\r\n                                self._setThumbStatus($thumb, 'Loading');\r\n                                $h.addCss($thumb, 'file-uploading');\r\n                            }\r\n                            $btnDelete.attr('disabled', true);\r\n                        }\r\n                        self._raise('filechunkbeforesend', [id, index, retry, fm, rm, outData]);\r\n                    };\r\n                    fnSuccess = function (data, textStatus, jqXHR) {\r\n                        outData = self._getOutData(fd, jqXHR, data);\r\n                        var paramNames = self.uploadParamNames, chunkIndex = paramNames.chunkIndex || 'chunkIndex',\r\n                            opts = self.resumableUploadOptions, params = [id, index, retry, fm, rm, outData];\r\n                        rm.currThreads--;\r\n                        if (data.error) {\r\n                            if (opts.showErrorLog) {\r\n                                self._log(logs.retryStatus, {\r\n                                    retry: retry + 1,\r\n                                    filename: rm.fileName,\r\n                                    chunk: index\r\n                                });\r\n                            }\r\n                            rm.pushAjax(index, retry + 1);\r\n                            rm.error = data.error;\r\n                            self._raise('filechunkerror', params);\r\n                        } else {\r\n                            rm.logs[data[chunkIndex]] = true;\r\n                            if (!rm.processed[id]) {\r\n                                rm.processed[id] = {};\r\n                            }\r\n                            rm.processed[id][data[chunkIndex]] = true;\r\n                            rm.processed[id].data = data;\r\n                            self._raise('filechunksuccess', params);\r\n                            rm.check();\r\n                        }\r\n                    };\r\n                    fnError = function (jqXHR, textStatus, errorThrown) {\r\n                        outData = self._getOutData(fd, jqXHR);\r\n                        rm.currThreads--;\r\n                        rm.error = errorThrown;\r\n                        rm.logAjaxError(jqXHR, textStatus, errorThrown);\r\n                        self._raise('filechunkajaxerror', [id, index, retry, fm, rm, outData]);\r\n                        rm.pushAjax(index, retry + 1);\r\n                    };\r\n                    fnComplete = function () {\r\n                        self._raise('filechunkcomplete', [id, index, retry, fm, rm, self._getOutData(fd)]);\r\n                    };\r\n                    self._ajaxSubmit(fnBefore, fnSuccess, fnComplete, fnError, fd, id, rm.fileIndex);\r\n                },\r\n                loopAjax: function () {\r\n                    var rm = self.resumableManager;\r\n                    if (rm.currThreads < self.resumableUploadOptions.maxThreads && !rm.testing) {\r\n                        var arr = rm.stack.shift(), index;\r\n                        if (typeof arr !== 'undefined') {\r\n                            index = arr[0];\r\n                            if (!rm.processed[rm.id] || !rm.processed[rm.id][index]) {\r\n                                rm.sendAjax(index, arr[1]);\r\n                            } else {\r\n                                if (rm.processedResumables() >= rm.getTotalChunks()) {\r\n                                    rm.setProcessed('success');\r\n                                    clearInterval(rm.chunkIntervalId);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            self.resumableManager.reset();\r\n        },\r\n        _initTemplateDefaults: function () {\r\n            var self = this, tMain1, tMain2, tPreview, tFileIcon, tClose, tCaption, tBtnDefault, tBtnLink, tBtnBrowse,\r\n                tModalMain, tModal, tProgress, tSize, tFooter, tActions, tActionDelete, tActionUpload, tActionDownload,\r\n                tActionZoom, tActionDrag, tIndicator, tTagBef, tTagBef1, tTagBef2, tTagAft, tGeneric, tHtml, tImage,\r\n                tText, tOffice, tGdocs, tVideo, tAudio, tFlash, tObject, tPdf, tOther, tStyle, tZoomCache, vDefaultDim,\r\n                tStats;\r\n            tMain1 = '{preview}\\n' +\r\n                '<div class=\"kv-upload-progress kv-hidden\"></div><div class=\"clearfix\"></div>\\n' +\r\n                '<div class=\"input-group {class}\">\\n' +\r\n                '  {caption}\\n' +\r\n                '<div class=\"input-group-btn input-group-append\">\\n' +\r\n                '      {remove}\\n' +\r\n                '      {cancel}\\n' +\r\n                '      {pause}\\n' +\r\n                '      {upload}\\n' +\r\n                '      {browse}\\n' +\r\n                '    </div>\\n' +\r\n                '</div>';\r\n            tMain2 = '{preview}\\n<div class=\"kv-upload-progress kv-hidden\"></div>\\n<div class=\"clearfix\"></div>\\n' +\r\n                '{remove}\\n{cancel}\\n{upload}\\n{browse}\\n';\r\n            tPreview = '<div class=\"file-preview {class}\">\\n' +\r\n                '  {close}' +\r\n                '  <div class=\"{dropClass} clearfix\">\\n' +\r\n                '    <div class=\"file-preview-thumbnails clearfix\">\\n' +\r\n                '    </div>\\n' +\r\n                '    <div class=\"file-preview-status text-center text-success\"></div>\\n' +\r\n                '    <div class=\"kv-fileinput-error\"></div>\\n' +\r\n                '  </div>\\n' +\r\n                '</div>';\r\n            tClose = $h.closeButton('fileinput-remove');\r\n            tFileIcon = '<i class=\"glyphicon glyphicon-file\"></i>';\r\n            // noinspection HtmlUnknownAttribute\r\n            tCaption = '<div class=\"file-caption form-control {class}\" tabindex=\"500\">\\n' +\r\n                '  <span class=\"file-caption-icon\"></span>\\n' +\r\n                '  <input class=\"file-caption-name\" onkeydown=\"return false;\" onpaste=\"return false;\">\\n' +\r\n                '</div>';\r\n            //noinspection HtmlUnknownAttribute\r\n            tBtnDefault = '<button type=\"{type}\" tabindex=\"500\" title=\"{title}\" class=\"{css}\" ' +\r\n                '{status}>{icon} {label}</button>';\r\n            //noinspection HtmlUnknownTarget,HtmlUnknownAttribute\r\n            tBtnLink = '<a href=\"{href}\" tabindex=\"500\" title=\"{title}\" class=\"{css}\" {status}>{icon} {label}</a>';\r\n            //noinspection HtmlUnknownAttribute\r\n            tBtnBrowse = '<div tabindex=\"500\" class=\"{css}\" {status}>{icon} {label}</div>';\r\n            tModalMain = '<div id=\"' + $h.MODAL_ID + '\" class=\"file-zoom-dialog modal fade\" ' +\r\n                'tabindex=\"-1\" aria-labelledby=\"' + $h.MODAL_ID + 'Label\"></div>';\r\n            tModal = '<div class=\"modal-dialog modal-lg{rtl}\" role=\"document\">\\n' +\r\n                '  <div class=\"modal-content\">\\n' +\r\n                '    <div class=\"modal-header\">\\n' +\r\n                '      <h5 class=\"modal-title\">{heading}</h5>\\n' +\r\n                '      <span class=\"kv-zoom-title\"></span>\\n' +\r\n                '      <div class=\"kv-zoom-actions\">{toggleheader}{fullscreen}{borderless}{close}</div>\\n' +\r\n                '    </div>\\n' +\r\n                '    <div class=\"modal-body\">\\n' +\r\n                '      <div class=\"floating-buttons\"></div>\\n' +\r\n                '      <div class=\"kv-zoom-body file-zoom-content {zoomFrameClass}\"></div>\\n' + '{prev} {next}\\n' +\r\n                '    </div>\\n' +\r\n                '  </div>\\n' +\r\n                '</div>\\n';\r\n            tProgress = '<div class=\"progress\">\\n' +\r\n                '    <div class=\"{class}\" role=\"progressbar\"' +\r\n                ' aria-valuenow=\"{percent}\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width:{percent}%;\">\\n' +\r\n                '        {status}\\n' +\r\n                '     </div>\\n' +\r\n                '</div>{stats}';\r\n            tStats = '<div class=\"text-info file-upload-stats\">' +\r\n                '<span class=\"pending-time\">{pendingTime}</span> ' +\r\n                '<span class=\"upload-speed\">{uploadSpeed}</span>' +\r\n                '</div>';\r\n            tSize = ' <samp>({sizeText})</samp>';\r\n            tFooter = '<div class=\"file-thumbnail-footer\">\\n' +\r\n                '    <div class=\"file-footer-caption\" title=\"{caption}\">\\n' +\r\n                '        <div class=\"file-caption-info\">{caption}</div>\\n' +\r\n                '        <div class=\"file-size-info\">{size}</div>\\n' +\r\n                '    </div>\\n' +\r\n                '    {progress}\\n{indicator}\\n{actions}\\n' +\r\n                '</div>';\r\n            tActions = '<div class=\"file-actions\">\\n' +\r\n                '    <div class=\"file-footer-buttons\">\\n' +\r\n                '        {download} {upload} {delete} {zoom} {other}' +\r\n                '    </div>\\n' +\r\n                '</div>\\n' +\r\n                '{drag}\\n' +\r\n                '<div class=\"clearfix\"></div>';\r\n            //noinspection HtmlUnknownAttribute\r\n            tActionDelete = '<button type=\"button\" class=\"kv-file-remove {removeClass}\" ' +\r\n                'title=\"{removeTitle}\" {dataUrl}{dataKey}>{removeIcon}</button>\\n';\r\n            tActionUpload = '<button type=\"button\" class=\"kv-file-upload {uploadClass}\" title=\"{uploadTitle}\">' +\r\n                '{uploadIcon}</button>';\r\n            tActionDownload = '<a class=\"kv-file-download {downloadClass}\" title=\"{downloadTitle}\" ' +\r\n                'href=\"{downloadUrl}\" download=\"{caption}\" target=\"_blank\">{downloadIcon}</a>';\r\n            tActionZoom = '<button type=\"button\" class=\"kv-file-zoom {zoomClass}\" ' +\r\n                'title=\"{zoomTitle}\">{zoomIcon}</button>';\r\n            tActionDrag = '<span class=\"file-drag-handle {dragClass}\" title=\"{dragTitle}\">{dragIcon}</span>';\r\n            tIndicator = '<div class=\"file-upload-indicator\" title=\"{indicatorTitle}\">{indicator}</div>';\r\n            tTagBef = '<div class=\"file-preview-frame {frameClass}\" id=\"{previewId}\" data-fileindex=\"{fileindex}\"' +\r\n                ' data-fileid=\"{fileid}\" data-template=\"{template}\"';\r\n            tTagBef1 = tTagBef + '><div class=\"kv-file-content\">\\n';\r\n            tTagBef2 = tTagBef + ' title=\"{caption}\"><div class=\"kv-file-content\">\\n';\r\n            tTagAft = '</div>{footer}\\n</div>\\n';\r\n            tGeneric = '{content}\\n';\r\n            tStyle = ' {style}';\r\n            tHtml = '<div class=\"kv-preview-data file-preview-html\" title=\"{caption}\"' + tStyle + '>{data}</div>\\n';\r\n            tImage = '<img src=\"{data}\" class=\"file-preview-image kv-preview-data\" title=\"{title}\" ' +\r\n                'alt=\"{alt}\"' + tStyle + '>\\n';\r\n            tText = '<textarea class=\"kv-preview-data file-preview-text\" title=\"{caption}\" readonly' + tStyle + '>' +\r\n                '{data}</textarea>\\n';\r\n            tOffice = '<iframe class=\"kv-preview-data file-preview-office\" ' +\r\n                'src=\"https://view.officeapps.live.com/op/embed.aspx?src={data}\"' + tStyle + '></iframe>';\r\n            tGdocs = '<iframe class=\"kv-preview-data file-preview-gdocs\" ' +\r\n                'src=\"https://docs.google.com/gview?url={data}&embedded=true\"' + tStyle + '></iframe>';\r\n            tVideo = '<video class=\"kv-preview-data file-preview-video\" controls' + tStyle + '>\\n' +\r\n                '<source src=\"{data}\" type=\"{type}\">\\n' + $h.DEFAULT_PREVIEW + '\\n</video>\\n';\r\n            tAudio = '<!--suppress ALL --><audio class=\"kv-preview-data file-preview-audio\" controls' + tStyle + '>\\n<source src=\"{data}\" ' +\r\n                'type=\"{type}\">\\n' + $h.DEFAULT_PREVIEW + '\\n</audio>\\n';\r\n            tFlash = '<embed class=\"kv-preview-data file-preview-flash\" src=\"{data}\" type=\"application/x-shockwave-flash\"' + tStyle + '>\\n';\r\n            tPdf = '<embed class=\"kv-preview-data file-preview-pdf\" src=\"{data}\" type=\"application/pdf\"' + tStyle + '>\\n';\r\n            tObject = '<object class=\"kv-preview-data file-preview-object file-object {typeCss}\" ' +\r\n                'data=\"{data}\" type=\"{type}\"' + tStyle + '>\\n' + '<param name=\"movie\" value=\"{caption}\" />\\n' +\r\n                $h.OBJECT_PARAMS + ' ' + $h.DEFAULT_PREVIEW + '\\n</object>\\n';\r\n            tOther = '<div class=\"kv-preview-data file-preview-other-frame\"' + tStyle + '>\\n' + $h.DEFAULT_PREVIEW + '\\n</div>\\n';\r\n            tZoomCache = '<div class=\"kv-zoom-cache\" style=\"display:none\">{zoomContent}</div>';\r\n            vDefaultDim = {width: '100%', height: '100%', 'min-height': '480px'};\r\n            if (self._isPdfRendered()) {\r\n                tPdf = self.pdfRendererTemplate.replace('{renderer}', self._encodeURI(self.pdfRendererUrl));\r\n            }\r\n            self.defaults = {\r\n                layoutTemplates: {\r\n                    main1: tMain1,\r\n                    main2: tMain2,\r\n                    preview: tPreview,\r\n                    close: tClose,\r\n                    fileIcon: tFileIcon,\r\n                    caption: tCaption,\r\n                    modalMain: tModalMain,\r\n                    modal: tModal,\r\n                    progress: tProgress,\r\n                    stats: tStats,\r\n                    size: tSize,\r\n                    footer: tFooter,\r\n                    indicator: tIndicator,\r\n                    actions: tActions,\r\n                    actionDelete: tActionDelete,\r\n                    actionUpload: tActionUpload,\r\n                    actionDownload: tActionDownload,\r\n                    actionZoom: tActionZoom,\r\n                    actionDrag: tActionDrag,\r\n                    btnDefault: tBtnDefault,\r\n                    btnLink: tBtnLink,\r\n                    btnBrowse: tBtnBrowse,\r\n                    zoomCache: tZoomCache\r\n                },\r\n                previewMarkupTags: {\r\n                    tagBefore1: tTagBef1,\r\n                    tagBefore2: tTagBef2,\r\n                    tagAfter: tTagAft\r\n                },\r\n                previewContentTemplates: {\r\n                    generic: tGeneric,\r\n                    html: tHtml,\r\n                    image: tImage,\r\n                    text: tText,\r\n                    office: tOffice,\r\n                    gdocs: tGdocs,\r\n                    video: tVideo,\r\n                    audio: tAudio,\r\n                    flash: tFlash,\r\n                    object: tObject,\r\n                    pdf: tPdf,\r\n                    other: tOther\r\n                },\r\n                allowedPreviewTypes: ['image', 'html', 'text', 'video', 'audio', 'flash', 'pdf', 'object'],\r\n                previewTemplates: {},\r\n                previewSettings: {\r\n                    image: {width: 'auto', height: 'auto', 'max-width': '100%', 'max-height': '100%'},\r\n                    html: {width: '213px', height: '160px'},\r\n                    text: {width: '213px', height: '160px'},\r\n                    office: {width: '213px', height: '160px'},\r\n                    gdocs: {width: '213px', height: '160px'},\r\n                    video: {width: '213px', height: '160px'},\r\n                    audio: {width: '100%', height: '30px'},\r\n                    flash: {width: '213px', height: '160px'},\r\n                    object: {width: '213px', height: '160px'},\r\n                    pdf: {width: '100%', height: '160px', 'position': 'relative'},\r\n                    other: {width: '213px', height: '160px'}\r\n                },\r\n                previewSettingsSmall: {\r\n                    image: {width: 'auto', height: 'auto', 'max-width': '100%', 'max-height': '100%'},\r\n                    html: {width: '100%', height: '160px'},\r\n                    text: {width: '100%', height: '160px'},\r\n                    office: {width: '100%', height: '160px'},\r\n                    gdocs: {width: '100%', height: '160px'},\r\n                    video: {width: '100%', height: 'auto'},\r\n                    audio: {width: '100%', height: '30px'},\r\n                    flash: {width: '100%', height: 'auto'},\r\n                    object: {width: '100%', height: 'auto'},\r\n                    pdf: {width: '100%', height: '160px'},\r\n                    other: {width: '100%', height: '160px'}\r\n                },\r\n                previewZoomSettings: {\r\n                    image: {width: 'auto', height: 'auto', 'max-width': '100%', 'max-height': '100%'},\r\n                    html: vDefaultDim,\r\n                    text: vDefaultDim,\r\n                    office: {width: '100%', height: '100%', 'max-width': '100%', 'min-height': '480px'},\r\n                    gdocs: {width: '100%', height: '100%', 'max-width': '100%', 'min-height': '480px'},\r\n                    video: {width: 'auto', height: '100%', 'max-width': '100%'},\r\n                    audio: {width: '100%', height: '30px'},\r\n                    flash: {width: 'auto', height: '480px'},\r\n                    object: {width: 'auto', height: '100%', 'max-width': '100%', 'min-height': '480px'},\r\n                    pdf: vDefaultDim,\r\n                    other: {width: 'auto', height: '100%', 'min-height': '480px'}\r\n                },\r\n                mimeTypeAliases: {\r\n                    'video/quicktime': 'video/mp4'\r\n                },\r\n                fileTypeSettings: {\r\n                    image: function (vType, vName) {\r\n                        return ($h.compare(vType, 'image.*') && !$h.compare(vType, /(tiff?|wmf)$/i) ||\r\n                            $h.compare(vName, /\\.(gif|png|jpe?g)$/i));\r\n                    },\r\n                    html: function (vType, vName) {\r\n                        return $h.compare(vType, 'text/html') || $h.compare(vName, /\\.(htm|html)$/i);\r\n                    },\r\n                    office: function (vType, vName) {\r\n                        return $h.compare(vType, /(word|excel|powerpoint|office)$/i) ||\r\n                            $h.compare(vName, /\\.(docx?|xlsx?|pptx?|pps|potx?)$/i);\r\n                    },\r\n                    gdocs: function (vType, vName) {\r\n                        return $h.compare(vType, /(word|excel|powerpoint|office|iwork-pages|tiff?)$/i) ||\r\n                            $h.compare(vName,\r\n                                /\\.(docx?|xlsx?|pptx?|pps|potx?|rtf|ods|odt|pages|ai|dxf|ttf|tiff?|wmf|e?ps)$/i);\r\n                    },\r\n                    text: function (vType, vName) {\r\n                        return $h.compare(vType, 'text.*') || $h.compare(vName, /\\.(xml|javascript)$/i) ||\r\n                            $h.compare(vName, /\\.(txt|md|csv|nfo|ini|json|php|js|css)$/i);\r\n                    },\r\n                    video: function (vType, vName) {\r\n                        return $h.compare(vType, 'video.*') && ($h.compare(vType, /(ogg|mp4|mp?g|mov|webm|3gp)$/i) ||\r\n                            $h.compare(vName, /\\.(og?|mp4|webm|mp?g|mov|3gp)$/i));\r\n                    },\r\n                    audio: function (vType, vName) {\r\n                        return $h.compare(vType, 'audio.*') && ($h.compare(vName, /(ogg|mp3|mp?g|wav)$/i) ||\r\n                            $h.compare(vName, /\\.(og?|mp3|mp?g|wav)$/i));\r\n                    },\r\n                    flash: function (vType, vName) {\r\n                        return $h.compare(vType, 'application/x-shockwave-flash', true) || $h.compare(vName,\r\n                            /\\.(swf)$/i);\r\n                    },\r\n                    pdf: function (vType, vName) {\r\n                        return $h.compare(vType, 'application/pdf', true) || $h.compare(vName, /\\.(pdf)$/i);\r\n                    },\r\n                    object: function () {\r\n                        return true;\r\n                    },\r\n                    other: function () {\r\n                        return true;\r\n                    }\r\n                },\r\n                fileActionSettings: {\r\n                    showRemove: true,\r\n                    showUpload: true,\r\n                    showDownload: true,\r\n                    showZoom: true,\r\n                    showDrag: true,\r\n                    removeIcon: '<i class=\"glyphicon glyphicon-trash\"></i>',\r\n                    removeClass: 'btn btn-sm btn-kv btn-default btn-outline-secondary',\r\n                    removeErrorClass: 'btn btn-sm btn-kv btn-danger',\r\n                    removeTitle: 'Remove file',\r\n                    uploadIcon: '<i class=\"glyphicon glyphicon-upload\"></i>',\r\n                    uploadClass: 'btn btn-sm btn-kv btn-default btn-outline-secondary',\r\n                    uploadTitle: 'Upload file',\r\n                    uploadRetryIcon: '<i class=\"glyphicon glyphicon-repeat\"></i>',\r\n                    uploadRetryTitle: 'Retry upload',\r\n                    downloadIcon: '<i class=\"glyphicon glyphicon-download\"></i>',\r\n                    downloadClass: 'btn btn-sm btn-kv btn-default btn-outline-secondary',\r\n                    downloadTitle: 'Download file',\r\n                    zoomIcon: '<i class=\"glyphicon glyphicon-zoom-in\"></i>',\r\n                    zoomClass: 'btn btn-sm btn-kv btn-default btn-outline-secondary',\r\n                    zoomTitle: 'View Details',\r\n                    dragIcon: '<i class=\"glyphicon glyphicon-move\"></i>',\r\n                    dragClass: 'text-info',\r\n                    dragTitle: 'Move / Rearrange',\r\n                    dragSettings: {},\r\n                    indicatorNew: '<i class=\"glyphicon glyphicon-plus-sign text-warning\"></i>',\r\n                    indicatorSuccess: '<i class=\"glyphicon glyphicon-ok-sign text-success\"></i>',\r\n                    indicatorError: '<i class=\"glyphicon glyphicon-exclamation-sign text-danger\"></i>',\r\n                    indicatorLoading: '<i class=\"glyphicon glyphicon-hourglass text-muted\"></i>',\r\n                    indicatorPaused: '<i class=\"glyphicon glyphicon-pause text-primary\"></i>',\r\n                    indicatorNewTitle: 'Not uploaded yet',\r\n                    indicatorSuccessTitle: 'Uploaded',\r\n                    indicatorErrorTitle: 'Upload Error',\r\n                    indicatorLoadingTitle: 'Uploading ...',\r\n                    indicatorPausedTitle: 'Upload Paused'\r\n                }\r\n            };\r\n            $.each(self.defaults, function (key, setting) {\r\n                if (key === 'allowedPreviewTypes') {\r\n                    if (self.allowedPreviewTypes === undefined) {\r\n                        self.allowedPreviewTypes = setting;\r\n                    }\r\n                    return;\r\n                }\r\n                self[key] = $.extend(true, {}, setting, self[key]);\r\n            });\r\n            self._initPreviewTemplates();\r\n        },\r\n        _initPreviewTemplates: function () {\r\n            var self = this, tags = self.previewMarkupTags, tagBef, tagAft = tags.tagAfter;\r\n            $.each(self.previewContentTemplates, function (key, value) {\r\n                if ($h.isEmpty(self.previewTemplates[key])) {\r\n                    tagBef = tags.tagBefore2;\r\n                    if (key === 'generic' || key === 'image' || key === 'html' || key === 'text') {\r\n                        tagBef = tags.tagBefore1;\r\n                    }\r\n                    if (self._isPdfRendered() && key === 'pdf') {\r\n                        tagBef = tagBef.replace('kv-file-content', 'kv-file-content kv-pdf-rendered');\r\n                    }\r\n                    self.previewTemplates[key] = tagBef + value + tagAft;\r\n                }\r\n            });\r\n        },\r\n        _initPreviewCache: function () {\r\n            var self = this;\r\n            self.previewCache = {\r\n                data: {},\r\n                init: function () {\r\n                    var content = self.initialPreview;\r\n                    if (content.length > 0 && !$h.isArray(content)) {\r\n                        content = content.split(self.initialPreviewDelimiter);\r\n                    }\r\n                    self.previewCache.data = {\r\n                        content: content,\r\n                        config: self.initialPreviewConfig,\r\n                        tags: self.initialPreviewThumbTags\r\n                    };\r\n                },\r\n                count: function (skipNull) {\r\n                    if (!self.previewCache.data || !self.previewCache.data.content) {\r\n                        return 0;\r\n                    }\r\n                    if (skipNull) {\r\n                        var chk = self.previewCache.data.content.filter(function (n) {\r\n                            return n !== null;\r\n                        });\r\n                        return chk.length;\r\n                    }\r\n                    return self.previewCache.data.content.length;\r\n                },\r\n                get: function (i, isDisabled) {\r\n                    var ind = $h.INIT_FLAG + i, data = self.previewCache.data, config = data.config[i],\r\n                        content = data.content[i], out, $tmp, cat, ftr,\r\n                        fname, ftype, frameClass, asData = $h.ifSet('previewAsData', config, self.initialPreviewAsData),\r\n                        a = config ? {title: config.title || null, alt: config.alt || null} : {title: null, alt: null},\r\n                        parseTemplate = function (cat, dat, fname, ftype, ftr, ind, fclass, t) {\r\n                            var fc = ' file-preview-initial ' + $h.SORT_CSS + (fclass ? ' ' + fclass : ''),\r\n                                id = self.previewInitId + '-' + ind,\r\n                                fileId = config && config.fileId || id;\r\n                            /** @namespace config.zoomData */\r\n                            return self._generatePreviewTemplate(cat, dat, fname, ftype, id, fileId, false, null, fc,\r\n                                ftr, ind, t, a, config && config.zoomData || dat);\r\n                        };\r\n                    if (!content || !content.length) {\r\n                        return '';\r\n                    }\r\n                    isDisabled = isDisabled === undefined ? true : isDisabled;\r\n                    cat = $h.ifSet('type', config, self.initialPreviewFileType || 'generic');\r\n                    fname = $h.ifSet('filename', config, $h.ifSet('caption', config));\r\n                    ftype = $h.ifSet('filetype', config, cat);\r\n                    ftr = self.previewCache.footer(i, isDisabled, (config && config.size || null));\r\n                    frameClass = $h.ifSet('frameClass', config);\r\n                    if (asData) {\r\n                        out = parseTemplate(cat, content, fname, ftype, ftr, ind, frameClass);\r\n                    } else {\r\n                        out = parseTemplate('generic', content, fname, ftype, ftr, ind, frameClass, cat)\r\n                            .setTokens({'content': data.content[i]});\r\n                    }\r\n                    if (data.tags.length && data.tags[i]) {\r\n                        out = $h.replaceTags(out, data.tags[i]);\r\n                    }\r\n                    /** @namespace config.frameAttr */\r\n                    if (!$h.isEmpty(config) && !$h.isEmpty(config.frameAttr)) {\r\n                        $tmp = $(document.createElement('div')).html(out);\r\n                        $tmp.find('.file-preview-initial').attr(config.frameAttr);\r\n                        out = $tmp.html();\r\n                        $tmp.remove();\r\n                    }\r\n                    return out;\r\n                },\r\n                clean: function (data) {\r\n                    data.content = $h.cleanArray(data.content);\r\n                    data.config = $h.cleanArray(data.config);\r\n                    data.tags = $h.cleanArray(data.tags);\r\n                    self.previewCache.data = data;\r\n                },\r\n                add: function (content, config, tags, append) {\r\n                    var data = self.previewCache.data, index;\r\n                    if (!content || !content.length) {\r\n                        return 0;\r\n                    }\r\n                    index = content.length - 1;\r\n                    if (!$h.isArray(content)) {\r\n                        content = content.split(self.initialPreviewDelimiter);\r\n                    }\r\n                    if (append && data.content && data.content.length) {\r\n                        index = data.content.push(content[0]) - 1;\r\n                        data.config[index] = config;\r\n                        data.tags[index] = tags;\r\n                    } else {\r\n                        data.content = content;\r\n                        data.config = config;\r\n                        data.tags = tags;\r\n                    }\r\n                    self.previewCache.clean(data);\r\n                    return index;\r\n                },\r\n                set: function (content, config, tags, append) {\r\n                    var data = self.previewCache.data, i, chk;\r\n                    if (!content || !content.length) {\r\n                        return;\r\n                    }\r\n                    if (!$h.isArray(content)) {\r\n                        content = content.split(self.initialPreviewDelimiter);\r\n                    }\r\n                    chk = content.filter(function (n) {\r\n                        return n !== null;\r\n                    });\r\n                    if (!chk.length) {\r\n                        return;\r\n                    }\r\n                    if (data.content === undefined) {\r\n                        data.content = [];\r\n                    }\r\n                    if (data.config === undefined) {\r\n                        data.config = [];\r\n                    }\r\n                    if (data.tags === undefined) {\r\n                        data.tags = [];\r\n                    }\r\n                    if (append) {\r\n                        for (i = 0; i < content.length; i++) {\r\n                            if (content[i]) {\r\n                                data.content.push(content[i]);\r\n                            }\r\n                        }\r\n                        for (i = 0; i < config.length; i++) {\r\n                            if (config[i]) {\r\n                                data.config.push(config[i]);\r\n                            }\r\n                        }\r\n                        for (i = 0; i < tags.length; i++) {\r\n                            if (tags[i]) {\r\n                                data.tags.push(tags[i]);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        data.content = content;\r\n                        data.config = config;\r\n                        data.tags = tags;\r\n                    }\r\n                    self.previewCache.clean(data);\r\n                },\r\n                unset: function (index) {\r\n                    var chk = self.previewCache.count(), rev = self.reversePreviewOrder;\r\n                    if (!chk) {\r\n                        return;\r\n                    }\r\n                    if (chk === 1) {\r\n                        self.previewCache.data.content = [];\r\n                        self.previewCache.data.config = [];\r\n                        self.previewCache.data.tags = [];\r\n                        self.initialPreview = [];\r\n                        self.initialPreviewConfig = [];\r\n                        self.initialPreviewThumbTags = [];\r\n                        return;\r\n                    }\r\n                    self.previewCache.data.content = $h.spliceArray(self.previewCache.data.content, index, rev);\r\n                    self.previewCache.data.config = $h.spliceArray(self.previewCache.data.config, index, rev);\r\n                    self.previewCache.data.tags = $h.spliceArray(self.previewCache.data.tags, index, rev);\r\n                    var data = $.extend(true, {}, self.previewCache.data);\r\n                    self.previewCache.clean(data);\r\n                },\r\n                out: function () {\r\n                    var html = '', caption, len = self.previewCache.count(), i, content;\r\n                    if (len === 0) {\r\n                        return {content: '', caption: ''};\r\n                    }\r\n                    for (i = 0; i < len; i++) {\r\n                        content = self.previewCache.get(i);\r\n                        html = self.reversePreviewOrder ? (content + html) : (html + content);\r\n                    }\r\n                    caption = self._getMsgSelected(len);\r\n                    return {content: html, caption: caption};\r\n                },\r\n                footer: function (i, isDisabled, size) {\r\n                    var data = self.previewCache.data || {};\r\n                    if ($h.isEmpty(data.content)) {\r\n                        return '';\r\n                    }\r\n                    if ($h.isEmpty(data.config) || $h.isEmpty(data.config[i])) {\r\n                        data.config[i] = {};\r\n                    }\r\n                    isDisabled = isDisabled === undefined ? true : isDisabled;\r\n                    var config = data.config[i], caption = $h.ifSet('caption', config), a,\r\n                        width = $h.ifSet('width', config, 'auto'), url = $h.ifSet('url', config, false),\r\n                        key = $h.ifSet('key', config, null), fileId = $h.ifSet('fileId', config, null),\r\n                        fs = self.fileActionSettings, initPreviewShowDel = self.initialPreviewShowDelete || false,\r\n                        downloadInitialUrl = !self.initialPreviewDownloadUrl ? '' :\r\n                            self.initialPreviewDownloadUrl + '?key=' + key + (fileId ? '&fileId=' + fileId : ''),\r\n                        dUrl = config.downloadUrl || downloadInitialUrl,\r\n                        dFil = config.filename || config.caption || '',\r\n                        initPreviewShowDwl = !!(dUrl),\r\n                        sDel = $h.ifSet('showRemove', config, initPreviewShowDel),\r\n                        sDwl = $h.ifSet('showDownload', config, $h.ifSet('showDownload', fs, initPreviewShowDwl)),\r\n                        sZm = $h.ifSet('showZoom', config, $h.ifSet('showZoom', fs, true)),\r\n                        sDrg = $h.ifSet('showDrag', config, $h.ifSet('showDrag', fs, true)),\r\n                        dis = (url === false) && isDisabled;\r\n                    sDwl = sDwl && config.downloadUrl !== false && !!dUrl;\r\n                    a = self._renderFileActions(config, false, sDwl, sDel, sZm, sDrg, dis, url, key, true, dUrl, dFil);\r\n                    return self._getLayoutTemplate('footer').setTokens({\r\n                        'progress': self._renderThumbProgress(),\r\n                        'actions': a,\r\n                        'caption': caption,\r\n                        'size': self._getSize(size),\r\n                        'width': width,\r\n                        'indicator': ''\r\n                    });\r\n                }\r\n            };\r\n            self.previewCache.init();\r\n        },\r\n        _isPdfRendered: function () {\r\n            var self = this, useLib = self.usePdfRenderer,\r\n                flag = typeof useLib === 'function' ? useLib() : !!useLib;\r\n            return flag && self.pdfRendererUrl;\r\n        },\r\n        _handler: function ($el, event, callback) {\r\n            var self = this, ns = self.namespace, ev = event.split(' ').join(ns + ' ') + ns;\r\n            if (!$el || !$el.length) {\r\n                return;\r\n            }\r\n            $el.off(ev).on(ev, callback);\r\n        },\r\n        _encodeURI: function (vUrl) {\r\n            var self = this;\r\n            return self.encodeUrl ? encodeURI(vUrl) : vUrl;\r\n        },\r\n        _log: function (msg, tokens) {\r\n            var self = this, id = self.$element.attr('id');\r\n            if (!self.showConsoleLogs) {\r\n                return;\r\n            }\r\n            if (id) {\r\n                msg = '\"' + id + '\": ' + msg;\r\n            }\r\n            msg = 'bootstrap-fileinput: ' + msg;\r\n            if (typeof tokens === 'object') {\r\n                msg = msg.setTokens(tokens);\r\n            }\r\n            if (window.console && typeof window.console.log !== 'undefined') {\r\n                window.console.log(msg);\r\n            } else {\r\n                window.alert(msg);\r\n            }\r\n        },\r\n        _validate: function () {\r\n            var self = this, status = self.$element.attr('type') === 'file';\r\n            if (!status) {\r\n                self._log($h.logMessages.badInputType);\r\n            }\r\n            return status;\r\n        },\r\n        _errorsExist: function () {\r\n            var self = this, $err, $errList = self.$errorContainer.find('li');\r\n            if ($errList.length) {\r\n                return true;\r\n            }\r\n            $err = $(document.createElement('div')).html(self.$errorContainer.html());\r\n            $err.find('.kv-error-close').remove();\r\n            $err.find('ul').remove();\r\n            return !!$.trim($err.text()).length;\r\n        },\r\n        _errorHandler: function (evt, caption) {\r\n            var self = this, err = evt.target.error, showError = function (msg) {\r\n                self._showError(msg.replace('{name}', caption));\r\n            };\r\n            /** @namespace err.NOT_FOUND_ERR */\r\n            /** @namespace err.SECURITY_ERR */\r\n            /** @namespace err.NOT_READABLE_ERR */\r\n            if (err.code === err.NOT_FOUND_ERR) {\r\n                showError(self.msgFileNotFound);\r\n            } else {\r\n                if (err.code === err.SECURITY_ERR) {\r\n                    showError(self.msgFileSecured);\r\n                } else {\r\n                    if (err.code === err.NOT_READABLE_ERR) {\r\n                        showError(self.msgFileNotReadable);\r\n                    } else {\r\n                        if (err.code === err.ABORT_ERR) {\r\n                            showError(self.msgFilePreviewAborted);\r\n                        } else {\r\n                            showError(self.msgFilePreviewError);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        _addError: function (msg) {\r\n            var self = this, $error = self.$errorContainer;\r\n            if (msg && $error.length) {\r\n                $error.html(self.errorCloseButton + msg);\r\n                self._handler($error.find('.kv-error-close'), 'click', function () {\r\n                    setTimeout(function () {\r\n                        if (self.showPreview && !self.getFrames().length) {\r\n                            self.clear();\r\n                        }\r\n                        $error.fadeOut('slow');\r\n                    }, self.processDelay);\r\n                });\r\n            }\r\n        },\r\n        _setValidationError: function (css) {\r\n            var self = this;\r\n            css = (css ? css + ' ' : '') + 'has-error';\r\n            self.$container.removeClass(css).addClass('has-error');\r\n            $h.addCss(self.$captionContainer, 'is-invalid');\r\n        },\r\n        _resetErrors: function (fade) {\r\n            var self = this, $error = self.$errorContainer;\r\n            self.isError = false;\r\n            self.$container.removeClass('has-error');\r\n            self.$captionContainer.removeClass('is-invalid');\r\n            $error.html('');\r\n            if (fade) {\r\n                $error.fadeOut('slow');\r\n            } else {\r\n                $error.hide();\r\n            }\r\n        },\r\n        _showFolderError: function (folders) {\r\n            var self = this, $error = self.$errorContainer, msg;\r\n            if (!folders) {\r\n                return;\r\n            }\r\n            if (!self.isAjaxUpload) {\r\n                self._clearFileInput();\r\n            }\r\n            msg = self.msgFoldersNotAllowed.replace('{n}', folders);\r\n            self._addError(msg);\r\n            self._setValidationError();\r\n            $error.fadeIn(self.fadeDelay);\r\n            self._raise('filefoldererror', [folders, msg]);\r\n        },\r\n        _showFileError: function (msg, params, event) {\r\n            var self = this, $error = self.$errorContainer, ev = event || 'fileuploaderror',\r\n                fId = params && params.fileId || '', e = params && params.id ?\r\n                '<li data-thumb-id=\"' + params.id + '\" data-file-id=\"' + fId + '\">' + msg + '</li>' : '<li>' + msg + '</li>';\r\n\r\n            if ($error.find('ul').length === 0) {\r\n                self._addError('<ul>' + e + '</ul>');\r\n            } else {\r\n                $error.find('ul').append(e);\r\n            }\r\n            $error.fadeIn(self.fadeDelay);\r\n            self._raise(ev, [params, msg]);\r\n            self._setValidationError('file-input-new');\r\n            return true;\r\n        },\r\n        _showError: function (msg, params, event) {\r\n            var self = this, $error = self.$errorContainer, ev = event || 'fileerror';\r\n            params = params || {};\r\n            params.reader = self.reader;\r\n            self._addError(msg);\r\n            $error.fadeIn(self.fadeDelay);\r\n            self._raise(ev, [params, msg]);\r\n            if (!self.isAjaxUpload) {\r\n                self._clearFileInput();\r\n            }\r\n            self._setValidationError('file-input-new');\r\n            self.$btnUpload.attr('disabled', true);\r\n            return true;\r\n        },\r\n        _noFilesError: function (params) {\r\n            var self = this, label = self.minFileCount > 1 ? self.filePlural : self.fileSingle,\r\n                msg = self.msgFilesTooLess.replace('{n}', self.minFileCount).replace('{files}', label),\r\n                $error = self.$errorContainer;\r\n            msg = '<li>' + msg + '</li>';\r\n            if ($error.find('ul').length === 0) {\r\n                self._addError('<ul>' + msg + '</ul>');\r\n            } else {\r\n                $error.find('ul').append(msg);\r\n            }\r\n            self.isError = true;\r\n            self._updateFileDetails(0);\r\n            $error.fadeIn(self.fadeDelay);\r\n            self._raise('fileerror', [params, msg]);\r\n            self._clearFileInput();\r\n            self._setValidationError();\r\n        },\r\n        _parseError: function (operation, jqXHR, errorThrown, fileName) {\r\n            /** @namespace jqXHR.responseJSON */\r\n            var self = this, errMsg = $.trim(errorThrown + ''), textPre,\r\n                text = jqXHR.responseJSON !== undefined && jqXHR.responseJSON.error !== undefined ?\r\n                    jqXHR.responseJSON.error : jqXHR.responseText;\r\n            if (self.cancelling && self.msgUploadAborted) {\r\n                errMsg = self.msgUploadAborted;\r\n            }\r\n            if (self.showAjaxErrorDetails && text) {\r\n                text = $.trim(text.replace(/\\n\\s*\\n/g, '\\n'));\r\n                textPre = text.length ? '<pre>' + text + '</pre>' : '';\r\n                errMsg += errMsg ? textPre : text;\r\n            }\r\n            if (!errMsg) {\r\n                errMsg = self.msgAjaxError.replace('{operation}', operation);\r\n            }\r\n            self.cancelling = false;\r\n            return fileName ? '<b>' + fileName + ': </b>' + errMsg : errMsg;\r\n        },\r\n        _parseFileType: function (type, name) {\r\n            var self = this, isValid, vType, cat, i, types = self.allowedPreviewTypes || [];\r\n            if (type === 'application/text-plain') {\r\n                return 'text';\r\n            }\r\n            for (i = 0; i < types.length; i++) {\r\n                cat = types[i];\r\n                isValid = self.fileTypeSettings[cat];\r\n                vType = isValid(type, name) ? cat : '';\r\n                if (!$h.isEmpty(vType)) {\r\n                    return vType;\r\n                }\r\n            }\r\n            return 'other';\r\n        },\r\n        _getPreviewIcon: function (fname) {\r\n            var self = this, ext, out = null;\r\n            if (fname && fname.indexOf('.') > -1) {\r\n                ext = fname.split('.').pop();\r\n                if (self.previewFileIconSettings) {\r\n                    out = self.previewFileIconSettings[ext] || self.previewFileIconSettings[ext.toLowerCase()] || null;\r\n                }\r\n                if (self.previewFileExtSettings) {\r\n                    $.each(self.previewFileExtSettings, function (key, func) {\r\n                        if (self.previewFileIconSettings[key] && func(ext)) {\r\n                            out = self.previewFileIconSettings[key];\r\n                            //noinspection UnnecessaryReturnStatementJS\r\n                            return;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            return out || self.previewFileIcon;\r\n        },\r\n        _parseFilePreviewIcon: function (content, fname) {\r\n            var self = this, icn = self._getPreviewIcon(fname), out = content;\r\n            if (out.indexOf('{previewFileIcon}') > -1) {\r\n                out = out.setTokens({'previewFileIconClass': self.previewFileIconClass, 'previewFileIcon': icn});\r\n            }\r\n            return out;\r\n        },\r\n        _raise: function (event, params) {\r\n            var self = this, e = $.Event(event);\r\n            if (params !== undefined) {\r\n                self.$element.trigger(e, params);\r\n            } else {\r\n                self.$element.trigger(e);\r\n            }\r\n            if (e.isDefaultPrevented() || e.result === false) {\r\n                return false;\r\n            }\r\n            switch (event) {\r\n                // ignore these events\r\n                case 'filebatchuploadcomplete':\r\n                case 'filebatchuploadsuccess':\r\n                case 'fileuploaded':\r\n                case 'fileclear':\r\n                case 'filecleared':\r\n                case 'filereset':\r\n                case 'fileerror':\r\n                case 'filefoldererror':\r\n                case 'fileuploaderror':\r\n                case 'filebatchuploaderror':\r\n                case 'filedeleteerror':\r\n                case 'filecustomerror':\r\n                case 'filesuccessremove':\r\n                    break;\r\n                // receive data response via `filecustomerror` event`\r\n                default:\r\n                    if (!self.ajaxAborted) {\r\n                        self.ajaxAborted = e.result;\r\n                    }\r\n                    break;\r\n            }\r\n            return true;\r\n        },\r\n        _listenFullScreen: function (isFullScreen) {\r\n            var self = this, $modal = self.$modal, $btnFull, $btnBord;\r\n            if (!$modal || !$modal.length) {\r\n                return;\r\n            }\r\n            $btnFull = $modal && $modal.find('.btn-fullscreen');\r\n            $btnBord = $modal && $modal.find('.btn-borderless');\r\n            if (!$btnFull.length || !$btnBord.length) {\r\n                return;\r\n            }\r\n            $btnFull.removeClass('active').attr('aria-pressed', 'false');\r\n            $btnBord.removeClass('active').attr('aria-pressed', 'false');\r\n            if (isFullScreen) {\r\n                $btnFull.addClass('active').attr('aria-pressed', 'true');\r\n            } else {\r\n                $btnBord.addClass('active').attr('aria-pressed', 'true');\r\n            }\r\n            if ($modal.hasClass('file-zoom-fullscreen')) {\r\n                self._maximizeZoomDialog();\r\n            } else {\r\n                if (isFullScreen) {\r\n                    self._maximizeZoomDialog();\r\n                } else {\r\n                    $btnBord.removeClass('active').attr('aria-pressed', 'false');\r\n                }\r\n            }\r\n        },\r\n        _listen: function () {\r\n            var self = this, $el = self.$element, $form = self.$form, $cont = self.$container, fullScreenEvents;\r\n            self._handler($el, 'click', function (e) {\r\n                if ($el.hasClass('file-no-browse')) {\r\n                    if ($el.data('zoneClicked')) {\r\n                        $el.data('zoneClicked', false);\r\n                    } else {\r\n                        e.preventDefault();\r\n                    }\r\n                }\r\n            });\r\n            self._handler($el, 'change', $.proxy(self._change, self));\r\n            if (self.showBrowse) {\r\n                self._handler(self.$btnFile, 'click', $.proxy(self._browse, self));\r\n            }\r\n            self._handler($cont.find('.fileinput-remove:not([disabled])'), 'click', $.proxy(self.clear, self));\r\n            self._handler($cont.find('.fileinput-cancel'), 'click', $.proxy(self.cancel, self));\r\n            self._handler($cont.find('.fileinput-pause'), 'click', $.proxy(self.pause, self));\r\n            self._initDragDrop();\r\n            self._handler($form, 'reset', $.proxy(self.clear, self));\r\n            if (!self.isAjaxUpload) {\r\n                self._handler($form, 'submit', $.proxy(self._submitForm, self));\r\n            }\r\n            self._handler(self.$container.find('.fileinput-upload'), 'click', $.proxy(self._uploadClick, self));\r\n            self._handler($(window), 'resize', function () {\r\n                self._listenFullScreen(screen.width === window.innerWidth && screen.height === window.innerHeight);\r\n            });\r\n            fullScreenEvents = 'webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange';\r\n            self._handler($(document), fullScreenEvents, function () {\r\n                self._listenFullScreen($h.checkFullScreen());\r\n            });\r\n            self._autoFitContent();\r\n            self._initClickable();\r\n            self._refreshPreview();\r\n        },\r\n        _autoFitContent: function () {\r\n            var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\r\n                self = this, config = width < 400 ? (self.previewSettingsSmall || self.defaults.previewSettingsSmall) :\r\n                (self.previewSettings || self.defaults.previewSettings), sel;\r\n            $.each(config, function (cat, settings) {\r\n                sel = '.file-preview-frame .file-preview-' + cat;\r\n                self.$preview.find(sel + '.kv-preview-data,' + sel + ' .kv-preview-data').css(settings);\r\n            });\r\n        },\r\n        _scanDroppedItems: function (item, files, path) {\r\n            path = path || '';\r\n            var self = this, i, dirReader, readDir, errorHandler = function (e) {\r\n                self._log($h.logMessages.badDroppedFiles);\r\n                self._log(e);\r\n            };\r\n            if (item.isFile) {\r\n                item.file(function (file) {\r\n                    files.push(file);\r\n                }, errorHandler);\r\n            } else {\r\n                if (item.isDirectory) {\r\n                    dirReader = item.createReader();\r\n                    readDir = function () {\r\n                        dirReader.readEntries(function (entries) {\r\n                            if (entries && entries.length > 0) {\r\n                                for (i = 0; i < entries.length; i++) {\r\n                                    self._scanDroppedItems(entries[i], files, path + item.name + '/');\r\n                                }\r\n                                // recursively call readDir() again, since browser can only handle first 100 entries.\r\n                                readDir();\r\n                            }\r\n                            return null;\r\n                        }, errorHandler);\r\n                    };\r\n                    readDir();\r\n                }\r\n            }\r\n\r\n        },\r\n        _initDragDrop: function () {\r\n            var self = this, $zone = self.$dropZone;\r\n            if (self.dropZoneEnabled && self.showPreview) {\r\n                self._handler($zone, 'dragenter dragover', $.proxy(self._zoneDragEnter, self));\r\n                self._handler($zone, 'dragleave', $.proxy(self._zoneDragLeave, self));\r\n                self._handler($zone, 'drop', $.proxy(self._zoneDrop, self));\r\n                self._handler($(document), 'dragenter dragover drop', self._zoneDragDropInit);\r\n            }\r\n        },\r\n        _zoneDragDropInit: function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        },\r\n        _zoneDragEnter: function (e) {\r\n            var self = this, dataTransfer = e.originalEvent.dataTransfer,\r\n                hasFiles = $.inArray('Files', dataTransfer.types) > -1;\r\n            self._zoneDragDropInit(e);\r\n            if (self.isDisabled || !hasFiles) {\r\n                e.originalEvent.dataTransfer.effectAllowed = 'none';\r\n                e.originalEvent.dataTransfer.dropEffect = 'none';\r\n                return;\r\n            }\r\n            if (self._raise('fileDragEnter', {'sourceEvent': e, 'files': dataTransfer.types.Files})) {\r\n                $h.addCss(self.$dropZone, 'file-highlighted');\r\n            }\r\n        },\r\n        _zoneDragLeave: function (e) {\r\n            var self = this;\r\n            self._zoneDragDropInit(e);\r\n            if (self.isDisabled) {\r\n                return;\r\n            }\r\n            if (self._raise('fileDragLeave', {'sourceEvent': e})) {\r\n                self.$dropZone.removeClass('file-highlighted');\r\n            }\r\n\r\n        },\r\n        _zoneDrop: function (e) {\r\n            /** @namespace e.originalEvent.dataTransfer */\r\n            var self = this, i, $el = self.$element, dataTransfer = e.originalEvent.dataTransfer,\r\n                files = dataTransfer.files, items = dataTransfer.items, folders = $h.getDragDropFolders(items),\r\n                processFiles = function () {\r\n                    if (!self.isAjaxUpload) {\r\n                        self.changeTriggered = true;\r\n                        $el.get(0).files = files;\r\n                        setTimeout(function () {\r\n                            self.changeTriggered = false;\r\n                            $el.trigger('change' + self.namespace);\r\n                        }, self.processDelay);\r\n                    } else {\r\n                        self._change(e, files);\r\n                    }\r\n                    self.$dropZone.removeClass('file-highlighted');\r\n                };\r\n            e.preventDefault();\r\n            if (self.isDisabled || $h.isEmpty(files)) {\r\n                return;\r\n            }\r\n            if (!self._raise('fileDragDrop', {'sourceEvent': e, 'files': files})) {\r\n                return;\r\n            }\r\n            if (folders > 0) {\r\n                if (!self.isAjaxUpload) {\r\n                    self._showFolderError(folders);\r\n                    return;\r\n                }\r\n                files = [];\r\n                for (i = 0; i < items.length; i++) {\r\n                    var item = items[i].webkitGetAsEntry();\r\n                    if (item) {\r\n                        self._scanDroppedItems(item, files);\r\n                    }\r\n                }\r\n                setTimeout(function () {\r\n                    processFiles();\r\n                }, 500);\r\n            } else {\r\n                processFiles();\r\n            }\r\n        },\r\n        _uploadClick: function (e) {\r\n            var self = this, $btn = self.$container.find('.fileinput-upload'), $form,\r\n                isEnabled = !$btn.hasClass('disabled') && $h.isEmpty($btn.attr('disabled'));\r\n            if (e && e.isDefaultPrevented()) {\r\n                return;\r\n            }\r\n            if (!self.isAjaxUpload) {\r\n                if (isEnabled && $btn.attr('type') !== 'submit') {\r\n                    $form = $btn.closest('form');\r\n                    // downgrade to normal form submit if possible\r\n                    if ($form.length) {\r\n                        $form.trigger('submit');\r\n                    }\r\n                    e.preventDefault();\r\n                }\r\n                return;\r\n            }\r\n            e.preventDefault();\r\n            if (isEnabled) {\r\n                self.upload();\r\n            }\r\n        },\r\n        _submitForm: function () {\r\n            var self = this;\r\n            return self._isFileSelectionValid() && !self._abort({});\r\n        },\r\n        _clearPreview: function () {\r\n            var self = this,\r\n                $thumbs = self.showUploadedThumbs ? self.getFrames(':not(.file-preview-success)') : self.getFrames();\r\n            $thumbs.each(function () {\r\n                var $thumb = $(this), id = $thumb.attr('id'), $zoom = self._getZoom(id);\r\n                $thumb.remove();\r\n                $h.cleanZoomCache($zoom);\r\n            });\r\n            if (!self.getFrames().length || !self.showPreview) {\r\n                self._resetUpload();\r\n            }\r\n            self._validateDefaultPreview();\r\n        },\r\n        _initSortable: function () {\r\n            var self = this, $el = self.$preview, settings, selector = '.' + $h.SORT_CSS,\r\n                rev = self.reversePreviewOrder;\r\n            if (!window.KvSortable || $el.find(selector).length === 0) {\r\n                return;\r\n            }\r\n            //noinspection JSUnusedGlobalSymbols\r\n            settings = {\r\n                handle: '.drag-handle-init',\r\n                dataIdAttr: 'data-preview-id',\r\n                scroll: false,\r\n                draggable: selector,\r\n                onSort: function (e) {\r\n                    var oldIndex = e.oldIndex, newIndex = e.newIndex, i = 0;\r\n                    self.initialPreview = $h.moveArray(self.initialPreview, oldIndex, newIndex, rev);\r\n                    self.initialPreviewConfig = $h.moveArray(self.initialPreviewConfig, oldIndex, newIndex, rev);\r\n                    self.previewCache.init();\r\n                    self.getFrames('.file-preview-initial').each(function () {\r\n                        $(this).attr('data-fileindex', $h.INIT_FLAG + i);\r\n                        i++;\r\n                    });\r\n                    self._raise('filesorted', {\r\n                        previewId: $(e.item).attr('id'),\r\n                        'oldIndex': oldIndex,\r\n                        'newIndex': newIndex,\r\n                        stack: self.initialPreviewConfig\r\n                    });\r\n                }\r\n            };\r\n            if ($el.data('kvsortable')) {\r\n                $el.kvsortable('destroy');\r\n            }\r\n            $.extend(true, settings, self.fileActionSettings.dragSettings);\r\n            $el.kvsortable(settings);\r\n        },\r\n        _setPreviewContent: function (content) {\r\n            var self = this;\r\n            self.$preview.html(content);\r\n            self._autoFitContent();\r\n        },\r\n        _initPreviewImageOrientations: function () {\r\n            var self = this, i = 0;\r\n            if (!self.autoOrientImageInitial) {\r\n                return;\r\n            }\r\n            self.getFrames('.file-preview-initial').each(function () {\r\n                var $thumb = $(this), $img, $zoomImg, id, config = self.initialPreviewConfig[i];\r\n                /** @namespace config.exif */\r\n                if (config && config.exif && config.exif.Orientation) {\r\n                    id = $thumb.attr('id');\r\n                    $img = $thumb.find('>.kv-file-content img');\r\n                    $zoomImg = self._getZoom(id, ' >.kv-file-content img');\r\n                    self.setImageOrientation($img, $zoomImg, config.exif.Orientation, $thumb);\r\n                }\r\n                i++;\r\n            });\r\n        },\r\n        _initPreview: function (isInit) {\r\n            var self = this, cap = self.initialCaption || '', out;\r\n            if (!self.previewCache.count(true)) {\r\n                self._clearPreview();\r\n                if (isInit) {\r\n                    self._setCaption(cap);\r\n                } else {\r\n                    self._initCaption();\r\n                }\r\n                return;\r\n            }\r\n            out = self.previewCache.out();\r\n            cap = isInit && self.initialCaption ? self.initialCaption : out.caption;\r\n            self._setPreviewContent(out.content);\r\n            self._setInitThumbAttr();\r\n            self._setCaption(cap);\r\n            self._initSortable();\r\n            if (!$h.isEmpty(out.content)) {\r\n                self.$container.removeClass('file-input-new');\r\n            }\r\n            self._initPreviewImageOrientations();\r\n        },\r\n        _getZoomButton: function (type) {\r\n            var self = this, label = self.previewZoomButtonIcons[type], css = self.previewZoomButtonClasses[type],\r\n                title = ' title=\"' + (self.previewZoomButtonTitles[type] || '') + '\" ',\r\n                params = title + (type === 'close' ? ' data-dismiss=\"modal\" aria-hidden=\"true\"' : '');\r\n            if (type === 'fullscreen' || type === 'borderless' || type === 'toggleheader') {\r\n                params += ' data-toggle=\"button\" aria-pressed=\"false\" autocomplete=\"off\"';\r\n            }\r\n            return '<button type=\"button\" class=\"' + css + ' btn-' + type + '\"' + params + '>' + label + '</button>';\r\n        },\r\n        _getModalContent: function () {\r\n            var self = this;\r\n            return self._getLayoutTemplate('modal').setTokens({\r\n                'rtl': self.rtl ? ' kv-rtl' : '',\r\n                'zoomFrameClass': self.frameClass,\r\n                'heading': self.msgZoomModalHeading,\r\n                'prev': self._getZoomButton('prev'),\r\n                'next': self._getZoomButton('next'),\r\n                'toggleheader': self._getZoomButton('toggleheader'),\r\n                'fullscreen': self._getZoomButton('fullscreen'),\r\n                'borderless': self._getZoomButton('borderless'),\r\n                'close': self._getZoomButton('close')\r\n            });\r\n        },\r\n        _listenModalEvent: function (event) {\r\n            var self = this, $modal = self.$modal, getParams = function (e) {\r\n                return {\r\n                    sourceEvent: e,\r\n                    previewId: $modal.data('previewId'),\r\n                    modal: $modal\r\n                };\r\n            };\r\n            $modal.on(event + '.bs.modal', function (e) {\r\n                var $btnFull = $modal.find('.btn-fullscreen'), $btnBord = $modal.find('.btn-borderless');\r\n                self._raise('filezoom' + event, getParams(e));\r\n                if (event === 'shown') {\r\n                    $btnBord.removeClass('active').attr('aria-pressed', 'false');\r\n                    $btnFull.removeClass('active').attr('aria-pressed', 'false');\r\n                    if ($modal.hasClass('file-zoom-fullscreen')) {\r\n                        self._maximizeZoomDialog();\r\n                        if ($h.checkFullScreen()) {\r\n                            $btnFull.addClass('active').attr('aria-pressed', 'true');\r\n                        } else {\r\n                            $btnBord.addClass('active').attr('aria-pressed', 'true');\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        _initZoom: function () {\r\n            var self = this, $dialog, modalMain = self._getLayoutTemplate('modalMain'), modalId = '#' + $h.MODAL_ID;\r\n            if (!self.showPreview) {\r\n                return;\r\n            }\r\n            self.$modal = $(modalId);\r\n            if (!self.$modal || !self.$modal.length) {\r\n                $dialog = $(document.createElement('div')).html(modalMain).insertAfter(self.$container);\r\n                self.$modal = $(modalId).insertBefore($dialog);\r\n                $dialog.remove();\r\n            }\r\n            $h.initModal(self.$modal);\r\n            self.$modal.html(self._getModalContent());\r\n            $.each($h.MODAL_EVENTS, function (key, event) {\r\n                self._listenModalEvent(event);\r\n            });\r\n        },\r\n        _initZoomButtons: function () {\r\n            var self = this, previewId = self.$modal.data('previewId') || '', $first, $last,\r\n                thumbs = self.getFrames().toArray(), len = thumbs.length, $prev = self.$modal.find('.btn-prev'),\r\n                $next = self.$modal.find('.btn-next');\r\n            if (thumbs.length < 2) {\r\n                $prev.hide();\r\n                $next.hide();\r\n                return;\r\n            } else {\r\n                $prev.show();\r\n                $next.show();\r\n            }\r\n            if (!len) {\r\n                return;\r\n            }\r\n            $first = $(thumbs[0]);\r\n            $last = $(thumbs[len - 1]);\r\n            $prev.removeAttr('disabled');\r\n            $next.removeAttr('disabled');\r\n            if ($first.length && $first.attr('id') === previewId) {\r\n                $prev.attr('disabled', true);\r\n            }\r\n            if ($last.length && $last.attr('id') === previewId) {\r\n                $next.attr('disabled', true);\r\n            }\r\n        },\r\n        _maximizeZoomDialog: function () {\r\n            var self = this, $modal = self.$modal, $head = $modal.find('.modal-header:visible'),\r\n                $foot = $modal.find('.modal-footer:visible'), $body = $modal.find('.modal-body'),\r\n                h = $(window).height(), diff = 0;\r\n            $modal.addClass('file-zoom-fullscreen');\r\n            if ($head && $head.length) {\r\n                h -= $head.outerHeight(true);\r\n            }\r\n            if ($foot && $foot.length) {\r\n                h -= $foot.outerHeight(true);\r\n            }\r\n            if ($body && $body.length) {\r\n                diff = $body.outerHeight(true) - $body.height();\r\n                h -= diff;\r\n            }\r\n            $modal.find('.kv-zoom-body').height(h);\r\n        },\r\n        _resizeZoomDialog: function (fullScreen) {\r\n            var self = this, $modal = self.$modal, $btnFull = $modal.find('.btn-fullscreen'),\r\n                $btnBord = $modal.find('.btn-borderless');\r\n            if ($modal.hasClass('file-zoom-fullscreen')) {\r\n                $h.toggleFullScreen(false);\r\n                if (!fullScreen) {\r\n                    if (!$btnFull.hasClass('active')) {\r\n                        $modal.removeClass('file-zoom-fullscreen');\r\n                        self.$modal.find('.kv-zoom-body').css('height', self.zoomModalHeight);\r\n                    } else {\r\n                        $btnFull.removeClass('active').attr('aria-pressed', 'false');\r\n                    }\r\n                } else {\r\n                    if (!$btnFull.hasClass('active')) {\r\n                        $modal.removeClass('file-zoom-fullscreen');\r\n                        self._resizeZoomDialog(true);\r\n                        if ($btnBord.hasClass('active')) {\r\n                            $btnBord.removeClass('active').attr('aria-pressed', 'false');\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                if (!fullScreen) {\r\n                    self._maximizeZoomDialog();\r\n                    return;\r\n                }\r\n                $h.toggleFullScreen(true);\r\n            }\r\n            $modal.focus();\r\n        },\r\n        _setZoomContent: function ($frame, animate) {\r\n            var self = this, $content, tmplt, body, title, $body, $dataEl, config, previewId = $frame.attr('id'),\r\n                $zoomPreview = self._getZoom(previewId), $modal = self.$modal, $tmp,\r\n                $btnFull = $modal.find('.btn-fullscreen'), $btnBord = $modal.find('.btn-borderless'), cap, size,\r\n                $btnTogh = $modal.find('.btn-toggleheader');\r\n            tmplt = $zoomPreview.attr('data-template') || 'generic';\r\n            $content = $zoomPreview.find('.kv-file-content');\r\n            body = $content.length ? $content.html() : '';\r\n            cap = $frame.data('caption') || '';\r\n            size = $frame.data('size') || '';\r\n            title = cap + ' ' + size;\r\n            $modal.find('.kv-zoom-title').attr('title', $('<div/>').html(title).text()).html(title);\r\n            $body = $modal.find('.kv-zoom-body');\r\n            $modal.removeClass('kv-single-content');\r\n            if (animate) {\r\n                $tmp = $body.addClass('file-thumb-loading').clone().insertAfter($body);\r\n                $body.html(body).hide();\r\n                $tmp.fadeOut('fast', function () {\r\n                    $body.fadeIn('fast', function () {\r\n                        $body.removeClass('file-thumb-loading');\r\n                    });\r\n                    $tmp.remove();\r\n                });\r\n            } else {\r\n                $body.html(body);\r\n            }\r\n            config = self.previewZoomSettings[tmplt];\r\n            if (config) {\r\n                $dataEl = $body.find('.kv-preview-data');\r\n                $h.addCss($dataEl, 'file-zoom-detail');\r\n                $.each(config, function (key, value) {\r\n                    $dataEl.css(key, value);\r\n                    if (($dataEl.attr('width') && key === 'width') || ($dataEl.attr('height') && key === 'height')) {\r\n                        $dataEl.removeAttr(key);\r\n                    }\r\n                });\r\n            }\r\n            $modal.data('previewId', previewId);\r\n            self._handler($modal.find('.btn-prev'), 'click', function () {\r\n                self._zoomSlideShow('prev', previewId);\r\n            });\r\n            self._handler($modal.find('.btn-next'), 'click', function () {\r\n                self._zoomSlideShow('next', previewId);\r\n            });\r\n            self._handler($btnFull, 'click', function () {\r\n                self._resizeZoomDialog(true);\r\n            });\r\n            self._handler($btnBord, 'click', function () {\r\n                self._resizeZoomDialog(false);\r\n            });\r\n            self._handler($btnTogh, 'click', function () {\r\n                var $header = $modal.find('.modal-header'), $floatBar = $modal.find('.modal-body .floating-buttons'),\r\n                    ht, $actions = $header.find('.kv-zoom-actions'), resize = function (height) {\r\n                        var $body = self.$modal.find('.kv-zoom-body'), h = self.zoomModalHeight;\r\n                        if ($modal.hasClass('file-zoom-fullscreen')) {\r\n                            h = $body.outerHeight(true);\r\n                            if (!height) {\r\n                                h = h - $header.outerHeight(true);\r\n                            }\r\n                        }\r\n                        $body.css('height', height ? h + height : h);\r\n                    };\r\n                if ($header.is(':visible')) {\r\n                    ht = $header.outerHeight(true);\r\n                    $header.slideUp('slow', function () {\r\n                        $actions.find('.btn').appendTo($floatBar);\r\n                        resize(ht);\r\n                    });\r\n                } else {\r\n                    $floatBar.find('.btn').appendTo($actions);\r\n                    $header.slideDown('slow', function () {\r\n                        resize();\r\n                    });\r\n                }\r\n                $modal.focus();\r\n            });\r\n            self._handler($modal, 'keydown', function (e) {\r\n                var key = e.which || e.keyCode, $prev = $(this).find('.btn-prev'), $next = $(this).find('.btn-next'),\r\n                    vId = $(this).data('previewId'), vPrevKey = self.rtl ? 39 : 37, vNextKey = self.rtl ? 37 : 39;\r\n                if (key === vPrevKey && $prev.length && !$prev.attr('disabled')) {\r\n                    self._zoomSlideShow('prev', vId);\r\n                }\r\n                if (key === vNextKey && $next.length && !$next.attr('disabled')) {\r\n                    self._zoomSlideShow('next', vId);\r\n                }\r\n            });\r\n        },\r\n        _zoomPreview: function ($btn) {\r\n            var self = this, $frame, $modal = self.$modal;\r\n            if (!$btn.length) {\r\n                throw 'Cannot zoom to detailed preview!';\r\n            }\r\n            $h.initModal($modal);\r\n            $modal.html(self._getModalContent());\r\n            $frame = $btn.closest($h.FRAMES);\r\n            self._setZoomContent($frame);\r\n            $modal.modal('show');\r\n            self._initZoomButtons();\r\n        },\r\n        _zoomSlideShow: function (dir, previewId) {\r\n            var self = this, $btn = self.$modal.find('.kv-zoom-actions .btn-' + dir), $targFrame, i, $thumb,\r\n                thumbsData = self.getFrames().toArray(), thumbs = [], len = thumbsData.length, out;\r\n            if ($btn.attr('disabled')) {\r\n                return;\r\n            }\r\n            for (i = 0; i < len; i++) {\r\n                $thumb = $(thumbsData[i]);\r\n                if ($thumb && $thumb.length && $thumb.find('.kv-file-zoom:visible').length) {\r\n                    thumbs.push(thumbsData[i]);\r\n                }\r\n            }\r\n            len = thumbs.length;\r\n            for (i = 0; i < len; i++) {\r\n                if ($(thumbs[i]).attr('id') === previewId) {\r\n                    out = dir === 'prev' ? i - 1 : i + 1;\r\n                    break;\r\n                }\r\n            }\r\n            if (out < 0 || out >= len || !thumbs[out]) {\r\n                return;\r\n            }\r\n            $targFrame = $(thumbs[out]);\r\n            if ($targFrame.length) {\r\n                self._setZoomContent($targFrame, true);\r\n            }\r\n            self._initZoomButtons();\r\n            self._raise('filezoom' + dir, {'previewId': previewId, modal: self.$modal});\r\n        },\r\n        _initZoomButton: function () {\r\n            var self = this;\r\n            self.$preview.find('.kv-file-zoom').each(function () {\r\n                var $el = $(this);\r\n                self._handler($el, 'click', function () {\r\n                    self._zoomPreview($el);\r\n                });\r\n            });\r\n        },\r\n        _inputFileCount: function () {\r\n            return this.$element.get(0).files.length;\r\n        },\r\n        _refreshPreview: function () {\r\n            var self = this, files;\r\n            if ((!self._inputFileCount() && !self.isAjaxUpload) || !self.showPreview || !self.isPreviewable) {\r\n                return;\r\n            }\r\n            if (self.isAjaxUpload) {\r\n                if (self.fileManager.count() > 0) {\r\n                    files = $.extend(true, {}, self.fileManager.stack);\r\n                    self.fileManager.clear();\r\n                    self._clearFileInput();\r\n                } else {\r\n                    files = self.$element.get(0).files;\r\n                }\r\n            } else {\r\n                files = self.$element.get(0).files;\r\n            }\r\n            if (files && files.length) {\r\n                self.readFiles(files);\r\n                self._setFileDropZoneTitle();\r\n            }\r\n        },\r\n        _clearObjects: function ($el) {\r\n            $el.find('video audio').each(function () {\r\n                this.pause();\r\n                $(this).remove();\r\n            });\r\n            $el.find('img object div').each(function () {\r\n                $(this).remove();\r\n            });\r\n        },\r\n        _clearFileInput: function () {\r\n            var self = this, $el = self.$element, $srcFrm, $tmpFrm, $tmpEl;\r\n            if (!self._inputFileCount()) {\r\n                return;\r\n            }\r\n            $srcFrm = $el.closest('form');\r\n            $tmpFrm = $(document.createElement('form'));\r\n            $tmpEl = $(document.createElement('div'));\r\n            $el.before($tmpEl);\r\n            if ($srcFrm.length) {\r\n                $srcFrm.after($tmpFrm);\r\n            } else {\r\n                $tmpEl.after($tmpFrm);\r\n            }\r\n            $tmpFrm.append($el).trigger('reset');\r\n            $tmpEl.before($el).remove();\r\n            $tmpFrm.remove();\r\n        },\r\n        _resetUpload: function () {\r\n            var self = this;\r\n            self.uploadCache = [];\r\n            self.$btnUpload.removeAttr('disabled');\r\n            self._setProgress(0);\r\n            self._hideProgress();\r\n            self._resetErrors(false);\r\n            self._initAjax();\r\n            self.fileManager.clearImages();\r\n            self._resetCanvas();\r\n            if (self.overwriteInitial) {\r\n                self.initialPreview = [];\r\n                self.initialPreviewConfig = [];\r\n                self.initialPreviewThumbTags = [];\r\n                self.previewCache.data = {\r\n                    content: [],\r\n                    config: [],\r\n                    tags: []\r\n                };\r\n            }\r\n        },\r\n        _resetCanvas: function () {\r\n            var self = this;\r\n            if (self.canvas && self.imageCanvasContext) {\r\n                self.imageCanvasContext.clearRect(0, 0, self.canvas.width, self.canvas.height);\r\n            }\r\n        },\r\n        _hasInitialPreview: function () {\r\n            var self = this;\r\n            return !self.overwriteInitial && self.previewCache.count(true);\r\n        },\r\n        _resetPreview: function () {\r\n            var self = this, out, cap;\r\n            if (self.previewCache.count(true)) {\r\n                out = self.previewCache.out();\r\n                self._setPreviewContent(out.content);\r\n                self._setInitThumbAttr();\r\n                cap = self.initialCaption ? self.initialCaption : out.caption;\r\n                self._setCaption(cap);\r\n            } else {\r\n                self._clearPreview();\r\n                self._initCaption();\r\n            }\r\n            if (self.showPreview) {\r\n                self._initZoom();\r\n                self._initSortable();\r\n            }\r\n        },\r\n        _clearDefaultPreview: function () {\r\n            var self = this;\r\n            self.$preview.find('.file-default-preview').remove();\r\n        },\r\n        _validateDefaultPreview: function () {\r\n            var self = this;\r\n            if (!self.showPreview || $h.isEmpty(self.defaultPreviewContent)) {\r\n                return;\r\n            }\r\n            self._setPreviewContent('<div class=\"file-default-preview\">' + self.defaultPreviewContent + '</div>');\r\n            self.$container.removeClass('file-input-new');\r\n            self._initClickable();\r\n        },\r\n        _resetPreviewThumbs: function (isAjax) {\r\n            var self = this, out;\r\n            if (isAjax) {\r\n                self._clearPreview();\r\n                self.clearFileStack();\r\n                return;\r\n            }\r\n            if (self._hasInitialPreview()) {\r\n                out = self.previewCache.out();\r\n                self._setPreviewContent(out.content);\r\n                self._setInitThumbAttr();\r\n                self._setCaption(out.caption);\r\n                self._initPreviewActions();\r\n            } else {\r\n                self._clearPreview();\r\n            }\r\n        },\r\n        _getLayoutTemplate: function (t) {\r\n            var self = this, template = self.layoutTemplates[t];\r\n            if ($h.isEmpty(self.customLayoutTags)) {\r\n                return template;\r\n            }\r\n            return $h.replaceTags(template, self.customLayoutTags);\r\n        },\r\n        _getPreviewTemplate: function (t) {\r\n            var self = this, templates = self.previewTemplates, template = templates[t] || templates.other;\r\n            if ($h.isEmpty(self.customPreviewTags)) {\r\n                return template;\r\n            }\r\n            return $h.replaceTags(template, self.customPreviewTags);\r\n        },\r\n        _getOutData: function (formdata, jqXHR, responseData, filesData) {\r\n            var self = this;\r\n            jqXHR = jqXHR || {};\r\n            responseData = responseData || {};\r\n            filesData = filesData || self.fileManager.list();\r\n            return {\r\n                formdata: formdata,\r\n                files: filesData,\r\n                filenames: self.filenames,\r\n                filescount: self.getFilesCount(),\r\n                extra: self._getExtraData(),\r\n                response: responseData,\r\n                reader: self.reader,\r\n                jqXHR: jqXHR\r\n            };\r\n        },\r\n        _getMsgSelected: function (n) {\r\n            var self = this, strFiles = n === 1 ? self.fileSingle : self.filePlural;\r\n            return n > 0 ? self.msgSelected.replace('{n}', n).replace('{files}', strFiles) : self.msgNoFilesSelected;\r\n        },\r\n        _getFrame: function (id, skipWarning) {\r\n            var self = this, $frame = $h.getFrameElement(self.$preview, id);\r\n            if (self.showPreview && !skipWarning && !$frame.length) {\r\n                self._log($h.logMessages.invalidThumb, {id: id});\r\n            }\r\n            return $frame;\r\n        },\r\n        _getZoom: function (id, selector) {\r\n            var self = this, $frame = $h.getZoomElement(self.$preview, id, selector);\r\n            if (self.showPreview && !$frame.length) {\r\n                self._log($h.logMessages.invalidThumb, {id: id});\r\n            }\r\n            return $frame;\r\n        },\r\n        _getThumbs: function (css) {\r\n            css = css || '';\r\n            return this.getFrames(':not(.file-preview-initial)' + css);\r\n        },\r\n        _getThumbId: function (fileId) {\r\n            var self = this;\r\n            return self.previewInitId + '-' + fileId;\r\n        },\r\n        _getExtraData: function (fileId, index) {\r\n            var self = this, data = self.uploadExtraData;\r\n            if (typeof self.uploadExtraData === 'function') {\r\n                data = self.uploadExtraData(fileId, index);\r\n            }\r\n            return data;\r\n        },\r\n        _initXhr: function (xhrobj, fileId, fileCount) {\r\n            var self = this, fm = self.fileManager, func = function (event) {\r\n                var pct = 0, total = event.total, loaded = event.loaded || event.position,\r\n                    stats = fm.getUploadStats(fileId, loaded, total);\r\n                /** @namespace event.lengthComputable */\r\n                if (event.lengthComputable && !self.enableResumableUpload) {\r\n                    pct = $h.round(loaded / total * 100);\r\n                }\r\n                if (fileId) {\r\n                    self._setFileUploadStats(fileId, pct, fileCount, stats);\r\n                } else {\r\n                    self._setProgress(pct, null, null, self._getStats(stats));\r\n                }\r\n                self._raise('fileajaxprogress', [stats]);\r\n            };\r\n            if (xhrobj.upload) {\r\n                if (self.progressDelay) {\r\n                    func = $h.debounce(func, self.progressDelay);\r\n                }\r\n                xhrobj.upload.addEventListener('progress', func, false);\r\n            }\r\n            return xhrobj;\r\n        },\r\n        _initAjaxSettings: function () {\r\n            var self = this;\r\n            self._ajaxSettings = $.extend(true, {}, self.ajaxSettings);\r\n            self._ajaxDeleteSettings = $.extend(true, {}, self.ajaxDeleteSettings);\r\n        },\r\n        _mergeAjaxCallback: function (funcName, srcFunc, type) {\r\n            var self = this, settings = self._ajaxSettings, flag = self.mergeAjaxCallbacks, targFunc;\r\n            if (type === 'delete') {\r\n                settings = self._ajaxDeleteSettings;\r\n                flag = self.mergeAjaxDeleteCallbacks;\r\n            }\r\n            targFunc = settings[funcName];\r\n            if (flag && typeof targFunc === 'function') {\r\n                if (flag === 'before') {\r\n                    settings[funcName] = function () {\r\n                        targFunc.apply(this, arguments);\r\n                        srcFunc.apply(this, arguments);\r\n                    };\r\n                } else {\r\n                    settings[funcName] = function () {\r\n                        srcFunc.apply(this, arguments);\r\n                        targFunc.apply(this, arguments);\r\n                    };\r\n                }\r\n            } else {\r\n                settings[funcName] = srcFunc;\r\n            }\r\n        },\r\n        _ajaxSubmit: function (fnBefore, fnSuccess, fnComplete, fnError, formdata, fileId, index, vUrl) {\r\n            var self = this, settings, defaults, data, processQueue;\r\n            if (!self._raise('filepreajax', [formdata, fileId, index])) {\r\n                return;\r\n            }\r\n            formdata.append('initialPreview', JSON.stringify(self.initialPreview));\r\n            formdata.append('initialPreviewConfig', JSON.stringify(self.initialPreviewConfig));\r\n            formdata.append('initialPreviewThumbTags', JSON.stringify(self.initialPreviewThumbTags));\r\n            self._initAjaxSettings();\r\n            self._mergeAjaxCallback('beforeSend', fnBefore);\r\n            self._mergeAjaxCallback('success', fnSuccess);\r\n            self._mergeAjaxCallback('complete', fnComplete);\r\n            self._mergeAjaxCallback('error', fnError);\r\n            vUrl = vUrl || self.uploadUrlThumb || self.uploadUrl;\r\n            if (typeof vUrl === 'function') {\r\n                vUrl = vUrl();\r\n            }\r\n            data = self._getExtraData(fileId, index) || {};\r\n            if (typeof data === 'object') {\r\n                $.each(data, function (key, value) {\r\n                    formdata.append(key, value);\r\n                });\r\n            }\r\n            defaults = {\r\n                xhr: function () {\r\n                    var xhrobj = $.ajaxSettings.xhr();\r\n                    return self._initXhr(xhrobj, fileId, self.fileManager.count());\r\n                },\r\n                url: self._encodeURI(vUrl),\r\n                type: 'POST',\r\n                dataType: 'json',\r\n                data: formdata,\r\n                cache: false,\r\n                processData: false,\r\n                contentType: false\r\n            };\r\n            settings = $.extend(true, {}, defaults, self._ajaxSettings);\r\n            self.ajaxQueue.push(settings);\r\n            processQueue = function () {\r\n                var config, xhr;\r\n                if (self.ajaxCurrentThreads < self.maxAjaxThreads) {\r\n                    config = self.ajaxQueue.shift();\r\n                    if (typeof config !== 'undefined') {\r\n                        self.ajaxCurrentThreads++;\r\n                        xhr = $.ajax(config).done(function () {\r\n                            clearInterval(self.ajaxQueueIntervalId);\r\n                            self.ajaxCurrentThreads--;\r\n                        });\r\n                        self.ajaxRequests.push(xhr);\r\n                    }\r\n                }\r\n            };\r\n            self.ajaxQueueIntervalId = setInterval(processQueue, self.queueDelay);\r\n\r\n        },\r\n        _mergeArray: function (prop, content) {\r\n            var self = this, arr1 = $h.cleanArray(self[prop]), arr2 = $h.cleanArray(content);\r\n            self[prop] = arr1.concat(arr2);\r\n        },\r\n        _initUploadSuccess: function (out, $thumb, allFiles) {\r\n            var self = this, append, data, index, $div, $newCache, content, config, tags, id, i;\r\n            if (!self.showPreview || typeof out !== 'object' || $.isEmptyObject(out)) {\r\n                self._resetCaption();\r\n                return;\r\n            }\r\n            if (out.initialPreview !== undefined && out.initialPreview.length > 0) {\r\n                self.hasInitData = true;\r\n                content = out.initialPreview || [];\r\n                config = out.initialPreviewConfig || [];\r\n                tags = out.initialPreviewThumbTags || [];\r\n                append = out.append === undefined || out.append;\r\n                if (content.length > 0 && !$h.isArray(content)) {\r\n                    content = content.split(self.initialPreviewDelimiter);\r\n                }\r\n                if (content.length) {\r\n                    self._mergeArray('initialPreview', content);\r\n                    self._mergeArray('initialPreviewConfig', config);\r\n                    self._mergeArray('initialPreviewThumbTags', tags);\r\n                }\r\n                if ($thumb !== undefined) {\r\n                    if (!allFiles) {\r\n                        index = self.previewCache.add(content[0], config[0], tags[0], append);\r\n                        data = self.previewCache.get(index, false);\r\n                        $div = $(document.createElement('div')).html(data).hide().insertAfter($thumb);\r\n                        $newCache = $div.find('.kv-zoom-cache');\r\n                        if ($newCache && $newCache.length) {\r\n                            $newCache.insertAfter($thumb);\r\n                        }\r\n                        $thumb.fadeOut('slow', function () {\r\n                            var $newThumb = $div.find('.file-preview-frame');\r\n                            if ($newThumb && $newThumb.length) {\r\n                                $newThumb.insertBefore($thumb).fadeIn('slow').css('display:inline-block');\r\n                            }\r\n                            self._initPreviewActions();\r\n                            self._clearFileInput();\r\n                            $h.cleanZoomCache(self._getZoom($thumb.attr('id')));\r\n                            $thumb.remove();\r\n                            $div.remove();\r\n                            self._initSortable();\r\n                        });\r\n                    } else {\r\n                        id = $thumb.attr('id');\r\n                        i = self._getUploadCacheIndex(id);\r\n                        if (i !== null) {\r\n                            self.uploadCache[i] = {\r\n                                id: id,\r\n                                content: content[0],\r\n                                config: config[0] || [],\r\n                                tags: tags[0] || [],\r\n                                append: append\r\n                            };\r\n                        }\r\n                    }\r\n                } else {\r\n                    self.previewCache.set(content, config, tags, append);\r\n                    self._initPreview();\r\n                    self._initPreviewActions();\r\n                }\r\n            }\r\n            self._resetCaption();\r\n        },\r\n        _getUploadCacheIndex: function (id) {\r\n            var self = this, i, len = self.uploadCache.length, config;\r\n            for (i = 0; i < len; i++) {\r\n                config = self.uploadCache[i];\r\n                if (config.id === id) {\r\n                    return i;\r\n                }\r\n            }\r\n            return null;\r\n        },\r\n        _initSuccessThumbs: function () {\r\n            var self = this;\r\n            if (!self.showPreview) {\r\n                return;\r\n            }\r\n            self._getThumbs($h.FRAMES + '.file-preview-success').each(function () {\r\n                var $thumb = $(this), $remove = $thumb.find('.kv-file-remove');\r\n                $remove.removeAttr('disabled');\r\n                self._handler($remove, 'click', function () {\r\n                    var id = $thumb.attr('id'),\r\n                        out = self._raise('filesuccessremove', [id, $thumb.attr('data-fileindex')]);\r\n                    $h.cleanMemory($thumb);\r\n                    if (out === false) {\r\n                        return;\r\n                    }\r\n                    $thumb.fadeOut('slow', function () {\r\n                        $h.cleanZoomCache(self._getZoom(id));\r\n                        $thumb.remove();\r\n                        if (!self.getFrames().length) {\r\n                            self.reset();\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n        },\r\n        _updateInitialPreview: function () {\r\n            var self = this, u = self.uploadCache;\r\n            if (self.showPreview) {\r\n                $.each(u, function (key, setting) {\r\n                    self.previewCache.add(setting.content, setting.config, setting.tags, setting.append);\r\n                });\r\n                if (self.hasInitData) {\r\n                    self._initPreview();\r\n                    self._initPreviewActions();\r\n                }\r\n            }\r\n        },\r\n        _uploadSingle: function (i, id, isBatch) {\r\n            var self = this, fm = self.fileManager, count = fm.count(), formdata = new FormData(), outData,\r\n                previewId = self._getThumbId(id), $thumb, chkComplete, $btnUpload, $btnDelete,\r\n                hasPostData = count > 0 || !$.isEmptyObject(self.uploadExtraData), uploadFailed, $prog, fnBefore,\r\n                errMsg, fnSuccess, fnComplete, fnError, updateUploadLog, op = self.ajaxOperations.uploadThumb,\r\n                fileObj = fm.getFile(id), params = {id: previewId, index: i, fileId: id},\r\n                fileName = self.fileManager.getFileName(id, true);\r\n            if (self.enableResumableUpload) { // not enabled for resumable uploads\r\n                return;\r\n            }\r\n            if (self.showPreview) {\r\n                $thumb = self.fileManager.getThumb(id);\r\n                $prog = $thumb.find('.file-thumb-progress');\r\n                $btnUpload = $thumb.find('.kv-file-upload');\r\n                $btnDelete = $thumb.find('.kv-file-remove');\r\n                $prog.show();\r\n            }\r\n            if (count === 0 || !hasPostData || (self.showPreview && $btnUpload && $btnUpload.hasClass('disabled')) ||\r\n                self._abort(params)) {\r\n                return;\r\n            }\r\n            updateUploadLog = function () {\r\n                if (!uploadFailed) {\r\n                    fm.removeFile(id);\r\n                } else {\r\n                    fm.errors.push(id);\r\n                }\r\n                fm.setProcessed(id);\r\n                if (fm.isProcessed()) {\r\n                    self.fileBatchCompleted = true;\r\n                }\r\n            };\r\n            chkComplete = function () {\r\n                var $initThumbs;\r\n                if (!self.fileBatchCompleted) {\r\n                    return;\r\n                }\r\n                setTimeout(function () {\r\n                    var triggerReset = fm.count() === 0, errCount = fm.errors.length;\r\n                    self._updateInitialPreview();\r\n                    self.unlock(triggerReset);\r\n                    if (triggerReset) {\r\n                        self._clearFileInput();\r\n                    }\r\n                    $initThumbs = self.$preview.find('.file-preview-initial');\r\n                    if (self.uploadAsync && $initThumbs.length) {\r\n                        $h.addCss($initThumbs, $h.SORT_CSS);\r\n                        self._initSortable();\r\n                    }\r\n                    self._raise('filebatchuploadcomplete', [fm.stack, self._getExtraData()]);\r\n                    if (!self.retryErrorUploads || errCount === 0) {\r\n                        fm.clear();\r\n                    }\r\n                    self._setProgress(101);\r\n                    self.ajaxAborted = false;\r\n                }, self.processDelay);\r\n            };\r\n            fnBefore = function (jqXHR) {\r\n                outData = self._getOutData(formdata, jqXHR);\r\n                fm.initStats(id);\r\n                self.fileBatchCompleted = false;\r\n                if (!isBatch) {\r\n                    self.ajaxAborted = false;\r\n                }\r\n                if (self.showPreview) {\r\n                    if (!$thumb.hasClass('file-preview-success')) {\r\n                        self._setThumbStatus($thumb, 'Loading');\r\n                        $h.addCss($thumb, 'file-uploading');\r\n                    }\r\n                    $btnUpload.attr('disabled', true);\r\n                    $btnDelete.attr('disabled', true);\r\n                }\r\n                if (!isBatch) {\r\n                    self.lock();\r\n                }\r\n                if (fm.errors.indexOf(id) !== -1) {\r\n                    delete fm.errors[id];\r\n                }\r\n                self._raise('filepreupload', [outData, previewId, i]);\r\n                $.extend(true, params, outData);\r\n                if (self._abort(params)) {\r\n                    jqXHR.abort();\r\n                    if (!isBatch) {\r\n                        self._setThumbStatus($thumb, 'New');\r\n                        $thumb.removeClass('file-uploading');\r\n                        $btnUpload.removeAttr('disabled');\r\n                        $btnDelete.removeAttr('disabled');\r\n                        self.unlock();\r\n                    }\r\n                    self._setProgressCancelled();\r\n                }\r\n            };\r\n            fnSuccess = function (data, textStatus, jqXHR) {\r\n                var pid = self.showPreview && $thumb.attr('id') ? $thumb.attr('id') : previewId;\r\n                outData = self._getOutData(formdata, jqXHR, data);\r\n                $.extend(true, params, outData);\r\n                setTimeout(function () {\r\n                    if ($h.isEmpty(data) || $h.isEmpty(data.error)) {\r\n                        if (self.showPreview) {\r\n                            self._setThumbStatus($thumb, 'Success');\r\n                            $btnUpload.hide();\r\n                            self._initUploadSuccess(data, $thumb, isBatch);\r\n                            self._setProgress(101, $prog);\r\n                        }\r\n                        self._raise('fileuploaded', [outData, pid, i]);\r\n                        if (!isBatch) {\r\n                            self.fileManager.remove($thumb);\r\n                        } else {\r\n                            updateUploadLog();\r\n                        }\r\n                    } else {\r\n                        uploadFailed = true;\r\n                        errMsg = self._parseError(op, jqXHR, self.msgUploadError, self.fileManager.getFileName(id));\r\n                        self._showFileError(errMsg, params);\r\n                        self._setPreviewError($thumb, true);\r\n                        if (!self.retryErrorUploads) {\r\n                            $btnUpload.hide();\r\n                        }\r\n                        if (isBatch) {\r\n                            updateUploadLog();\r\n                        }\r\n                        self._setProgress(101, self._getFrame(pid).find('.file-thumb-progress'),\r\n                            self.msgUploadError);\r\n                    }\r\n                }, self.processDelay);\r\n            };\r\n            fnComplete = function () {\r\n                setTimeout(function () {\r\n                    if (self.showPreview) {\r\n                        $btnUpload.removeAttr('disabled');\r\n                        $btnDelete.removeAttr('disabled');\r\n                        $thumb.removeClass('file-uploading');\r\n                    }\r\n                    if (!isBatch) {\r\n                        self.unlock(false);\r\n                        self._clearFileInput();\r\n                    } else {\r\n                        chkComplete();\r\n                    }\r\n                    self._initSuccessThumbs();\r\n                }, self.processDelay);\r\n            };\r\n            fnError = function (jqXHR, textStatus, errorThrown) {\r\n                errMsg = self._parseError(op, jqXHR, errorThrown, self.fileManager.getFileName(id));\r\n                uploadFailed = true;\r\n                setTimeout(function () {\r\n                    var $prog;\r\n                    if (isBatch) {\r\n                        updateUploadLog();\r\n                    }\r\n                    self.fileManager.setProgress(id, 100);\r\n                    self._setPreviewError($thumb, true);\r\n                    if (!self.retryErrorUploads) {\r\n                        $btnUpload.hide();\r\n                    }\r\n                    $.extend(true, params, self._getOutData(formdata, jqXHR));\r\n                    self._setProgress(101, self.$progress, self.msgAjaxProgressError.replace('{operation}', op));\r\n                    $prog = self.showPreview && $thumb ? $thumb.find('.file-thumb-progress') : '';\r\n                    self._setProgress(101, $prog, self.msgUploadError);\r\n                    self._showFileError(errMsg, params);\r\n                }, self.processDelay);\r\n            };\r\n            formdata.append(self.uploadFileAttr, fileObj.file, fileName);\r\n            self._setUploadData(formdata, {fileId: id});\r\n            self._ajaxSubmit(fnBefore, fnSuccess, fnComplete, fnError, formdata, id, i);\r\n        },\r\n        _uploadBatch: function () {\r\n            var self = this, fm = self.fileManager, total = fm.total(), params = {}, fnBefore, fnSuccess, fnError,\r\n                fnComplete, hasPostData = total > 0 || !$.isEmptyObject(self.uploadExtraData), errMsg,\r\n                setAllUploaded, formdata = new FormData(), op = self.ajaxOperations.uploadBatch;\r\n            if (total === 0 || !hasPostData || self._abort(params)) {\r\n                return;\r\n            }\r\n            setAllUploaded = function () {\r\n                self.fileManager.clear();\r\n                self._clearFileInput();\r\n            };\r\n            fnBefore = function (jqXHR) {\r\n                self.lock();\r\n                fm.initStats();\r\n                var outData = self._getOutData(formdata, jqXHR);\r\n                self.ajaxAborted = false;\r\n                if (self.showPreview) {\r\n                    self._getThumbs().each(function () {\r\n                        var $thumb = $(this), $btnUpload = $thumb.find('.kv-file-upload'),\r\n                            $btnDelete = $thumb.find('.kv-file-remove');\r\n                        if (!$thumb.hasClass('file-preview-success')) {\r\n                            self._setThumbStatus($thumb, 'Loading');\r\n                            $h.addCss($thumb, 'file-uploading');\r\n                        }\r\n                        $btnUpload.attr('disabled', true);\r\n                        $btnDelete.attr('disabled', true);\r\n                    });\r\n                }\r\n                self._raise('filebatchpreupload', [outData]);\r\n                if (self._abort(outData)) {\r\n                    jqXHR.abort();\r\n                    self._getThumbs().each(function () {\r\n                        var $thumb = $(this), $btnUpload = $thumb.find('.kv-file-upload'),\r\n                            $btnDelete = $thumb.find('.kv-file-remove');\r\n                        if ($thumb.hasClass('file-preview-loading')) {\r\n                            self._setThumbStatus($thumb, 'New');\r\n                            $thumb.removeClass('file-uploading');\r\n                        }\r\n                        $btnUpload.removeAttr('disabled');\r\n                        $btnDelete.removeAttr('disabled');\r\n                    });\r\n                    self._setProgressCancelled();\r\n                }\r\n            };\r\n            fnSuccess = function (data, textStatus, jqXHR) {\r\n                /** @namespace data.errorkeys */\r\n                var outData = self._getOutData(formdata, jqXHR, data), key = 0,\r\n                    $thumbs = self._getThumbs(':not(.file-preview-success)'),\r\n                    keys = $h.isEmpty(data) || $h.isEmpty(data.errorkeys) ? [] : data.errorkeys;\r\n\r\n                if ($h.isEmpty(data) || $h.isEmpty(data.error)) {\r\n                    self._raise('filebatchuploadsuccess', [outData]);\r\n                    setAllUploaded();\r\n                    if (self.showPreview) {\r\n                        $thumbs.each(function () {\r\n                            var $thumb = $(this);\r\n                            self._setThumbStatus($thumb, 'Success');\r\n                            $thumb.removeClass('file-uploading');\r\n                            $thumb.find('.kv-file-upload').hide().removeAttr('disabled');\r\n                        });\r\n                        self._initUploadSuccess(data);\r\n                    } else {\r\n                        self.reset();\r\n                    }\r\n                    self._setProgress(101);\r\n                } else {\r\n                    if (self.showPreview) {\r\n                        $thumbs.each(function () {\r\n                            var $thumb = $(this);\r\n                            $thumb.removeClass('file-uploading');\r\n                            $thumb.find('.kv-file-upload').removeAttr('disabled');\r\n                            $thumb.find('.kv-file-remove').removeAttr('disabled');\r\n                            if (keys.length === 0 || $.inArray(key, keys) !== -1) {\r\n                                self._setPreviewError($thumb, true);\r\n                                if (!self.retryErrorUploads) {\r\n                                    $thumb.find('.kv-file-upload').hide();\r\n                                    self.fileManager.remove($thumb);\r\n                                }\r\n                            } else {\r\n                                $thumb.find('.kv-file-upload').hide();\r\n                                self._setThumbStatus($thumb, 'Success');\r\n                                self.fileManager.remove($thumb);\r\n                            }\r\n                            if (!$thumb.hasClass('file-preview-error') || self.retryErrorUploads) {\r\n                                key++;\r\n                            }\r\n                        });\r\n                        self._initUploadSuccess(data);\r\n                    }\r\n                    errMsg = self._parseError(op, jqXHR, self.msgUploadError);\r\n                    self._showFileError(errMsg, outData, 'filebatchuploaderror');\r\n                    self._setProgress(101, self.$progress, self.msgUploadError);\r\n                }\r\n            };\r\n            fnComplete = function () {\r\n                self.unlock();\r\n                self._initSuccessThumbs();\r\n                self._clearFileInput();\r\n                self._raise('filebatchuploadcomplete', [self.fileManager.stack, self._getExtraData()]);\r\n            };\r\n            fnError = function (jqXHR, textStatus, errorThrown) {\r\n                var outData = self._getOutData(formdata, jqXHR);\r\n                errMsg = self._parseError(op, jqXHR, errorThrown);\r\n                self._showFileError(errMsg, outData, 'filebatchuploaderror');\r\n                self.uploadFileCount = total - 1;\r\n                if (!self.showPreview) {\r\n                    return;\r\n                }\r\n                self._getThumbs().each(function () {\r\n                    var $thumb = $(this);\r\n                    $thumb.removeClass('file-uploading');\r\n                    if (self.fileManager.getFile($thumb.attr('data-fileid'))) {\r\n                        self._setPreviewError($thumb);\r\n                    }\r\n                });\r\n                self._getThumbs().removeClass('file-uploading');\r\n                self._getThumbs(' .kv-file-upload').removeAttr('disabled');\r\n                self._getThumbs(' .kv-file-delete').removeAttr('disabled');\r\n                self._setProgress(101, self.$progress, self.msgAjaxProgressError.replace('{operation}', op));\r\n            };\r\n            var ctr = 0;\r\n            $.each(self.fileManager.stack, function (key, data) {\r\n                if (!$h.isEmpty(data.file)) {\r\n                    formdata.append(self.uploadFileAttr, data.file, (data.nameFmt || ('untitled_' + ctr)));\r\n                }\r\n                ctr++;\r\n            });\r\n            self._ajaxSubmit(fnBefore, fnSuccess, fnComplete, fnError, formdata);\r\n        },\r\n        _uploadExtraOnly: function () {\r\n            var self = this, params = {}, fnBefore, fnSuccess, fnComplete, fnError, formdata = new FormData(), errMsg,\r\n                op = self.ajaxOperations.uploadExtra;\r\n            if (self._abort(params)) {\r\n                return;\r\n            }\r\n            fnBefore = function (jqXHR) {\r\n                self.lock();\r\n                var outData = self._getOutData(formdata, jqXHR);\r\n                self._raise('filebatchpreupload', [outData]);\r\n                self._setProgress(50);\r\n                params.data = outData;\r\n                params.xhr = jqXHR;\r\n                if (self._abort(params)) {\r\n                    jqXHR.abort();\r\n                    self._setProgressCancelled();\r\n                }\r\n            };\r\n            fnSuccess = function (data, textStatus, jqXHR) {\r\n                var outData = self._getOutData(formdata, jqXHR, data);\r\n                if ($h.isEmpty(data) || $h.isEmpty(data.error)) {\r\n                    self._raise('filebatchuploadsuccess', [outData]);\r\n                    self._clearFileInput();\r\n                    self._initUploadSuccess(data);\r\n                    self._setProgress(101);\r\n                } else {\r\n                    errMsg = self._parseError(op, jqXHR, self.msgUploadError);\r\n                    self._showFileError(errMsg, outData, 'filebatchuploaderror');\r\n                }\r\n            };\r\n            fnComplete = function () {\r\n                self.unlock();\r\n                self._clearFileInput();\r\n                self._raise('filebatchuploadcomplete', [self.fileManager.stack, self._getExtraData()]);\r\n            };\r\n            fnError = function (jqXHR, textStatus, errorThrown) {\r\n                var outData = self._getOutData(formdata, jqXHR);\r\n                errMsg = self._parseError(op, jqXHR, errorThrown);\r\n                params.data = outData;\r\n                self._showFileError(errMsg, outData, 'filebatchuploaderror');\r\n                self._setProgress(101, self.$progress, self.msgAjaxProgressError.replace('{operation}', op));\r\n            };\r\n            self._ajaxSubmit(fnBefore, fnSuccess, fnComplete, fnError, formdata);\r\n        },\r\n        _deleteFileIndex: function ($frame) {\r\n            var self = this, ind = $frame.attr('data-fileindex'), rev = self.reversePreviewOrder;\r\n            if (ind.substring(0, 5) === $h.INIT_FLAG) {\r\n                ind = parseInt(ind.replace($h.INIT_FLAG, ''));\r\n                self.initialPreview = $h.spliceArray(self.initialPreview, ind, rev);\r\n                self.initialPreviewConfig = $h.spliceArray(self.initialPreviewConfig, ind, rev);\r\n                self.initialPreviewThumbTags = $h.spliceArray(self.initialPreviewThumbTags, ind, rev);\r\n                self.getFrames().each(function () {\r\n                    var $nFrame = $(this), nInd = $nFrame.attr('data-fileindex');\r\n                    if (nInd.substring(0, 5) === $h.INIT_FLAG) {\r\n                        nInd = parseInt(nInd.replace($h.INIT_FLAG, ''));\r\n                        if (nInd > ind) {\r\n                            nInd--;\r\n                            $nFrame.attr('data-fileindex', $h.INIT_FLAG + nInd);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        _resetCaption: function () {\r\n            var self = this;\r\n            setTimeout(function () {\r\n                var cap, n, chk = self.previewCache.count(true), len = self.fileManager.count(), file,\r\n                    incomplete = ':not(.file-preview-success):not(.file-preview-error)',\r\n                    hasThumb = self.showPreview && self.getFrames(incomplete).length;\r\n                if (len === 0 && chk === 0 && !hasThumb) {\r\n                    self.reset();\r\n                } else {\r\n                    n = chk + len;\r\n                    if (n > 1) {\r\n                        cap = self._getMsgSelected(n);\r\n                    } else {\r\n                        file = self.fileManager.getFirstFile();\r\n                        cap = file ? file.nameFmt : '_';\r\n                    }\r\n                    self._setCaption(cap);\r\n                }\r\n            }, self.processDelay);\r\n        },\r\n        _initFileActions: function () {\r\n            var self = this;\r\n            if (!self.showPreview) {\r\n                return;\r\n            }\r\n            self._initZoomButton();\r\n            self.getFrames(' .kv-file-remove').each(function () {\r\n                var $el = $(this), $frame = $el.closest($h.FRAMES), hasError, id = $frame.attr('id'),\r\n                    ind = $frame.attr('data-fileindex'), status;\r\n                self._handler($el, 'click', function () {\r\n                    status = self._raise('filepreremove', [id, ind]);\r\n                    if (status === false || !self._validateMinCount()) {\r\n                        return false;\r\n                    }\r\n                    hasError = $frame.hasClass('file-preview-error');\r\n                    $h.cleanMemory($frame);\r\n                    $frame.fadeOut('slow', function () {\r\n                        $h.cleanZoomCache(self._getZoom(id));\r\n                        self.fileManager.remove($frame);\r\n                        self._clearObjects($frame);\r\n                        $frame.remove();\r\n                        if (id && hasError) {\r\n                            self.$errorContainer.find('li[data-thumb-id=\"' + id + '\"]').fadeOut('fast', function () {\r\n                                $(this).remove();\r\n                                if (!self._errorsExist()) {\r\n                                    self._resetErrors();\r\n                                }\r\n                            });\r\n                        }\r\n                        self._clearFileInput();\r\n                        self._resetCaption();\r\n                        self._raise('fileremoved', [id, ind]);\r\n                    });\r\n                });\r\n            });\r\n            self.getFrames(' .kv-file-upload').each(function () {\r\n                var $el = $(this);\r\n                self._handler($el, 'click', function () {\r\n                    var $frame = $el.closest($h.FRAMES), fileId = $frame.attr('data-fileid');\r\n                    self._hideProgress();\r\n                    if ($frame.hasClass('file-preview-error') && !self.retryErrorUploads) {\r\n                        return;\r\n                    }\r\n                    self._uploadSingle(self.fileManager.getIndex(fileId), fileId, false);\r\n                });\r\n            });\r\n        },\r\n        _initPreviewActions: function () {\r\n            var self = this, $preview = self.$preview, deleteExtraData = self.deleteExtraData || {},\r\n                btnRemove = $h.FRAMES + ' .kv-file-remove', settings = self.fileActionSettings,\r\n                origClass = settings.removeClass, errClass = settings.removeErrorClass,\r\n                resetProgress = function () {\r\n                    var hasFiles = self.isAjaxUpload ? self.previewCache.count(true) : self._inputFileCount();\r\n                    if (!self.getFrames().length && !hasFiles) {\r\n                        self._setCaption('');\r\n                        self.reset();\r\n                        self.initialCaption = '';\r\n                    }\r\n                };\r\n            self._initZoomButton();\r\n            $preview.find(btnRemove).each(function () {\r\n                var $el = $(this), vUrl = $el.data('url') || self.deleteUrl, vKey = $el.data('key'), errMsg, fnBefore,\r\n                    fnSuccess, fnError, op = self.ajaxOperations.deleteThumb;\r\n                if ($h.isEmpty(vUrl) || vKey === undefined) {\r\n                    return;\r\n                }\r\n                if (typeof vUrl === 'function') {\r\n                    vUrl = vUrl();\r\n                }\r\n                var $frame = $el.closest($h.FRAMES), cache = self.previewCache.data, settings, params, config,\r\n                    fileName, extraData, index = $frame.attr('data-fileindex');\r\n                index = parseInt(index.replace($h.INIT_FLAG, ''));\r\n                config = $h.isEmpty(cache.config) && $h.isEmpty(cache.config[index]) ? null : cache.config[index];\r\n                extraData = $h.isEmpty(config) || $h.isEmpty(config.extra) ? deleteExtraData : config.extra;\r\n                fileName = config.filename || config.caption || '';\r\n                if (typeof extraData === 'function') {\r\n                    extraData = extraData();\r\n                }\r\n                params = {id: $el.attr('id'), key: vKey, extra: extraData};\r\n                fnBefore = function (jqXHR) {\r\n                    self.ajaxAborted = false;\r\n                    self._raise('filepredelete', [vKey, jqXHR, extraData]);\r\n                    if (self._abort()) {\r\n                        jqXHR.abort();\r\n                    } else {\r\n                        $el.removeClass(errClass);\r\n                        $h.addCss($frame, 'file-uploading');\r\n                        $h.addCss($el, 'disabled ' + origClass);\r\n                    }\r\n                };\r\n                fnSuccess = function (data, textStatus, jqXHR) {\r\n                    var n, cap;\r\n                    if (!$h.isEmpty(data) && !$h.isEmpty(data.error)) {\r\n                        params.jqXHR = jqXHR;\r\n                        params.response = data;\r\n                        errMsg = self._parseError(op, jqXHR, self.msgDeleteError, fileName);\r\n                        self._showFileError(errMsg, params, 'filedeleteerror');\r\n                        $frame.removeClass('file-uploading');\r\n                        $el.removeClass('disabled ' + origClass).addClass(errClass);\r\n                        resetProgress();\r\n                        return;\r\n                    }\r\n                    $frame.removeClass('file-uploading').addClass('file-deleted');\r\n                    $frame.fadeOut('slow', function () {\r\n                        index = parseInt(($frame.attr('data-fileindex')).replace($h.INIT_FLAG, ''));\r\n                        self.previewCache.unset(index);\r\n                        self._deleteFileIndex($frame);\r\n                        n = self.previewCache.count(true);\r\n                        cap = n > 0 ? self._getMsgSelected(n) : '';\r\n                        self._setCaption(cap);\r\n                        self._raise('filedeleted', [vKey, jqXHR, extraData]);\r\n                        $h.cleanZoomCache(self._getZoom($frame.attr('id')));\r\n                        self._clearObjects($frame);\r\n                        $frame.remove();\r\n                        resetProgress();\r\n                    });\r\n                };\r\n                fnError = function (jqXHR, textStatus, errorThrown) {\r\n                    var errMsg = self._parseError(op, jqXHR, errorThrown, fileName);\r\n                    params.jqXHR = jqXHR;\r\n                    params.response = {};\r\n                    self._showFileError(errMsg, params, 'filedeleteerror');\r\n                    $frame.removeClass('file-uploading');\r\n                    $el.removeClass('disabled ' + origClass).addClass(errClass);\r\n                    resetProgress();\r\n                };\r\n                self._initAjaxSettings();\r\n                self._mergeAjaxCallback('beforeSend', fnBefore, 'delete');\r\n                self._mergeAjaxCallback('success', fnSuccess, 'delete');\r\n                self._mergeAjaxCallback('error', fnError, 'delete');\r\n                settings = $.extend(true, {}, {\r\n                    url: self._encodeURI(vUrl),\r\n                    type: 'POST',\r\n                    dataType: 'json',\r\n                    data: $.extend(true, {}, {key: vKey}, extraData)\r\n                }, self._ajaxDeleteSettings);\r\n                self._handler($el, 'click', function () {\r\n                    if (!self._validateMinCount()) {\r\n                        return false;\r\n                    }\r\n                    self.ajaxAborted = false;\r\n                    self._raise('filebeforedelete', [vKey, extraData]);\r\n                    //noinspection JSUnresolvedVariable,JSHint\r\n                    if (self.ajaxAborted instanceof Promise) {\r\n                        self.ajaxAborted.then(function (result) {\r\n                            if (!result) {\r\n                                $.ajax(settings);\r\n                            }\r\n                        });\r\n                    } else {\r\n                        if (!self.ajaxAborted) {\r\n                            $.ajax(settings);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        _hideFileIcon: function () {\r\n            var self = this;\r\n            if (self.overwriteInitial) {\r\n                self.$captionContainer.removeClass('icon-visible');\r\n            }\r\n        },\r\n        _showFileIcon: function () {\r\n            var self = this;\r\n            $h.addCss(self.$captionContainer, 'icon-visible');\r\n        },\r\n        _getSize: function (bytes, sizes) {\r\n            var self = this, size = parseFloat(bytes), i, func = self.fileSizeGetter, out;\r\n            if (!$.isNumeric(bytes) || !$.isNumeric(size)) {\r\n                return '';\r\n            }\r\n            if (typeof func === 'function') {\r\n                out = func(size);\r\n            } else {\r\n                if (size === 0) {\r\n                    out = '0.00 B';\r\n                } else {\r\n                    i = Math.floor(Math.log(size) / Math.log(1024));\r\n                    if (!sizes) {\r\n                        sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n                    }\r\n                    out = (size / Math.pow(1024, i)).toFixed(2) * 1 + ' ' + sizes[i];\r\n                }\r\n            }\r\n            return self._getLayoutTemplate('size').replace('{sizeText}', out);\r\n        },\r\n        _getFileType: function (ftype) {\r\n            var self = this;\r\n            return self.mimeTypeAliases[ftype] || ftype;\r\n        },\r\n        _generatePreviewTemplate: function (\r\n            cat,\r\n            data,\r\n            fname,\r\n            ftype,\r\n            previewId,\r\n            fileId,\r\n            isError,\r\n            size,\r\n            frameClass,\r\n            foot,\r\n            ind,\r\n            templ,\r\n            attrs,\r\n            zoomData\r\n        ) {\r\n            var self = this, caption = self.slug(fname), prevContent, zoomContent = '', styleAttribs = '',\r\n                screenW = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\r\n                config, title = caption, alt = caption, typeCss = 'type-default', getContent,\r\n                footer = foot || self._renderFileFooter(cat, caption, size, 'auto', isError),\r\n                forcePrevIcon = self.preferIconicPreview, forceZoomIcon = self.preferIconicZoomPreview,\r\n                newCat = forcePrevIcon ? 'other' : cat;\r\n            config = screenW < 400 ? (self.previewSettingsSmall[newCat] || self.defaults.previewSettingsSmall[newCat]) :\r\n                (self.previewSettings[newCat] || self.defaults.previewSettings[newCat]);\r\n            if (config) {\r\n                $.each(config, function (key, val) {\r\n                    styleAttribs += key + ':' + val + ';';\r\n                });\r\n            }\r\n            getContent = function (c, d, zoom, frameCss) {\r\n                var id = zoom ? 'zoom-' + previewId : previewId, tmplt = self._getPreviewTemplate(c),\r\n                    css = (frameClass || '') + ' ' + frameCss;\r\n                if (self.frameClass) {\r\n                    css = self.frameClass + ' ' + css;\r\n                }\r\n                if (zoom) {\r\n                    css = css.replace(' ' + $h.SORT_CSS, '');\r\n                }\r\n                tmplt = self._parseFilePreviewIcon(tmplt, fname);\r\n                if (c === 'text') {\r\n                    d = $h.htmlEncode(d);\r\n                }\r\n                if (cat === 'object' && !ftype) {\r\n                    $.each(self.defaults.fileTypeSettings, function (key, func) {\r\n                        if (key === 'object' || key === 'other') {\r\n                            return;\r\n                        }\r\n                        if (func(fname, ftype)) {\r\n                            typeCss = 'type-' + key;\r\n                        }\r\n                    });\r\n                }\r\n                if (!$h.isEmpty(attrs)) {\r\n                    if (attrs.title !== undefined && attrs.title !== null) {\r\n                        title = attrs.title;\r\n                    }\r\n                    if (attrs.alt !== undefined && attrs.alt !== null) {\r\n                        title = attrs.alt;\r\n                    }\r\n                }\r\n                return tmplt.setTokens({\r\n                    'previewId': id,\r\n                    'caption': caption,\r\n                    'title': title,\r\n                    'alt': alt,\r\n                    'frameClass': css,\r\n                    'type': self._getFileType(ftype),\r\n                    'fileindex': ind,\r\n                    'fileid': fileId || '',\r\n                    'typeCss': typeCss,\r\n                    'footer': footer,\r\n                    'data': d,\r\n                    'template': templ || cat,\r\n                    'style': styleAttribs ? 'style=\"' + styleAttribs + '\"' : ''\r\n                });\r\n            };\r\n            ind = ind || previewId.slice(previewId.lastIndexOf('-') + 1);\r\n            if (self.fileActionSettings.showZoom) {\r\n                zoomContent = getContent((forceZoomIcon ? 'other' : cat), zoomData ? zoomData : data, true,\r\n                    'kv-zoom-thumb');\r\n            }\r\n            zoomContent = '\\n' + self._getLayoutTemplate('zoomCache').replace('{zoomContent}', zoomContent);\r\n            if (typeof self.sanitizeZoomCache === 'function') {\r\n                zoomContent = self.sanitizeZoomCache(zoomContent);\r\n            }\r\n            prevContent = getContent((forcePrevIcon ? 'other' : cat), data, false, 'kv-preview-thumb');\r\n            return prevContent + zoomContent;\r\n        },\r\n        _addToPreview: function ($preview, content) {\r\n            var self = this;\r\n            return self.reversePreviewOrder ? $preview.prepend(content) : $preview.append(content);\r\n        },\r\n        _previewDefault: function (file, isDisabled) {\r\n            var self = this, $preview = self.$preview;\r\n            if (!self.showPreview) {\r\n                return;\r\n            }\r\n            var fname = $h.getFileName(file), ftype = file ? file.type : '', content, size = file.size || 0,\r\n                caption = self._getFileName(file, ''), isError = isDisabled === true && !self.isAjaxUpload,\r\n                data = $h.createObjectURL(file), fileId = self.fileManager.getId(file),\r\n                previewId = self._getThumbId(fileId);\r\n            self._clearDefaultPreview();\r\n            content = self._generatePreviewTemplate('other', data, fname, ftype, previewId, fileId, isError, size);\r\n            self._addToPreview($preview, content);\r\n            self._setThumbAttr(previewId, caption, size);\r\n            if (isDisabled === true && self.isAjaxUpload) {\r\n                self._setThumbStatus(self._getFrame(previewId), 'Error');\r\n            }\r\n        },\r\n        _previewFile: function (i, file, theFile, data, fileInfo) {\r\n            if (!this.showPreview) {\r\n                return;\r\n            }\r\n            var self = this, fname = $h.getFileName(file), ftype = fileInfo.type, caption = fileInfo.name,\r\n                cat = self._parseFileType(ftype, fname), content, $preview = self.$preview, fsize = file.size || 0,\r\n                iData = (cat === 'text' || cat === 'html' || cat === 'image') ? theFile.target.result : data,\r\n                fileId = self.fileManager.getId(file), previewId = self._getThumbId(fileId);\r\n            /** @namespace window.DOMPurify */\r\n            if (cat === 'html' && self.purifyHtml && window.DOMPurify) {\r\n                iData = window.DOMPurify.sanitize(iData);\r\n            }\r\n            content = self._generatePreviewTemplate(cat, iData, fname, ftype, previewId, fileId, false, fsize);\r\n            self._clearDefaultPreview();\r\n            self._addToPreview($preview, content);\r\n            var $thumb = self._getFrame(previewId);\r\n            self._validateImageOrientation($thumb.find('img'), file, previewId, fileId, caption, ftype, fsize, iData);\r\n            self._setThumbAttr(previewId, caption, fsize);\r\n            self._initSortable();\r\n        },\r\n        _setThumbAttr: function (id, caption, size) {\r\n            var self = this, $frame = self._getFrame(id);\r\n            if ($frame.length) {\r\n                size = size && size > 0 ? self._getSize(size) : '';\r\n                $frame.data({'caption': caption, 'size': size});\r\n            }\r\n        },\r\n        _setInitThumbAttr: function () {\r\n            var self = this, data = self.previewCache.data, len = self.previewCache.count(true), config,\r\n                caption, size, previewId;\r\n            if (len === 0) {\r\n                return;\r\n            }\r\n            for (var i = 0; i < len; i++) {\r\n                config = data.config[i];\r\n                previewId = self.previewInitId + '-' + $h.INIT_FLAG + i;\r\n                caption = $h.ifSet('caption', config, $h.ifSet('filename', config));\r\n                size = $h.ifSet('size', config);\r\n                self._setThumbAttr(previewId, caption, size);\r\n            }\r\n        },\r\n        _slugDefault: function (text) {\r\n            // noinspection RegExpRedundantEscape\r\n            return $h.isEmpty(text, true) ? '' : String(text).replace(/[\\[\\]\\/\\{}:;#%=\\(\\)\\*\\+\\?\\\\\\^\\$\\|<>&\"']/g, '_');\r\n        },\r\n        _updateFileDetails: function (numFiles, skipRaiseEvent) {\r\n            var self = this, $el = self.$element, label, n, log, nFiles, file,\r\n                name = ($h.isIE(9) && $h.findFileName($el.val())) || ($el[0].files[0] && $el[0].files[0].name);\r\n            if (!name && self.fileManager.count() > 0) {\r\n                file = self.fileManager.getFirstFile();\r\n                label = file.nameFmt;\r\n            } else {\r\n                label = name ? self.slug(name) : '_';\r\n            }\r\n            n = self.isAjaxUpload ? self.fileManager.count() : numFiles;\r\n            nFiles = self.previewCache.count(true) + n;\r\n            log = n === 1 ? label : self._getMsgSelected(nFiles);\r\n            if (self.isError) {\r\n                self.$previewContainer.removeClass('file-thumb-loading');\r\n                self.$previewStatus.html('');\r\n                self.$captionContainer.removeClass('icon-visible');\r\n            } else {\r\n                self._showFileIcon();\r\n            }\r\n            self._setCaption(log, self.isError);\r\n            self.$container.removeClass('file-input-new file-input-ajax-new');\r\n            if (!skipRaiseEvent) {\r\n                self._raise('fileselect', [numFiles, label]);\r\n            }\r\n            if (self.previewCache.count(true)) {\r\n                self._initPreviewActions();\r\n            }\r\n        },\r\n        _setThumbStatus: function ($thumb, status) {\r\n            var self = this;\r\n            if (!self.showPreview) {\r\n                return;\r\n            }\r\n            var icon = 'indicator' + status, msg = icon + 'Title',\r\n                css = 'file-preview-' + status.toLowerCase(),\r\n                $indicator = $thumb.find('.file-upload-indicator'),\r\n                config = self.fileActionSettings;\r\n            $thumb.removeClass('file-preview-success file-preview-error file-preview-paused file-preview-loading');\r\n            if (status === 'Success') {\r\n                $thumb.find('.file-drag-handle').remove();\r\n            }\r\n            $indicator.html(config[icon]);\r\n            $indicator.attr('title', config[msg]);\r\n            $thumb.addClass(css);\r\n            if (status === 'Error' && !self.retryErrorUploads) {\r\n                $thumb.find('.kv-file-upload').attr('disabled', true);\r\n            }\r\n        },\r\n        _setProgressCancelled: function () {\r\n            var self = this;\r\n            self._setProgress(101, self.$progress, self.msgCancelled);\r\n        },\r\n        _setProgress: function (p, $el, error, stats) {\r\n            var self = this;\r\n            $el = $el || self.$progress;\r\n            if (!$el.length) {\r\n                return;\r\n            }\r\n            var pct = Math.min(p, 100), out, pctLimit = self.progressUploadThreshold,\r\n                t = p <= 100 ? self.progressTemplate : self.progressCompleteTemplate,\r\n                template = pct < 100 ? self.progressTemplate :\r\n                    (error ? (self.paused ? self.progressPauseTemplate : self.progressErrorTemplate) : t);\r\n            if (p >= 100) {\r\n                stats = '';\r\n            }\r\n            if (!$h.isEmpty(template)) {\r\n                if (pctLimit && pct > pctLimit && p <= 100) {\r\n                    out = template.setTokens({'percent': pctLimit, 'status': self.msgUploadThreshold});\r\n                } else {\r\n                    out = template.setTokens({'percent': pct, 'status': (p > 100 ? self.msgUploadEnd : pct + '%')});\r\n                }\r\n                stats = stats || '';\r\n                out = out.setTokens({stats: stats});\r\n                $el.html(out);\r\n                if (error) {\r\n                    $el.find('[role=\"progressbar\"]').html(error);\r\n                }\r\n            }\r\n        },\r\n        _setFileDropZoneTitle: function () {\r\n            var self = this, $zone = self.$container.find('.file-drop-zone'), title = self.dropZoneTitle, strFiles;\r\n            if (self.isClickable) {\r\n                strFiles = $h.isEmpty(self.$element.attr('multiple')) ? self.fileSingle : self.filePlural;\r\n                title += self.dropZoneClickTitle.replace('{files}', strFiles);\r\n            }\r\n            $zone.find('.' + self.dropZoneTitleClass).remove();\r\n            if (!self.showPreview || $zone.length === 0 || self.fileManager.count() > 0 || !self.dropZoneEnabled ||\r\n                (!self.isAjaxUpload && self.$element.files)) {\r\n                return;\r\n            }\r\n            if ($zone.find($h.FRAMES).length === 0 && $h.isEmpty(self.defaultPreviewContent)) {\r\n                $zone.prepend('<div class=\"' + self.dropZoneTitleClass + '\">' + title + '</div>');\r\n            }\r\n            self.$container.removeClass('file-input-new');\r\n            $h.addCss(self.$container, 'file-input-ajax-new');\r\n        },\r\n        _getStats: function (stats) {\r\n            var self = this, pendingTime, t;\r\n            if (!self.showUploadStats || !stats || !stats.bitrate) {\r\n                return '';\r\n            }\r\n            t = self._getLayoutTemplate('stats');\r\n            pendingTime = (!stats.elapsed || !stats.bps) ? self.msgCalculatingTime :\r\n                self.msgPendingTime.setTokens({time: $h.getElapsed(Math.ceil(stats.pendingBytes / stats.bps))});\r\n\r\n            return t.setTokens({\r\n                uploadSpeed: stats.bitrate,\r\n                pendingTime: pendingTime\r\n            });\r\n        },\r\n        _setResumableProgress: function (pct, stats, $thumb) {\r\n            var self = this, rm = self.resumableManager, obj = $thumb ? rm : self,\r\n                $prog = $thumb ? $thumb.find('.file-thumb-progress') : null;\r\n            if (obj.lastProgress === 0) {\r\n                obj.lastProgress = pct;\r\n            }\r\n            if (pct < obj.lastProgress) {\r\n                pct = obj.lastProgress;\r\n            }\r\n            self._setProgress(pct, $prog, null, self._getStats(stats));\r\n            obj.lastProgress = pct;\r\n        },\r\n        _toggleResumableProgress: function (template, message) {\r\n            var self = this, $progress = self.$progress;\r\n            if ($progress && $progress.length) {\r\n                $progress.html(template.setTokens({\r\n                    percent: 101,\r\n                    status: message,\r\n                    stats: ''\r\n                }));\r\n            }\r\n        },\r\n        _setFileUploadStats: function (id, pct, total, stats) {\r\n            var self = this, $prog = self.$progress;\r\n            if (!self.showPreview && (!$prog || !$prog.length)) {\r\n                return;\r\n            }\r\n            var fm = self.fileManager, $thumb = fm.getThumb(id), pctTot, rm = self.resumableManager,\r\n                totUpSize = 0, totSize = fm.getTotalSize(), totStats = $.extend(true, {}, stats);\r\n            if (self.enableResumableUpload) {\r\n                var loaded = stats.loaded, currUplSize = rm.getUploadedSize(), currTotSize = rm.file.size, totLoaded;\r\n                loaded += currUplSize;\r\n                totLoaded = fm.uploadedSize + loaded;\r\n                pct = $h.round(100 * loaded / currTotSize);\r\n                stats.pendingBytes = currTotSize - currUplSize;\r\n                self._setResumableProgress(pct, stats, $thumb);\r\n                pctTot = Math.floor(100 * totLoaded / totSize);\r\n                totStats.pendingBytes = totSize - totLoaded;\r\n                self._setResumableProgress(pctTot, totStats);\r\n            } else {\r\n                fm.setProgress(id, pct);\r\n                $prog = $thumb && $thumb.length ? $thumb.find('.file-thumb-progress') : null;\r\n                self._setProgress(pct, $prog, null, self._getStats(stats));\r\n                $.each(fm.stats, function (id, cfg) {\r\n                    totUpSize += cfg.loaded;\r\n                });\r\n                totStats.pendingBytes = totSize - totUpSize;\r\n                pctTot = $h.round(totUpSize / totSize * 100);\r\n                self._setProgress(pctTot, null, null, self._getStats(totStats));\r\n            }\r\n        },\r\n        _validateMinCount: function () {\r\n            var self = this, len = self.isAjaxUpload ? self.fileManager.count() : self._inputFileCount();\r\n            if (self.validateInitialCount && self.minFileCount > 0 && self._getFileCount(len - 1) < self.minFileCount) {\r\n                self._noFilesError({});\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n        _getFileCount: function (fileCount, includeInitial) {\r\n            var self = this, addCount = 0;\r\n            if (includeInitial === undefined) {\r\n                includeInitial = self.validateInitialCount && !self.overwriteInitial;\r\n            }\r\n            if (includeInitial) {\r\n                addCount = self.previewCache.count(true);\r\n                fileCount += addCount;\r\n            }\r\n            return fileCount;\r\n        },\r\n        _getFileId: function (file) {\r\n            return $h.getFileId(file, this.generateFileId);\r\n        },\r\n        _getFileName: function (file, defaultValue) {\r\n            var self = this, fileName = $h.getFileName(file);\r\n            return fileName ? self.slug(fileName) : defaultValue;\r\n        },\r\n        _getFileNames: function (skipNull) {\r\n            var self = this;\r\n            return self.filenames.filter(function (n) {\r\n                return (skipNull ? n !== undefined : n !== undefined && n !== null);\r\n            });\r\n        },\r\n        _setPreviewError: function ($thumb, keepFile) {\r\n            var self = this, removeFrame = self.removeFromPreviewOnError && !self.retryErrorUploads;\r\n            if (!keepFile || removeFrame) {\r\n                self.fileManager.remove($thumb);\r\n            }\r\n            if (!self.showPreview) {\r\n                return;\r\n            }\r\n            if (removeFrame) {\r\n                $thumb.remove();\r\n                return;\r\n            } else {\r\n                self._setThumbStatus($thumb, 'Error');\r\n            }\r\n            self._refreshUploadButton($thumb);\r\n        },\r\n        _refreshUploadButton: function ($thumb) {\r\n            var self = this, $btn = $thumb.find('.kv-file-upload'), cfg = self.fileActionSettings,\r\n                icon = cfg.uploadIcon, title = cfg.uploadTitle;\r\n            if (!$btn.length) {\r\n                return;\r\n            }\r\n            if (self.retryErrorUploads) {\r\n                icon = cfg.uploadRetryIcon;\r\n                title = cfg.uploadRetryTitle;\r\n            }\r\n            $btn.attr('title', title).html(icon);\r\n        },\r\n        _checkDimensions: function (i, chk, $img, $thumb, fname, type, params) {\r\n            var self = this, msg, dim, tag = chk === 'Small' ? 'min' : 'max', limit = self[tag + 'Image' + type],\r\n                $imgEl, isValid;\r\n            if ($h.isEmpty(limit) || !$img.length) {\r\n                return;\r\n            }\r\n            $imgEl = $img[0];\r\n            dim = (type === 'Width') ? $imgEl.naturalWidth || $imgEl.width : $imgEl.naturalHeight || $imgEl.height;\r\n            isValid = chk === 'Small' ? dim >= limit : dim <= limit;\r\n            if (isValid) {\r\n                return;\r\n            }\r\n            msg = self['msgImage' + type + chk].setTokens({'name': fname, 'size': limit});\r\n            self._showFileError(msg, params);\r\n            self._setPreviewError($thumb);\r\n        },\r\n        _getExifObj: function (data) {\r\n            var self = this, exifObj = null, error = $h.logMessages.exifWarning;\r\n            if (data.slice(0, 23) !== 'data:image/jpeg;base64,' && data.slice(0, 22) !== 'data:image/jpg;base64,') {\r\n                exifObj = null;\r\n                return;\r\n            }\r\n            try {\r\n                exifObj = window.piexif ? window.piexif.load(data) : null;\r\n            } catch (err) {\r\n                exifObj = null;\r\n                error = err && err.message || '';\r\n            }\r\n            if (!exifObj) {\r\n                self._log($h.logMessages.badExifParser, {details: error});\r\n            }\r\n            return exifObj;\r\n        },\r\n        setImageOrientation: function ($img, $zoomImg, value, $thumb) {\r\n            var self = this, invalidImg = !$img || !$img.length, invalidZoomImg = !$zoomImg || !$zoomImg.length, $mark,\r\n                isHidden = false, $div, zoomOnly = invalidImg && $thumb && $thumb.attr('data-template') === 'image', ev;\r\n            if (invalidImg && invalidZoomImg) {\r\n                return;\r\n            }\r\n            ev = 'load.fileinputimageorient';\r\n            if (zoomOnly) {\r\n                $img = $zoomImg;\r\n                $zoomImg = null;\r\n                $img.css(self.previewSettings.image);\r\n                $div = $(document.createElement('div')).appendTo($thumb.find('.kv-file-content'));\r\n                $mark = $(document.createElement('span')).insertBefore($img);\r\n                $img.css('visibility', 'hidden').removeClass('file-zoom-detail').appendTo($div);\r\n            } else {\r\n                isHidden = !$img.is(':visible');\r\n            }\r\n            $img.off(ev).on(ev, function () {\r\n                if (isHidden) {\r\n                    self.$preview.removeClass('hide-content');\r\n                    $thumb.find('.kv-file-content').css('visibility', 'hidden');\r\n                }\r\n                var img = $img.get(0), zoomImg = $zoomImg && $zoomImg.length ? $zoomImg.get(0) : null,\r\n                    h = img.offsetHeight, w = img.offsetWidth, r = $h.getRotation(value);\r\n                if (isHidden) {\r\n                    $thumb.find('.kv-file-content').css('visibility', 'visible');\r\n                    self.$preview.addClass('hide-content');\r\n                }\r\n                $img.data('orientation', value);\r\n                if (zoomImg) {\r\n                    $zoomImg.data('orientation', value);\r\n                }\r\n                if (value < 5) {\r\n                    $h.setTransform(img, r);\r\n                    $h.setTransform(zoomImg, r);\r\n                    return;\r\n                }\r\n                var offsetAngle = Math.atan(w / h), origFactor = Math.sqrt(Math.pow(h, 2) + Math.pow(w, 2)),\r\n                    scale = !origFactor ? 1 : (h / Math.cos(Math.PI / 2 + offsetAngle)) / origFactor,\r\n                    s = ' scale(' + Math.abs(scale) + ')';\r\n                $h.setTransform(img, r + s);\r\n                $h.setTransform(zoomImg, r + s);\r\n                if (zoomOnly) {\r\n                    $img.css('visibility', 'visible').insertAfter($mark).addClass('file-zoom-detail');\r\n                    $mark.remove();\r\n                    $div.remove();\r\n                }\r\n            });\r\n        },\r\n        _validateImageOrientation: function ($img, file, previewId, fileId, caption, ftype, fsize, iData) {\r\n            var self = this, exifObj, value, autoOrientImage = self.autoOrientImage,\r\n                selector = $h.getZoomSelector(previewId, ' img');\r\n            exifObj = autoOrientImage ? self._getExifObj(iData) : null;\r\n            value = exifObj ? exifObj['0th'][piexif.ImageIFD.Orientation] : null; // jshint ignore:line\r\n            if (!value) {\r\n                self._validateImage(previewId, fileId, caption, ftype, fsize, iData, exifObj);\r\n                return;\r\n            }\r\n            self.setImageOrientation($img, $(selector), value, self._getFrame(previewId));\r\n            self._raise('fileimageoriented', {'$img': $img, 'file': file});\r\n            self._validateImage(previewId, fileId, caption, ftype, fsize, iData, exifObj);\r\n        },\r\n        _validateImage: function (previewId, fileId, fname, ftype, fsize, iData, exifObj) {\r\n            var self = this, $preview = self.$preview, params, w1, w2, $thumb = self._getFrame(previewId),\r\n                i = $thumb.attr('data-fileindex'), $img = $thumb.find('img');\r\n            fname = fname || 'Untitled';\r\n            $img.one('load', function () {\r\n                w1 = $thumb.width();\r\n                w2 = $preview.width();\r\n                if (w1 > w2) {\r\n                    $img.css('width', '100%');\r\n                }\r\n                params = {ind: i, id: previewId, fileId: fileId};\r\n                self._checkDimensions(i, 'Small', $img, $thumb, fname, 'Width', params);\r\n                self._checkDimensions(i, 'Small', $img, $thumb, fname, 'Height', params);\r\n                if (!self.resizeImage) {\r\n                    self._checkDimensions(i, 'Large', $img, $thumb, fname, 'Width', params);\r\n                    self._checkDimensions(i, 'Large', $img, $thumb, fname, 'Height', params);\r\n                }\r\n                self._raise('fileimageloaded', [previewId]);\r\n                self.fileManager.addImage(fileId, {\r\n                    ind: i,\r\n                    img: $img,\r\n                    thumb: $thumb,\r\n                    pid: previewId,\r\n                    typ: ftype,\r\n                    siz: fsize,\r\n                    validated: false,\r\n                    imgData: iData,\r\n                    exifObj: exifObj\r\n                });\r\n                $thumb.data('exif', exifObj);\r\n                self._validateAllImages();\r\n            }).one('error', function () {\r\n                self._raise('fileimageloaderror', [previewId]);\r\n            }).each(function () {\r\n                if (this.complete) {\r\n                    $(this).trigger('load');\r\n                } else {\r\n                    if (this.error) {\r\n                        $(this).trigger('error');\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        _validateAllImages: function () {\r\n            var self = this, counter = {val: 0}, numImgs = self.fileManager.getImageCount(), fsize,\r\n                minSize = self.resizeIfSizeMoreThan;\r\n            if (numImgs !== self.fileManager.totalImages) {\r\n                return;\r\n            }\r\n            self._raise('fileimagesloaded');\r\n            if (!self.resizeImage) {\r\n                return;\r\n            }\r\n            $.each(self.fileManager.loadedImages, function (id, config) {\r\n                if (!config.validated) {\r\n                    fsize = config.siz;\r\n                    if (fsize && fsize > minSize * 1000) {\r\n                        self._getResizedImage(id, config, counter, numImgs);\r\n                    }\r\n                    config.validated = true;\r\n                }\r\n            });\r\n        },\r\n        _getResizedImage: function (id, config, counter, numImgs) {\r\n            var self = this, img = $(config.img)[0], width = img.naturalWidth, height = img.naturalHeight, blob,\r\n                ratio = 1, maxWidth = self.maxImageWidth || width, maxHeight = self.maxImageHeight || height,\r\n                isValidImage = !!(width && height), chkWidth, chkHeight, canvas = self.imageCanvas, dataURI,\r\n                context = self.imageCanvasContext, type = config.typ, pid = config.pid, ind = config.ind,\r\n                $thumb = config.thumb, throwError, msg, exifObj = config.exifObj, exifStr, file, params, evParams;\r\n            throwError = function (msg, params, ev) {\r\n                if (self.isAjaxUpload) {\r\n                    self._showFileError(msg, params, ev);\r\n                } else {\r\n                    self._showError(msg, params, ev);\r\n                }\r\n                self._setPreviewError($thumb);\r\n            };\r\n            file = self.fileManager.getFile(id);\r\n            params = {id: pid, 'index': ind, fileId: id};\r\n            evParams = [id, pid, ind];\r\n            if (!file || !isValidImage || (width <= maxWidth && height <= maxHeight)) {\r\n                if (isValidImage && file) {\r\n                    self._raise('fileimageresized', evParams);\r\n                }\r\n                counter.val++;\r\n                if (counter.val === numImgs) {\r\n                    self._raise('fileimagesresized');\r\n                }\r\n                if (!isValidImage) {\r\n                    throwError(self.msgImageResizeError, params, 'fileimageresizeerror');\r\n                    return;\r\n                }\r\n            }\r\n            type = type || self.resizeDefaultImageType;\r\n            chkWidth = width > maxWidth;\r\n            chkHeight = height > maxHeight;\r\n            if (self.resizePreference === 'width') {\r\n                ratio = chkWidth ? maxWidth / width : (chkHeight ? maxHeight / height : 1);\r\n            } else {\r\n                ratio = chkHeight ? maxHeight / height : (chkWidth ? maxWidth / width : 1);\r\n            }\r\n            self._resetCanvas();\r\n            width *= ratio;\r\n            height *= ratio;\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            try {\r\n                context.drawImage(img, 0, 0, width, height);\r\n                dataURI = canvas.toDataURL(type, self.resizeQuality);\r\n                if (exifObj) {\r\n                    exifStr = window.piexif.dump(exifObj);\r\n                    dataURI = window.piexif.insert(exifStr, dataURI);\r\n                }\r\n                blob = $h.dataURI2Blob(dataURI);\r\n                self.fileManager.setFile(id, blob);\r\n                self._raise('fileimageresized', evParams);\r\n                counter.val++;\r\n                if (counter.val === numImgs) {\r\n                    self._raise('fileimagesresized', [undefined, undefined]);\r\n                }\r\n                if (!(blob instanceof Blob)) {\r\n                    throwError(self.msgImageResizeError, params, 'fileimageresizeerror');\r\n                }\r\n            } catch (err) {\r\n                counter.val++;\r\n                if (counter.val === numImgs) {\r\n                    self._raise('fileimagesresized', [undefined, undefined]);\r\n                }\r\n                msg = self.msgImageResizeException.replace('{errors}', err.message);\r\n                throwError(msg, params, 'fileimageresizeexception');\r\n            }\r\n        },\r\n        _showProgress: function () {\r\n            var self = this;\r\n            if (self.$progress && self.$progress.length) {\r\n                self.$progress.show();\r\n            }\r\n        },\r\n        _hideProgress: function () {\r\n            var self = this;\r\n            if (self.$progress && self.$progress.length) {\r\n                self.$progress.hide();\r\n            }\r\n        },\r\n        _initBrowse: function ($container) {\r\n            var self = this, $el = self.$element;\r\n            if (self.showBrowse) {\r\n                self.$btnFile = $container.find('.btn-file').append($el);\r\n            } else {\r\n                $el.appendTo($container).attr('tabindex', -1);\r\n                $h.addCss($el, 'file-no-browse');\r\n            }\r\n        },\r\n        _initClickable: function () {\r\n            var self = this, $zone, $tmpZone;\r\n            if (!self.isClickable) {\r\n                return;\r\n            }\r\n            $zone = self.$dropZone;\r\n            if (!self.isAjaxUpload) {\r\n                $tmpZone = self.$preview.find('.file-default-preview');\r\n                if ($tmpZone.length) {\r\n                    $zone = $tmpZone;\r\n                }\r\n            }\r\n\r\n            $h.addCss($zone, 'clickable');\r\n            $zone.attr('tabindex', -1);\r\n            self._handler($zone, 'click', function (e) {\r\n                var $tar = $(e.target);\r\n                if (!$(self.elErrorContainer + ':visible').length &&\r\n                    (!$tar.parents('.file-preview-thumbnails').length || $tar.parents(\r\n                        '.file-default-preview').length)) {\r\n                    self.$element.data('zoneClicked', true).trigger('click');\r\n                    $zone.blur();\r\n                }\r\n            });\r\n        },\r\n        _initCaption: function () {\r\n            var self = this, cap = self.initialCaption || '';\r\n            if (self.overwriteInitial || $h.isEmpty(cap)) {\r\n                self.$caption.val('');\r\n                return false;\r\n            }\r\n            self._setCaption(cap);\r\n            return true;\r\n        },\r\n        _setCaption: function (content, isError) {\r\n            var self = this, title, out, icon, n, cap, file;\r\n            if (!self.$caption.length) {\r\n                return;\r\n            }\r\n            self.$captionContainer.removeClass('icon-visible');\r\n            if (isError) {\r\n                title = $('<div>' + self.msgValidationError + '</div>').text();\r\n                n = self.fileManager.count();\r\n                if (n) {\r\n                    file = self.fileManager.getFirstFile();\r\n                    cap = n === 1 && file ? file.nameFmt : self._getMsgSelected(n);\r\n                } else {\r\n                    cap = self._getMsgSelected(self.msgNo);\r\n                }\r\n                out = $h.isEmpty(content) ? cap : content;\r\n                icon = '<span class=\"' + self.msgValidationErrorClass + '\">' + self.msgValidationErrorIcon + '</span>';\r\n            } else {\r\n                if ($h.isEmpty(content)) {\r\n                    return;\r\n                }\r\n                title = $('<div>' + content + '</div>').text();\r\n                out = title;\r\n                icon = self._getLayoutTemplate('fileIcon');\r\n            }\r\n            self.$captionContainer.addClass('icon-visible');\r\n            self.$caption.attr('title', title).val(out);\r\n            self.$captionIcon.html(icon);\r\n        },\r\n        _createContainer: function () {\r\n            var self = this, attribs = {'class': 'file-input file-input-new' + (self.rtl ? ' kv-rtl' : '')},\r\n                $container = $(document.createElement('div')).attr(attribs).html(self._renderMain());\r\n            $container.insertBefore(self.$element);\r\n            self._initBrowse($container);\r\n            if (self.theme) {\r\n                $container.addClass('theme-' + self.theme);\r\n            }\r\n            return $container;\r\n        },\r\n        _refreshContainer: function () {\r\n            var self = this, $container = self.$container, $el = self.$element;\r\n            $el.insertAfter($container);\r\n            $container.html(self._renderMain());\r\n            self._initBrowse($container);\r\n            self._validateDisabled();\r\n        },\r\n        _validateDisabled: function () {\r\n            var self = this;\r\n            self.$caption.attr({readonly: self.isDisabled});\r\n        },\r\n        _renderMain: function () {\r\n            var self = this,\r\n                dropCss = self.dropZoneEnabled ? ' file-drop-zone' : 'file-drop-disabled',\r\n                close = !self.showClose ? '' : self._getLayoutTemplate('close'),\r\n                preview = !self.showPreview ? '' : self._getLayoutTemplate('preview')\r\n                    .setTokens({'class': self.previewClass, 'dropClass': dropCss}),\r\n                css = self.isDisabled ? self.captionClass + ' file-caption-disabled' : self.captionClass,\r\n                caption = self.captionTemplate.setTokens({'class': css + ' kv-fileinput-caption'});\r\n            return self.mainTemplate.setTokens({\r\n                'class': self.mainClass + (!self.showBrowse && self.showCaption ? ' no-browse' : ''),\r\n                'preview': preview,\r\n                'close': close,\r\n                'caption': caption,\r\n                'upload': self._renderButton('upload'),\r\n                'remove': self._renderButton('remove'),\r\n                'cancel': self._renderButton('cancel'),\r\n                'pause': self._renderButton('pause'),\r\n                'browse': self._renderButton('browse')\r\n            });\r\n\r\n        },\r\n        _renderButton: function (type) {\r\n            var self = this, tmplt = self._getLayoutTemplate('btnDefault'), css = self[type + 'Class'],\r\n                title = self[type + 'Title'], icon = self[type + 'Icon'], label = self[type + 'Label'],\r\n                status = self.isDisabled ? ' disabled' : '', btnType = 'button';\r\n            switch (type) {\r\n                case 'remove':\r\n                    if (!self.showRemove) {\r\n                        return '';\r\n                    }\r\n                    break;\r\n                case 'cancel':\r\n                    if (!self.showCancel) {\r\n                        return '';\r\n                    }\r\n                    css += ' kv-hidden';\r\n                    break;\r\n                case 'pause':\r\n                    if (!self.showPause) {\r\n                        return '';\r\n                    }\r\n                    css += ' kv-hidden';\r\n                    break;\r\n                case 'upload':\r\n                    if (!self.showUpload) {\r\n                        return '';\r\n                    }\r\n                    if (self.isAjaxUpload && !self.isDisabled) {\r\n                        tmplt = self._getLayoutTemplate('btnLink').replace('{href}', self.uploadUrl);\r\n                    } else {\r\n                        btnType = 'submit';\r\n                    }\r\n                    break;\r\n                case 'browse':\r\n                    if (!self.showBrowse) {\r\n                        return '';\r\n                    }\r\n                    tmplt = self._getLayoutTemplate('btnBrowse');\r\n                    break;\r\n                default:\r\n                    return '';\r\n            }\r\n\r\n            css += type === 'browse' ? ' btn-file' : ' fileinput-' + type + ' fileinput-' + type + '-button';\r\n            if (!$h.isEmpty(label)) {\r\n                label = ' <span class=\"' + self.buttonLabelClass + '\">' + label + '</span>';\r\n            }\r\n            return tmplt.setTokens({\r\n                'type': btnType, 'css': css, 'title': title, 'status': status, 'icon': icon, 'label': label\r\n            });\r\n        },\r\n        _renderThumbProgress: function () {\r\n            var self = this;\r\n            return '<div class=\"file-thumb-progress kv-hidden\">' +\r\n                self.progressInfoTemplate.setTokens({percent: 101, status: self.msgUploadBegin, stats: ''}) +\r\n                '</div>';\r\n        },\r\n        _renderFileFooter: function (cat, caption, size, width, isError) {\r\n            var self = this, config = self.fileActionSettings, rem = config.showRemove, drg = config.showDrag,\r\n                upl = config.showUpload, zoom = config.showZoom, out, params,\r\n                template = self._getLayoutTemplate('footer'), tInd = self._getLayoutTemplate('indicator'),\r\n                ind = isError ? config.indicatorError : config.indicatorNew,\r\n                title = isError ? config.indicatorErrorTitle : config.indicatorNewTitle,\r\n                indicator = tInd.setTokens({'indicator': ind, 'indicatorTitle': title});\r\n            size = self._getSize(size);\r\n            params = {type: cat, caption: caption, size: size, width: width, progress: '', indicator: indicator};\r\n            if (self.isAjaxUpload) {\r\n                params.progress = self._renderThumbProgress();\r\n                params.actions = self._renderFileActions(params, upl, false, rem, zoom, drg, false, false, false);\r\n            } else {\r\n                params.actions = self._renderFileActions(params, false, false, false, zoom, drg, false, false, false);\r\n            }\r\n            out = template.setTokens(params);\r\n            out = $h.replaceTags(out, self.previewThumbTags);\r\n            return out;\r\n        },\r\n        _renderFileActions: function (\r\n            cfg,\r\n            showUpl,\r\n            showDwn,\r\n            showDel,\r\n            showZoom,\r\n            showDrag,\r\n            disabled,\r\n            url,\r\n            key,\r\n            isInit,\r\n            dUrl,\r\n            dFile\r\n        ) {\r\n            var self = this;\r\n            if (!cfg.type && isInit) {\r\n                cfg.type = 'image';\r\n            }\r\n            if (self.enableResumableUpload) {\r\n                showUpl = false;\r\n            } else {\r\n                if (typeof showUpl === 'function') {\r\n                    showUpl = showUpl(cfg);\r\n                }\r\n            }\r\n            if (typeof showDwn === 'function') {\r\n                showDwn = showDwn(cfg);\r\n            }\r\n            if (typeof showDel === 'function') {\r\n                showDel = showDel(cfg);\r\n            }\r\n            if (typeof showZoom === 'function') {\r\n                showZoom = showZoom(cfg);\r\n            }\r\n            if (typeof showDrag === 'function') {\r\n                showDrag = showDrag(cfg);\r\n            }\r\n            if (!showUpl && !showDwn && !showDel && !showZoom && !showDrag) {\r\n                return '';\r\n            }\r\n            var vUrl = url === false ? '' : ' data-url=\"' + url + '\"', btnZoom = '', btnDrag = '', css,\r\n                vKey = key === false ? '' : ' data-key=\"' + key + '\"', btnDelete = '', btnUpload = '', btnDownload = '',\r\n                template = self._getLayoutTemplate('actions'), config = self.fileActionSettings,\r\n                otherButtons = self.otherActionButtons.setTokens({'dataKey': vKey, 'key': key}),\r\n                removeClass = disabled ? config.removeClass + ' disabled' : config.removeClass;\r\n            if (showDel) {\r\n                btnDelete = self._getLayoutTemplate('actionDelete').setTokens({\r\n                    'removeClass': removeClass,\r\n                    'removeIcon': config.removeIcon,\r\n                    'removeTitle': config.removeTitle,\r\n                    'dataUrl': vUrl,\r\n                    'dataKey': vKey,\r\n                    'key': key\r\n                });\r\n            }\r\n            if (showUpl) {\r\n                btnUpload = self._getLayoutTemplate('actionUpload').setTokens({\r\n                    'uploadClass': config.uploadClass,\r\n                    'uploadIcon': config.uploadIcon,\r\n                    'uploadTitle': config.uploadTitle\r\n                });\r\n            }\r\n            if (showDwn) {\r\n                btnDownload = self._getLayoutTemplate('actionDownload').setTokens({\r\n                    'downloadClass': config.downloadClass,\r\n                    'downloadIcon': config.downloadIcon,\r\n                    'downloadTitle': config.downloadTitle,\r\n                    'downloadUrl': dUrl || self.initialPreviewDownloadUrl\r\n                });\r\n                btnDownload = btnDownload.setTokens({'filename': dFile, 'key': key});\r\n            }\r\n            if (showZoom) {\r\n                btnZoom = self._getLayoutTemplate('actionZoom').setTokens({\r\n                    'zoomClass': config.zoomClass,\r\n                    'zoomIcon': config.zoomIcon,\r\n                    'zoomTitle': config.zoomTitle\r\n                });\r\n            }\r\n            if (showDrag && isInit) {\r\n                css = 'drag-handle-init ' + config.dragClass;\r\n                btnDrag = self._getLayoutTemplate('actionDrag').setTokens({\r\n                    'dragClass': css,\r\n                    'dragTitle': config.dragTitle,\r\n                    'dragIcon': config.dragIcon\r\n                });\r\n            }\r\n            return template.setTokens({\r\n                'delete': btnDelete,\r\n                'upload': btnUpload,\r\n                'download': btnDownload,\r\n                'zoom': btnZoom,\r\n                'drag': btnDrag,\r\n                'other': otherButtons\r\n            });\r\n        },\r\n        _browse: function (e) {\r\n            var self = this;\r\n            if (e && e.isDefaultPrevented() || !self._raise('filebrowse')) {\r\n                return;\r\n            }\r\n            if (self.isError && !self.isAjaxUpload) {\r\n                self.clear();\r\n            }\r\n            if (self.focusCaptionOnBrowse) {\r\n                self.$captionContainer.focus();\r\n            }\r\n        },\r\n        _change: function (e) {\r\n            var self = this;\r\n            if (self.changeTriggered) {\r\n                return;\r\n            }\r\n            var $el = self.$element, isDragDrop = arguments.length > 1, isAjaxUpload = self.isAjaxUpload,\r\n                tfiles, files = isDragDrop ? arguments[1] : $el.get(0).files, ctr = self.fileManager.count(),\r\n                total, initCount, len, isSingleUpl = $h.isEmpty($el.attr('multiple')),\r\n                maxCount = !isAjaxUpload && isSingleUpl ? 1 : self.maxFileCount, maxTotCount = self.maxTotalFileCount,\r\n                inclAll = maxTotCount > 0 && maxTotCount > maxCount, flagSingle = (isSingleUpl && ctr > 0),\r\n                throwError = function (mesg, file, previewId, index) {\r\n                    var p1 = $.extend(true, {}, self._getOutData(null, {}, {}, files), {id: previewId, index: index}),\r\n                        p2 = {id: previewId, index: index, file: file, files: files};\r\n                    return isAjaxUpload ? self._showFileError(mesg, p1) : self._showError(mesg, p2);\r\n                },\r\n                maxCountCheck = function (n, m, all) {\r\n                    var msg = all ? self.msgTotalFilesTooMany : self.msgFilesTooMany;\r\n                    msg = msg.replace('{m}', m).replace('{n}', n);\r\n                    self.isError = throwError(msg, null, null, null);\r\n                    self.$captionContainer.removeClass('icon-visible');\r\n                    self._setCaption('', true);\r\n                    self.$container.removeClass('file-input-new file-input-ajax-new');\r\n                };\r\n            self.reader = null;\r\n            self._resetUpload();\r\n            self._hideFileIcon();\r\n            if (self.dropZoneEnabled) {\r\n                self.$container.find('.file-drop-zone .' + self.dropZoneTitleClass).remove();\r\n            }\r\n            if (!isAjaxUpload) {\r\n                if (e.target && e.target.files === undefined) {\r\n                    files = e.target.value ? [{name: e.target.value.replace(/^.+\\\\/, '')}] : [];\r\n                } else {\r\n                    files = e.target.files || {};\r\n                }\r\n            }\r\n            tfiles = files;\r\n            if ($h.isEmpty(tfiles) || tfiles.length === 0) {\r\n                if (!isAjaxUpload) {\r\n                    self.clear();\r\n                }\r\n                self._raise('fileselectnone');\r\n                return;\r\n            }\r\n            self._resetErrors();\r\n            len = tfiles.length;\r\n            initCount = isAjaxUpload ? (self.fileManager.count() + len) : len;\r\n            total = self._getFileCount(initCount, inclAll ? false : undefined);\r\n            if (maxCount > 0 && total > maxCount) {\r\n                if (!self.autoReplace || len > maxCount) {\r\n                    maxCountCheck((self.autoReplace && len > maxCount ? len : total), maxCount);\r\n                    return;\r\n                }\r\n                if (total > maxCount) {\r\n                    self._resetPreviewThumbs(isAjaxUpload);\r\n                }\r\n            } else {\r\n                if (inclAll) {\r\n                    total = self._getFileCount(initCount, true);\r\n                    if (maxTotCount > 0 && total > maxTotCount) {\r\n                        if (!self.autoReplace || len > maxCount) {\r\n                            maxCountCheck((self.autoReplace && len > maxTotCount ? len : total), maxTotCount, true);\r\n                            return;\r\n                        }\r\n                        if (total > maxCount) {\r\n                            self._resetPreviewThumbs(isAjaxUpload);\r\n                        }\r\n                    }\r\n                }\r\n                if (!isAjaxUpload || flagSingle) {\r\n                    self._resetPreviewThumbs(false);\r\n                    if (flagSingle) {\r\n                        self.clearFileStack();\r\n                    }\r\n                } else {\r\n                    if (isAjaxUpload && ctr === 0 && (!self.previewCache.count(true) || self.overwriteInitial)) {\r\n                        self._resetPreviewThumbs(true);\r\n                    }\r\n                }\r\n            }\r\n            self.readFiles(tfiles);\r\n        },\r\n        _abort: function (params) {\r\n            var self = this, data;\r\n            if (self.ajaxAborted && typeof self.ajaxAborted === 'object' && self.ajaxAborted.message !== undefined) {\r\n                data = $.extend(true, {}, self._getOutData(null), params);\r\n                data.abortData = self.ajaxAborted.data || {};\r\n                data.abortMessage = self.ajaxAborted.message;\r\n                self._setProgress(101, self.$progress, self.msgCancelled);\r\n                self._showFileError(self.ajaxAborted.message, data, 'filecustomerror');\r\n                self.cancel();\r\n                return true;\r\n            }\r\n            return !!self.ajaxAborted;\r\n        },\r\n        _resetFileStack: function () {\r\n            var self = this, i = 0;\r\n            self._getThumbs().each(function () {\r\n                var $thumb = $(this), ind = $thumb.attr('data-fileindex'), pid = $thumb.attr('id');\r\n                if (ind === '-1' || ind === -1) {\r\n                    return;\r\n                }\r\n                if (!self.fileManager.getFile($thumb.attr('data-fileid'))) {\r\n                    $thumb.attr({'data-fileindex': i});\r\n                    i++;\r\n                } else {\r\n                    $thumb.attr({'data-fileindex': '-1'});\r\n                }\r\n                self._getZoom(pid).attr({\r\n                    'data-fileindex': $thumb.attr('data-fileindex')\r\n                });\r\n            });\r\n        },\r\n        _isFileSelectionValid: function (cnt) {\r\n            var self = this;\r\n            cnt = cnt || 0;\r\n            if (self.required && !self.getFilesCount()) {\r\n                self.$errorContainer.html('');\r\n                self._showFileError(self.msgFileRequired);\r\n                return false;\r\n            }\r\n            if (self.minFileCount > 0 && self._getFileCount(cnt) < self.minFileCount) {\r\n                self._noFilesError({});\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n        _canPreview: function (file) {\r\n            var self = this;\r\n            if (!file || !self.showPreview || !self.$preview || !self.$preview.length) {\r\n                return false;\r\n            }\r\n            var name = file.name || '', type = file.type || '', size = (file.size || 0) / 1000,\r\n                cat = self._parseFileType(type, name), allowedTypes, allowedMimes, allowedExts, skipPreview,\r\n                types = self.allowedPreviewTypes, mimes = self.allowedPreviewMimeTypes,\r\n                exts = self.allowedPreviewExtensions || [], dTypes = self.disabledPreviewTypes,\r\n                dMimes = self.disabledPreviewMimeTypes, dExts = self.disabledPreviewExtensions || [],\r\n                maxSize = self.maxFilePreviewSize && parseFloat(self.maxFilePreviewSize) || 0,\r\n                expAllExt = new RegExp('\\\\.(' + exts.join('|') + ')$', 'i'),\r\n                expDisExt = new RegExp('\\\\.(' + dExts.join('|') + ')$', 'i');\r\n            allowedTypes = !types || types.indexOf(cat) !== -1;\r\n            allowedMimes = !mimes || mimes.indexOf(type) !== -1;\r\n            allowedExts = !exts.length || $h.compare(name, expAllExt);\r\n            skipPreview = (dTypes && dTypes.indexOf(cat) !== -1) || (dMimes && dMimes.indexOf(type) !== -1) ||\r\n                (dExts.length && $h.compare(name, expDisExt)) || (maxSize && !isNaN(maxSize) && size > maxSize);\r\n            return !skipPreview && (allowedTypes || allowedMimes || allowedExts);\r\n        },\r\n        addToStack: function (file, id) {\r\n            this.fileManager.add(file, id);\r\n        },\r\n        clearFileStack: function () {\r\n            var self = this;\r\n            self.fileManager.clear();\r\n            self._initResumableUpload();\r\n            if (self.enableResumableUpload) {\r\n                if (self.showPause === null) {\r\n                    self.showPause = true;\r\n                }\r\n                if (self.showCancel === null) {\r\n                    self.showCancel = false;\r\n                }\r\n            } else {\r\n                self.showPause = false;\r\n                if (self.showCancel === null) {\r\n                    self.showCancel = true;\r\n                }\r\n            }\r\n            return self.$element;\r\n        },\r\n        getFileStack: function () {\r\n            return this.fileManager.stack;\r\n        },\r\n        getFileList: function () {\r\n            return this.fileManager.list();\r\n        },\r\n        getFilesCount: function (includeInitial) {\r\n            var self = this, len = self.isAjaxUpload ? self.fileManager.count() : self._inputFileCount();\r\n            if (includeInitial) {\r\n                len += self.previewCache.count(true);\r\n            }\r\n            return self._getFileCount(len);\r\n        },\r\n        readFiles: function (files) {\r\n            this.reader = new FileReader();\r\n            var self = this, $el = self.$element, reader = self.reader, $container = self.$previewContainer,\r\n                $status = self.$previewStatus, msgLoading = self.msgLoading, msgProgress = self.msgProgress,\r\n                previewInitId = self.previewInitId, numFiles = files.length, settings = self.fileTypeSettings,\r\n                readFile, fileTypes = self.allowedFileTypes, typLen = fileTypes ? fileTypes.length : 0,\r\n                fileExt = self.allowedFileExtensions, strExt = $h.isEmpty(fileExt) ? '' : fileExt.join(', '),\r\n                throwError = function (msg, file, previewId, index, fileId, removeThumb) {\r\n                    var p1 = $.extend(true, {}, self._getOutData(null, {}, {}, files),\r\n                        {id: previewId, index: index, fileId: fileId}), $thumb,\r\n                        p2 = {id: previewId, index: index, fileId: fileId, file: file, files: files};\r\n                    removeThumb = removeThumb || self.removeFromPreviewOnError;\r\n                    if (!removeThumb) {\r\n                        self._previewDefault(file, true);\r\n                    }\r\n                    $thumb = self._getFrame(previewId, true);\r\n                    if (self.isAjaxUpload) {\r\n                        setTimeout(function () {\r\n                            readFile(index + 1);\r\n                        }, self.processDelay);\r\n                    } else {\r\n                        self.unlock();\r\n                        numFiles = 0;\r\n                    }\r\n                    if (removeThumb && $thumb.length) {\r\n                        $thumb.remove();\r\n                    } else {\r\n                        self._initFileActions();\r\n                        $thumb.find('.kv-file-upload').remove();\r\n                    }\r\n                    self.isError = self.isAjaxUpload ? self._showFileError(msg, p1) : self._showError(msg, p2);\r\n                    self._updateFileDetails(numFiles);\r\n                };\r\n            self.fileManager.clearImages();\r\n            $.each(files, function (key, file) {\r\n                var func = self.fileTypeSettings.image;\r\n                if (func && func(file.type)) {\r\n                    self.fileManager.totalImages++;\r\n                }\r\n            });\r\n            readFile = function (i) {\r\n                var $error = self.$errorContainer, errors, fm = self.fileManager;\r\n                if ($h.isEmpty($el.attr('multiple'))) {\r\n                    numFiles = 1;\r\n                }\r\n                if (i >= numFiles) {\r\n                    self.unlock();\r\n                    if (self.duplicateErrors.length) {\r\n                        errors = '<li>' + self.duplicateErrors.join('</li><li>') + '</li>';\r\n                        if ($error.find('ul').length === 0) {\r\n                            $error.html(self.errorCloseButton + '<ul>' + errors + '</ul>');\r\n                        } else {\r\n                            $error.find('ul').append(errors);\r\n                        }\r\n                        $error.fadeIn(self.fadeDelay);\r\n                        self._handler($error.find('.kv-error-close'), 'click', function () {\r\n                            $error.fadeOut(self.fadeDelay);\r\n                        });\r\n                        self.duplicateErrors = [];\r\n                    }\r\n                    if (self.isAjaxUpload) {\r\n                        self._raise('filebatchselected', [fm.stack]);\r\n                        if (fm.count() === 0 && !self.isError) {\r\n                            self.reset();\r\n                        }\r\n                    } else {\r\n                        self._raise('filebatchselected', [files]);\r\n                    }\r\n                    $container.removeClass('file-thumb-loading');\r\n                    $status.html('');\r\n                    return;\r\n                }\r\n                self.lock(true);\r\n                var file = files[i], previewId = previewInitId + '-' + self._getFileId(file), fSizeKB, j, msg,\r\n                    fnText = settings.text, fnImage = settings.image, fnHtml = settings.html, typ, chk, typ1, typ2,\r\n                    caption = self._getFileName(file, ''), fileSize = (file && file.size || 0) / 1000,\r\n                    fileExtExpr = '', previewData = $h.createObjectURL(file), fileCount = 0,\r\n                    strTypes = '', fileId, canLoad,\r\n                    func, knownTypes = 0, isText, isHtml, isImage, txtFlag, processFileLoaded = function () {\r\n                        var msg = msgProgress.setTokens({\r\n                            'index': i + 1,\r\n                            'files': numFiles,\r\n                            'percent': 50,\r\n                            'name': caption\r\n                        });\r\n                        setTimeout(function () {\r\n                            $status.html(msg);\r\n                            self._updateFileDetails(numFiles);\r\n                            readFile(i + 1);\r\n                        }, self.processDelay);\r\n                        if (self._raise('fileloaded', [file, previewId, i, reader]) && self.isAjaxUpload) {\r\n                            fm.add(file);\r\n                        }\r\n                    };\r\n                if (!file) {\r\n                    return;\r\n                }\r\n                fileId = fm.getId(file);\r\n                if (typLen > 0) {\r\n                    for (j = 0; j < typLen; j++) {\r\n                        typ1 = fileTypes[j];\r\n                        typ2 = self.msgFileTypes[typ1] || typ1;\r\n                        strTypes += j === 0 ? typ2 : ', ' + typ2;\r\n                    }\r\n                }\r\n                if (caption === false) {\r\n                    readFile(i + 1);\r\n                    return;\r\n                }\r\n                if (caption.length === 0) {\r\n                    msg = self.msgInvalidFileName.replace('{name}', $h.htmlEncode($h.getFileName(file), '[unknown]'));\r\n                    throwError(msg, file, previewId, i, fileId);\r\n                    return;\r\n                }\r\n                if (!$h.isEmpty(fileExt)) {\r\n                    fileExtExpr = new RegExp('\\\\.(' + fileExt.join('|') + ')$', 'i');\r\n                }\r\n                fSizeKB = fileSize.toFixed(2);\r\n                if (self.isAjaxUpload && fm.exists(fileId) || self._getFrame(previewId, true).length) {\r\n                    var p2 = {id: previewId, index: i, fileId: fileId, file: file, files: files};\r\n                    msg = self.msgDuplicateFile.setTokens({name: caption, size: fSizeKB});\r\n                    if (self.isAjaxUpload) {\r\n                        setTimeout(function () {\r\n                            self.duplicateErrors.push(msg);\r\n                            self._raise('fileduplicateerror', [file, fileId, caption, fSizeKB, previewId, i]);\r\n                            readFile(i + 1);\r\n                            self._updateFileDetails(numFiles);\r\n                        }, self.processDelay);\r\n                    } else {\r\n                        self._showError(msg, p2);\r\n                        self.unlock();\r\n                        numFiles = 0;\r\n                        self._clearFileInput();\r\n                        self.reset();\r\n                        self._updateFileDetails(numFiles);\r\n                    }\r\n                    return;\r\n                }\r\n                if (self.maxFileSize > 0 && fileSize > self.maxFileSize) {\r\n                    msg = self.msgSizeTooLarge.setTokens({\r\n                        'name': caption,\r\n                        'size': fSizeKB,\r\n                        'maxSize': self.maxFileSize\r\n                    });\r\n                    throwError(msg, file, previewId, i, fileId);\r\n                    return;\r\n                }\r\n                if (self.minFileSize !== null && fileSize <= $h.getNum(self.minFileSize)) {\r\n                    msg = self.msgSizeTooSmall.setTokens({\r\n                        'name': caption,\r\n                        'size': fSizeKB,\r\n                        'minSize': self.minFileSize\r\n                    });\r\n                    throwError(msg, file, previewId, i, fileId);\r\n                    return;\r\n                }\r\n                if (!$h.isEmpty(fileTypes) && $h.isArray(fileTypes)) {\r\n                    for (j = 0; j < fileTypes.length; j += 1) {\r\n                        typ = fileTypes[j];\r\n                        func = settings[typ];\r\n                        fileCount += !func || (typeof func !== 'function') ? 0 : (func(file.type,\r\n                            $h.getFileName(file)) ? 1 : 0);\r\n                    }\r\n                    if (fileCount === 0) {\r\n                        msg = self.msgInvalidFileType.setTokens({name: caption, types: strTypes});\r\n                        throwError(msg, file, previewId, i, fileId);\r\n                        return;\r\n                    }\r\n                }\r\n                if (fileCount === 0 && !$h.isEmpty(fileExt) && $h.isArray(fileExt) && !$h.isEmpty(fileExtExpr)) {\r\n                    chk = $h.compare(caption, fileExtExpr);\r\n                    fileCount += $h.isEmpty(chk) ? 0 : chk.length;\r\n                    if (fileCount === 0) {\r\n                        msg = self.msgInvalidFileExtension.setTokens({name: caption, extensions: strExt});\r\n                        throwError(msg, file, previewId, i, fileId);\r\n                        return;\r\n                    }\r\n                }\r\n                if (!self._canPreview(file)) {\r\n                    canLoad = self.isAjaxUpload && self._raise('filebeforeload', [file, i, reader]);\r\n                    if (self.isAjaxUpload && canLoad) {\r\n                        fm.add(file);\r\n                    }\r\n                    if (self.showPreview && canLoad) {\r\n                        $container.addClass('file-thumb-loading');\r\n                        self._previewDefault(file);\r\n                        self._initFileActions();\r\n                    }\r\n                    setTimeout(function () {\r\n                        if (canLoad) {\r\n                            self._updateFileDetails(numFiles);\r\n                        }\r\n                        readFile(i + 1);\r\n                        self._raise('fileloaded', [file, previewId, i]);\r\n                    }, 10);\r\n                    return;\r\n                }\r\n                isText = fnText(file.type, caption);\r\n                isHtml = fnHtml(file.type, caption);\r\n                isImage = fnImage(file.type, caption);\r\n                $status.html(msgLoading.replace('{index}', i + 1).replace('{files}', numFiles));\r\n                $container.addClass('file-thumb-loading');\r\n                reader.onerror = function (evt) {\r\n                    self._errorHandler(evt, caption);\r\n                };\r\n                reader.onload = function (theFile) {\r\n                    var hex, fileInfo, uint, byte, bytes = [], contents, mime, readTextImage = function (textFlag) {\r\n                        var newReader = new FileReader();\r\n                        newReader.onerror = function (theFileNew) {\r\n                            self._errorHandler(theFileNew, caption);\r\n                        };\r\n                        newReader.onload = function (theFileNew) {\r\n                            if (self.isAjaxUpload && !self._raise('filebeforeload', [file, i, reader])) {\r\n                                return;\r\n                            }\r\n                            self._previewFile(i, file, theFileNew, previewData, fileInfo);\r\n                            self._initFileActions();\r\n                            processFileLoaded();\r\n                        };\r\n                        if (textFlag) {\r\n                            newReader.readAsText(file, self.textEncoding);\r\n                        } else {\r\n                            newReader.readAsDataURL(file);\r\n                        }\r\n                    };\r\n                    fileInfo = {'name': caption, 'type': file.type};\r\n                    $.each(settings, function (k, f) {\r\n                        if (k !== 'object' && k !== 'other' && typeof f === 'function' && f(file.type, caption)) {\r\n                            knownTypes++;\r\n                        }\r\n                    });\r\n                    if (knownTypes === 0) { // auto detect mime types from content if no known file types detected\r\n                        uint = new Uint8Array(theFile.target.result);\r\n                        for (j = 0; j < uint.length; j++) {\r\n                            byte = uint[j].toString(16);\r\n                            bytes.push(byte);\r\n                        }\r\n                        hex = bytes.join('').toLowerCase().substring(0, 8);\r\n                        mime = $h.getMimeType(hex, '', '');\r\n                        if ($h.isEmpty(mime)) { // look for ascii text content\r\n                            contents = $h.arrayBuffer2String(reader.result);\r\n                            mime = $h.isSvg(contents) ? 'image/svg+xml' : $h.getMimeType(hex, contents, file.type);\r\n                        }\r\n                        fileInfo = {'name': caption, 'type': mime};\r\n                        isText = fnText(mime, '');\r\n                        isHtml = fnHtml(mime, '');\r\n                        isImage = fnImage(mime, '');\r\n                        txtFlag = isText || isHtml;\r\n                        if (txtFlag || isImage) {\r\n                            readTextImage(txtFlag);\r\n                            return;\r\n                        }\r\n                    }\r\n                    if (self.isAjaxUpload && !self._raise('filebeforeload', [file, i, reader])) {\r\n                        return;\r\n                    }\r\n                    self._previewFile(i, file, theFile, previewData, fileInfo);\r\n                    self._initFileActions();\r\n                    processFileLoaded();\r\n                };\r\n                reader.onprogress = function (data) {\r\n                    if (data.lengthComputable) {\r\n                        var fact = (data.loaded / data.total) * 100, progress = Math.ceil(fact);\r\n                        msg = msgProgress.setTokens({\r\n                            'index': i + 1,\r\n                            'files': numFiles,\r\n                            'percent': progress,\r\n                            'name': caption\r\n                        });\r\n                        setTimeout(function () {\r\n                            $status.html(msg);\r\n                        }, self.processDelay);\r\n                    }\r\n                };\r\n                if (isText || isHtml) {\r\n                    reader.readAsText(file, self.textEncoding);\r\n                } else {\r\n                    if (isImage) {\r\n                        reader.readAsDataURL(file);\r\n                    } else {\r\n                        reader.readAsArrayBuffer(file);\r\n                    }\r\n                }\r\n            };\r\n\r\n            readFile(0);\r\n            self._updateFileDetails(numFiles, true);\r\n        },\r\n        lock: function (selectMode) {\r\n            var self = this, $container = self.$container;\r\n            self._resetErrors();\r\n            self.disable();\r\n            if (!selectMode && self.showCancel) {\r\n                $container.find('.fileinput-cancel').show();\r\n            }\r\n            if (!selectMode && self.showPause) {\r\n                $container.find('.fileinput-pause').show();\r\n            }\r\n            self._raise('filelock', [self.fileManager.stack, self._getExtraData()]);\r\n            return self.$element;\r\n        },\r\n        unlock: function (reset) {\r\n            var self = this, $container = self.$container;\r\n            if (reset === undefined) {\r\n                reset = true;\r\n            }\r\n            self.enable();\r\n            $container.removeClass('is-locked');\r\n            if (self.showCancel) {\r\n                $container.find('.fileinput-cancel').hide();\r\n            }\r\n            if (self.showPause) {\r\n                $container.find('.fileinput-pause').hide();\r\n            }\r\n            if (reset) {\r\n                self._resetFileStack();\r\n            }\r\n            self._raise('fileunlock', [self.fileManager.stack, self._getExtraData()]);\r\n            return self.$element;\r\n        },\r\n        resume: function () {\r\n            var self = this, flag = false, rm = self.resumableManager;\r\n            if (!self.enableResumableUpload) {\r\n                return self.$element;\r\n            }\r\n            if (self.paused) {\r\n                self._toggleResumableProgress(self.progressPauseTemplate, self.msgUploadResume);\r\n            } else {\r\n                flag = true;\r\n            }\r\n            self.paused = false;\r\n            if (flag) {\r\n                self._toggleResumableProgress(self.progressInfoTemplate, self.msgUploadBegin);\r\n            }\r\n            setTimeout(function () {\r\n                rm.upload();\r\n            }, self.processDelay);\r\n            return self.$element;\r\n        },\r\n        pause: function () {\r\n            var self = this, rm = self.resumableManager, xhr = self.ajaxRequests, len = xhr.length, i,\r\n                pct = rm.getProgress(), actions = self.fileActionSettings;\r\n            if (!self.enableResumableUpload) {\r\n                return self.$element;\r\n            }\r\n            if (rm.chunkIntervalId) {\r\n                clearInterval(rm.chunkIntervalId);\r\n            }\r\n            if (self.ajaxQueueIntervalId) {\r\n                clearInterval(self.ajaxQueueIntervalId);\r\n            }\r\n            self._raise('fileuploadpaused', [self.fileManager, rm]);\r\n            if (len > 0) {\r\n                for (i = 0; i < len; i += 1) {\r\n                    self.paused = true;\r\n                    xhr[i].abort();\r\n                }\r\n            }\r\n            if (self.showPreview) {\r\n                self._getThumbs().each(function () {\r\n                    var $thumb = $(this), fileId = $thumb.attr('data-fileid'), t = self._getLayoutTemplate('stats'),\r\n                        stats, $indicator = $thumb.find('.file-upload-indicator');\r\n                    $thumb.removeClass('file-uploading');\r\n                    if ($indicator.attr('title') === actions.indicatorLoadingTitle) {\r\n                        self._setThumbStatus($thumb, 'Paused');\r\n                        stats = t.setTokens({pendingTime: self.msgPaused, uploadSpeed: ''});\r\n                        self.paused = true;\r\n                        self._setProgress(pct, $thumb.find('.file-thumb-progress'), pct + '%', stats);\r\n                    }\r\n                    if (!self.fileManager.getFile(fileId)) {\r\n                        $thumb.find('.kv-file-remove').removeClass('disabled').removeAttr('disabled');\r\n                    }\r\n                });\r\n            }\r\n            self._setProgress(101, self.$progress, self.msgPaused);\r\n            return self.$element;\r\n        },\r\n        cancel: function () {\r\n            var self = this, xhr = self.ajaxRequests, rm = self.resumableManager, len = xhr.length, i;\r\n            if (self.enableResumableUpload && rm.chunkIntervalId) {\r\n                clearInterval(rm.chunkIntervalId);\r\n                rm.reset();\r\n                self._raise('fileuploadcancelled', [self.fileManager, rm]);\r\n            } else {\r\n                self._raise('fileuploadcancelled', [self.fileManager]);\r\n            }\r\n            if (self.ajaxQueueIntervalId) {\r\n                clearInterval(self.ajaxQueueIntervalId);\r\n            }\r\n            self._initAjax();\r\n            if (len > 0) {\r\n                for (i = 0; i < len; i += 1) {\r\n                    self.cancelling = true;\r\n                    xhr[i].abort();\r\n                }\r\n            }\r\n            self._getThumbs().each(function () {\r\n                var $thumb = $(this), fileId = $thumb.attr('data-fileid'), $prog = $thumb.find('.file-thumb-progress');\r\n                $thumb.removeClass('file-uploading');\r\n                self._setProgress(0, $prog);\r\n                $prog.hide();\r\n                if (!self.fileManager.getFile(fileId)) {\r\n                    $thumb.find('.kv-file-upload').removeClass('disabled').removeAttr('disabled');\r\n                    $thumb.find('.kv-file-remove').removeClass('disabled').removeAttr('disabled');\r\n                }\r\n                self.unlock();\r\n            });\r\n            setTimeout(function () {\r\n                self._setProgressCancelled();\r\n            }, self.processDelay);\r\n            return self.$element;\r\n        },\r\n        clear: function () {\r\n            var self = this, cap;\r\n            if (!self._raise('fileclear')) {\r\n                return;\r\n            }\r\n            self.$btnUpload.removeAttr('disabled');\r\n            self._getThumbs().find('video,audio,img').each(function () {\r\n                $h.cleanMemory($(this));\r\n            });\r\n            self._clearFileInput();\r\n            self._resetUpload();\r\n            self.clearFileStack();\r\n            self._resetErrors(true);\r\n            if (self._hasInitialPreview()) {\r\n                self._showFileIcon();\r\n                self._resetPreview();\r\n                self._initPreviewActions();\r\n                self.$container.removeClass('file-input-new');\r\n            } else {\r\n                self._getThumbs().each(function () {\r\n                    self._clearObjects($(this));\r\n                });\r\n                if (self.isAjaxUpload) {\r\n                    self.previewCache.data = {};\r\n                }\r\n                self.$preview.html('');\r\n                cap = (!self.overwriteInitial && self.initialCaption.length > 0) ? self.initialCaption : '';\r\n                self.$caption.attr('title', '').val(cap);\r\n                $h.addCss(self.$container, 'file-input-new');\r\n                self._validateDefaultPreview();\r\n            }\r\n            if (self.$container.find($h.FRAMES).length === 0) {\r\n                if (!self._initCaption()) {\r\n                    self.$captionContainer.removeClass('icon-visible');\r\n                }\r\n            }\r\n            self._hideFileIcon();\r\n            if (self.focusCaptionOnClear) {\r\n                self.$captionContainer.focus();\r\n            }\r\n            self._setFileDropZoneTitle();\r\n            self._raise('filecleared');\r\n            return self.$element;\r\n        },\r\n        reset: function () {\r\n            var self = this;\r\n            if (!self._raise('filereset')) {\r\n                return;\r\n            }\r\n            self.lastProgress = 0;\r\n            self._resetPreview();\r\n            self.$container.find('.fileinput-filename').text('');\r\n            $h.addCss(self.$container, 'file-input-new');\r\n            if (self.getFrames().length) {\r\n                self.$container.removeClass('file-input-new');\r\n            }\r\n            self.clearFileStack();\r\n            self._setFileDropZoneTitle();\r\n            return self.$element;\r\n        },\r\n        disable: function () {\r\n            var self = this, $container = self.$container;\r\n            self.isDisabled = true;\r\n            self._raise('filedisabled');\r\n            self.$element.attr('disabled', 'disabled');\r\n            $container.addClass('is-locked');\r\n            $h.addCss($container.find('.btn-file'), 'disabled');\r\n            $container.find('.kv-fileinput-caption').addClass('file-caption-disabled');\r\n            $container.find('.fileinput-remove, .fileinput-upload, .file-preview-frame button')\r\n                .attr('disabled', true);\r\n            self._initDragDrop();\r\n            return self.$element;\r\n        },\r\n        enable: function () {\r\n            var self = this, $container = self.$container;\r\n            self.isDisabled = false;\r\n            self._raise('fileenabled');\r\n            self.$element.removeAttr('disabled');\r\n            $container.removeClass('is-locked');\r\n            $container.find('.kv-fileinput-caption').removeClass('file-caption-disabled');\r\n            $container.find('.fileinput-remove, .fileinput-upload, .file-preview-frame button')\r\n                .removeAttr('disabled');\r\n            $container.find('.btn-file').removeClass('disabled');\r\n            self._initDragDrop();\r\n            return self.$element;\r\n        },\r\n        upload: function () {\r\n            var self = this, fm = self.fileManager, totLen = fm.count(), i, outData,\r\n                hasExtraData = !$.isEmptyObject(self._getExtraData());\r\n            if (!self.isAjaxUpload || self.isDisabled || !self._isFileSelectionValid(totLen)) {\r\n                return;\r\n            }\r\n            self.lastProgress = 0;\r\n            self._resetUpload();\r\n            if (totLen === 0 && !hasExtraData) {\r\n                self._showFileError(self.msgUploadEmpty);\r\n                return;\r\n            }\r\n            self.cancelling = false;\r\n            self._showProgress();\r\n            self.lock();\r\n            if (totLen === 0 && hasExtraData) {\r\n                self._setProgress(2);\r\n                self._uploadExtraOnly();\r\n                return;\r\n            }\r\n            if (self.enableResumableUpload) {\r\n                return self.resume();\r\n            }\r\n            if (self.uploadAsync || self.enableResumableUpload) {\r\n                outData = self._getOutData(null);\r\n                self._raise('filebatchpreupload', [outData]);\r\n                self.fileBatchCompleted = false;\r\n                self.uploadCache = [];\r\n                $.each(self.getFileStack(), function (id) {\r\n                    var previewId = self._getThumbId(id);\r\n                    self.uploadCache.push({id: previewId, content: null, config: null, tags: null, append: true});\r\n                });\r\n                self.$preview.find('.file-preview-initial').removeClass($h.SORT_CSS);\r\n                self._initSortable();\r\n            }\r\n            self._setProgress(2);\r\n            self.hasInitData = false;\r\n            if (self.uploadAsync) {\r\n                i = 0;\r\n                $.each(fm.stack, function (id) {\r\n                    self._uploadSingle(i, id, true);\r\n                    i++;\r\n                });\r\n                return;\r\n            }\r\n            self._uploadBatch();\r\n            return self.$element;\r\n        },\r\n        destroy: function () {\r\n            var self = this, $form = self.$form, $cont = self.$container, $el = self.$element, ns = self.namespace;\r\n            $(document).off(ns);\r\n            $(window).off(ns);\r\n            if ($form && $form.length) {\r\n                $form.off(ns);\r\n            }\r\n            if (self.isAjaxUpload) {\r\n                self._clearFileInput();\r\n            }\r\n            self._cleanup();\r\n            self._initPreviewCache();\r\n            $el.insertBefore($cont).off(ns).removeData();\r\n            $cont.off().remove();\r\n            return $el;\r\n        },\r\n        refresh: function (options) {\r\n            var self = this, $el = self.$element;\r\n            if (typeof options !== 'object' || $h.isEmpty(options)) {\r\n                options = self.options;\r\n            } else {\r\n                options = $.extend(true, {}, self.options, options);\r\n            }\r\n            self._init(options, true);\r\n            self._listen();\r\n            return $el;\r\n        },\r\n        zoom: function (frameId) {\r\n            var self = this, $frame = self._getFrame(frameId), $modal = self.$modal;\r\n            if (!$frame) {\r\n                return;\r\n            }\r\n            $h.initModal($modal);\r\n            $modal.html(self._getModalContent());\r\n            self._setZoomContent($frame);\r\n            $modal.modal('show');\r\n            self._initZoomButtons();\r\n        },\r\n        getExif: function (frameId) {\r\n            var self = this, $frame = self._getFrame(frameId);\r\n            return $frame && $frame.data('exif') || null;\r\n        },\r\n        getFrames: function (cssFilter) {\r\n            var self = this, $frames;\r\n            cssFilter = cssFilter || '';\r\n            $frames = self.$preview.find($h.FRAMES + cssFilter);\r\n            if (self.reversePreviewOrder) {\r\n                $frames = $($frames.get().reverse());\r\n            }\r\n            return $frames;\r\n        },\r\n        getPreview: function () {\r\n            var self = this;\r\n            return {\r\n                content: self.initialPreview,\r\n                config: self.initialPreviewConfig,\r\n                tags: self.initialPreviewThumbTags\r\n            };\r\n        }\r\n    };\r\n\r\n    $.fn.fileinput = function (option) {\r\n        if (!$h.hasFileAPISupport() && !$h.isIE(9)) {\r\n            return;\r\n        }\r\n        var args = Array.apply(null, arguments), retvals = [];\r\n        args.shift();\r\n        this.each(function () {\r\n            var self = $(this), data = self.data('fileinput'), options = typeof option === 'object' && option,\r\n                theme = options.theme || self.data('theme'), l = {}, t = {},\r\n                lang = options.language || self.data('language') || $.fn.fileinput.defaults.language || 'en', opt;\r\n            if (!data) {\r\n                if (theme) {\r\n                    t = $.fn.fileinputThemes[theme] || {};\r\n                }\r\n                if (lang !== 'en' && !$h.isEmpty($.fn.fileinputLocales[lang])) {\r\n                    l = $.fn.fileinputLocales[lang] || {};\r\n                }\r\n                opt = $.extend(true, {}, $.fn.fileinput.defaults, t, $.fn.fileinputLocales.en, l, options, self.data());\r\n                data = new FileInput(this, opt);\r\n                self.data('fileinput', data);\r\n            }\r\n\r\n            if (typeof option === 'string') {\r\n                retvals.push(data[option].apply(data, args));\r\n            }\r\n        });\r\n        switch (retvals.length) {\r\n            case 0:\r\n                return this;\r\n            case 1:\r\n                return retvals[0];\r\n            default:\r\n                return retvals;\r\n        }\r\n    };\r\n\r\n    //noinspection HtmlUnknownAttribute\r\n    $.fn.fileinput.defaults = {\r\n        language: 'en',\r\n        showCaption: true,\r\n        showBrowse: true,\r\n        showPreview: true,\r\n        showRemove: true,\r\n        showUpload: true,\r\n        showUploadStats: true,\r\n        showCancel: null,\r\n        showPause: null,\r\n        showClose: true,\r\n        showUploadedThumbs: true,\r\n        showConsoleLogs: true,\r\n        browseOnZoneClick: false,\r\n        autoReplace: false,\r\n        autoOrientImage: function () { // applicable for JPEG images only and non ios safari\r\n            var ua = window.navigator.userAgent, webkit = !!ua.match(/WebKit/i),\r\n                iOS = !!ua.match(/iP(od|ad|hone)/i), iOSSafari = iOS && webkit && !ua.match(/CriOS/i);\r\n            return !iOSSafari;\r\n        },\r\n        autoOrientImageInitial: true,\r\n        required: false,\r\n        rtl: false,\r\n        hideThumbnailContent: false,\r\n        encodeUrl: true,\r\n        focusCaptionOnBrowse: true,\r\n        focusCaptionOnClear: true,\r\n        generateFileId: null,\r\n        previewClass: '',\r\n        captionClass: '',\r\n        frameClass: 'krajee-default',\r\n        mainClass: 'file-caption-main',\r\n        mainTemplate: null,\r\n        purifyHtml: true,\r\n        fileSizeGetter: null,\r\n        initialCaption: '',\r\n        initialPreview: [],\r\n        initialPreviewDelimiter: '*$$*',\r\n        initialPreviewAsData: false,\r\n        initialPreviewFileType: 'image',\r\n        initialPreviewConfig: [],\r\n        initialPreviewThumbTags: [],\r\n        previewThumbTags: {},\r\n        initialPreviewShowDelete: true,\r\n        initialPreviewDownloadUrl: '',\r\n        removeFromPreviewOnError: false,\r\n        deleteUrl: '',\r\n        deleteExtraData: {},\r\n        overwriteInitial: true,\r\n        sanitizeZoomCache: function (content) {\r\n            var $container = $(document.createElement('div')).append(content);\r\n            $container.find('input,select,.file-thumbnail-footer').remove();\r\n            return $container.html();\r\n        },\r\n        previewZoomButtonIcons: {\r\n            prev: '<i class=\"glyphicon glyphicon-triangle-left\"></i>',\r\n            next: '<i class=\"glyphicon glyphicon-triangle-right\"></i>',\r\n            toggleheader: '<i class=\"glyphicon glyphicon-resize-vertical\"></i>',\r\n            fullscreen: '<i class=\"glyphicon glyphicon-fullscreen\"></i>',\r\n            borderless: '<i class=\"glyphicon glyphicon-resize-full\"></i>',\r\n            close: '<i class=\"glyphicon glyphicon-remove\"></i>'\r\n        },\r\n        previewZoomButtonClasses: {\r\n            prev: 'btn btn-navigate',\r\n            next: 'btn btn-navigate',\r\n            toggleheader: 'btn btn-sm btn-kv btn-default btn-outline-secondary',\r\n            fullscreen: 'btn btn-sm btn-kv btn-default btn-outline-secondary',\r\n            borderless: 'btn btn-sm btn-kv btn-default btn-outline-secondary',\r\n            close: 'btn btn-sm btn-kv btn-default btn-outline-secondary'\r\n        },\r\n        previewTemplates: {},\r\n        previewContentTemplates: {},\r\n        preferIconicPreview: false,\r\n        preferIconicZoomPreview: false,\r\n        allowedFileTypes: null,\r\n        allowedFileExtensions: null,\r\n        allowedPreviewTypes: undefined,\r\n        allowedPreviewMimeTypes: null,\r\n        allowedPreviewExtensions: null,\r\n        disabledPreviewTypes: undefined,\r\n        disabledPreviewExtensions: ['msi', 'exe', 'com', 'zip', 'rar', 'app', 'vb', 'scr'],\r\n        disabledPreviewMimeTypes: null,\r\n        defaultPreviewContent: null,\r\n        customLayoutTags: {},\r\n        customPreviewTags: {},\r\n        previewFileIcon: '<i class=\"glyphicon glyphicon-file\"></i>',\r\n        previewFileIconClass: 'file-other-icon',\r\n        previewFileIconSettings: {},\r\n        previewFileExtSettings: {},\r\n        buttonLabelClass: 'hidden-xs',\r\n        browseIcon: '<i class=\"glyphicon glyphicon-folder-open\"></i>&nbsp;',\r\n        browseClass: 'btn btn-primary',\r\n        removeIcon: '<i class=\"glyphicon glyphicon-trash\"></i>',\r\n        removeClass: 'btn btn-default btn-secondary',\r\n        cancelIcon: '<i class=\"glyphicon glyphicon-ban-circle\"></i>',\r\n        cancelClass: 'btn btn-default btn-secondary',\r\n        pauseIcon: '<i class=\"glyphicon glyphicon-pause\"></i>',\r\n        pauseClass: 'btn btn-default btn-secondary',\r\n        uploadIcon: '<i class=\"glyphicon glyphicon-upload\"></i>',\r\n        uploadClass: 'btn btn-default btn-secondary',\r\n        uploadUrl: null,\r\n        uploadUrlThumb: null,\r\n        uploadAsync: true,\r\n        uploadParamNames: {\r\n            chunkCount: 'chunkCount',\r\n            chunkIndex: 'chunkIndex',\r\n            chunkSize: 'chunkSize',\r\n            chunkSizeStart: 'chunkSizeStart',\r\n            chunksUploaded: 'chunksUploaded',\r\n            fileBlob: 'fileBlob',\r\n            fileId: 'fileId',\r\n            fileName: 'fileName',\r\n            fileRelativePath: 'fileRelativePath',\r\n            fileSize: 'fileSize',\r\n            retryCount: 'retryCount'\r\n        },\r\n        maxAjaxThreads: 5,\r\n        fadeDelay: 800,\r\n        processDelay: 100,\r\n        queueDelay: 10, // must be lesser than process delay\r\n        progressDelay: 0, // must be lesser than process delay\r\n        enableResumableUpload: false,\r\n        resumableUploadOptions: {\r\n            fallback: null,\r\n            testUrl: null, // used for checking status of chunks/ files previously / partially uploaded\r\n            chunkSize: 2 * 1024, // in KB\r\n            maxThreads: 4,\r\n            maxRetries: 3,\r\n            showErrorLog: true\r\n        },\r\n        uploadExtraData: {},\r\n        zoomModalHeight: 480,\r\n        minImageWidth: null,\r\n        minImageHeight: null,\r\n        maxImageWidth: null,\r\n        maxImageHeight: null,\r\n        resizeImage: false,\r\n        resizePreference: 'width',\r\n        resizeQuality: 0.92,\r\n        resizeDefaultImageType: 'image/jpeg',\r\n        resizeIfSizeMoreThan: 0, // in KB\r\n        minFileSize: 0,\r\n        maxFileSize: 0,\r\n        maxFilePreviewSize: 25600, // 25 MB\r\n        minFileCount: 0,\r\n        maxFileCount: 0,\r\n        maxTotalFileCount: 0,\r\n        validateInitialCount: false,\r\n        msgValidationErrorClass: 'text-danger',\r\n        msgValidationErrorIcon: '<i class=\"glyphicon glyphicon-exclamation-sign\"></i> ',\r\n        msgErrorClass: 'file-error-message',\r\n        progressThumbClass: 'progress-bar progress-bar-striped active',\r\n        progressClass: 'progress-bar bg-success progress-bar-success progress-bar-striped active',\r\n        progressInfoClass: 'progress-bar bg-info progress-bar-info progress-bar-striped active',\r\n        progressCompleteClass: 'progress-bar bg-success progress-bar-success',\r\n        progressPauseClass: 'progress-bar bg-primary progress-bar-primary progress-bar-striped active',\r\n        progressErrorClass: 'progress-bar bg-danger progress-bar-danger',\r\n        progressUploadThreshold: 99,\r\n        previewFileType: 'image',\r\n        elCaptionContainer: null,\r\n        elCaptionText: null,\r\n        elPreviewContainer: null,\r\n        elPreviewImage: null,\r\n        elPreviewStatus: null,\r\n        elErrorContainer: null,\r\n        errorCloseButton: $h.closeButton('kv-error-close'),\r\n        slugCallback: null,\r\n        dropZoneEnabled: true,\r\n        dropZoneTitleClass: 'file-drop-zone-title',\r\n        fileActionSettings: {},\r\n        otherActionButtons: '',\r\n        textEncoding: 'UTF-8',\r\n        ajaxSettings: {},\r\n        ajaxDeleteSettings: {},\r\n        showAjaxErrorDetails: true,\r\n        mergeAjaxCallbacks: false,\r\n        mergeAjaxDeleteCallbacks: false,\r\n        retryErrorUploads: true,\r\n        reversePreviewOrder: false,\r\n        usePdfRenderer: function () {\r\n            //noinspection JSUnresolvedVariable\r\n            var isIE11 = !!window.MSInputMethodContext && !!document.documentMode;\r\n            return !!navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/i) || isIE11;\r\n        },\r\n        pdfRendererUrl: '',\r\n        pdfRendererTemplate: '<iframe class=\"kv-preview-data file-preview-pdf\" src=\"{renderer}?file={data}\" {style}></iframe>'\r\n    };\r\n\r\n    // noinspection HtmlUnknownAttribute\r\n    $.fn.fileinputLocales.en = {\r\n        fileSingle: 'file',\r\n        filePlural: 'files',\r\n        browseLabel: 'Browse &hellip;',\r\n        removeLabel: 'Remove',\r\n        removeTitle: 'Clear all unprocessed files',\r\n        cancelLabel: 'Cancel',\r\n        cancelTitle: 'Abort ongoing upload',\r\n        pauseLabel: 'Pause',\r\n        pauseTitle: 'Pause ongoing upload',\r\n        uploadLabel: 'Upload',\r\n        uploadTitle: 'Upload selected files',\r\n        msgNo: 'No',\r\n        msgNoFilesSelected: 'No files selected',\r\n        msgCancelled: 'Cancelled',\r\n        msgPaused: 'Paused',\r\n        msgPlaceholder: 'Select {files}...',\r\n        msgZoomModalHeading: 'Detailed Preview',\r\n        msgFileRequired: 'You must select a file to upload.',\r\n        msgSizeTooSmall: 'File \"{name}\" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',\r\n        msgSizeTooLarge: 'File \"{name}\" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',\r\n        msgFilesTooLess: 'You must select at least <b>{n}</b> {files} to upload.',\r\n        msgFilesTooMany: 'Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.',\r\n        msgTotalFilesTooMany: 'You can upload a maximum of <b>{m}</b> files (<b>{n}</b> files detected).',\r\n        msgFileNotFound: 'File \"{name}\" not found!',\r\n        msgFileSecured: 'Security restrictions prevent reading the file \"{name}\".',\r\n        msgFileNotReadable: 'File \"{name}\" is not readable.',\r\n        msgFilePreviewAborted: 'File preview aborted for \"{name}\".',\r\n        msgFilePreviewError: 'An error occurred while reading the file \"{name}\".',\r\n        msgInvalidFileName: 'Invalid or unsupported characters in file name \"{name}\".',\r\n        msgInvalidFileType: 'Invalid type for file \"{name}\". Only \"{types}\" files are supported.',\r\n        msgInvalidFileExtension: 'Invalid extension for file \"{name}\". Only \"{extensions}\" files are supported.',\r\n        msgFileTypes: {\r\n            'image': 'image',\r\n            'html': 'HTML',\r\n            'text': 'text',\r\n            'video': 'video',\r\n            'audio': 'audio',\r\n            'flash': 'flash',\r\n            'pdf': 'PDF',\r\n            'object': 'object'\r\n        },\r\n        msgUploadAborted: 'The file upload was aborted',\r\n        msgUploadThreshold: 'Processing...',\r\n        msgUploadBegin: 'Initializing...',\r\n        msgUploadEnd: 'Done',\r\n        msgUploadResume: 'Resuming upload...',\r\n        msgUploadEmpty: 'No valid data available for upload.',\r\n        msgUploadError: 'Upload Error',\r\n        msgDeleteError: 'Delete Error',\r\n        msgProgressError: 'Error',\r\n        msgValidationError: 'Validation Error',\r\n        msgLoading: 'Loading file {index} of {files} &hellip;',\r\n        msgProgress: 'Loading file {index} of {files} - {name} - {percent}% completed.',\r\n        msgSelected: '{n} {files} selected',\r\n        msgFoldersNotAllowed: 'Drag & drop files only! {n} folder(s) dropped were skipped.',\r\n        msgImageWidthSmall: 'Width of image file \"{name}\" must be at least {size} px.',\r\n        msgImageHeightSmall: 'Height of image file \"{name}\" must be at least {size} px.',\r\n        msgImageWidthLarge: 'Width of image file \"{name}\" cannot exceed {size} px.',\r\n        msgImageHeightLarge: 'Height of image file \"{name}\" cannot exceed {size} px.',\r\n        msgImageResizeError: 'Could not get the image dimensions to resize.',\r\n        msgImageResizeException: 'Error while resizing the image.<pre>{errors}</pre>',\r\n        msgAjaxError: 'Something went wrong with the {operation} operation. Please try again later!',\r\n        msgAjaxProgressError: '{operation} failed',\r\n        msgDuplicateFile: 'File \"{name}\" of same size \"{size} KB\" has already been selected earlier. Skipping duplicate selection.',\r\n        msgResumableUploadRetriesExceeded: 'Upload aborted beyond <b>{max}</b> retries for file <b>{file}</b>! Error Details: <pre>{error}</pre>',\r\n        msgPendingTime: '{time} remaining',\r\n        msgCalculatingTime: 'calculating time remaining',\r\n        ajaxOperations: {\r\n            deleteThumb: 'file delete',\r\n            uploadThumb: 'file upload',\r\n            uploadBatch: 'batch file upload',\r\n            uploadExtra: 'form data upload'\r\n        },\r\n        dropZoneTitle: 'Drag & drop files here &hellip;',\r\n        dropZoneClickTitle: '<br>(or click to select {files})',\r\n        previewZoomButtonTitles: {\r\n            prev: 'View previous file',\r\n            next: 'View next file',\r\n            toggleheader: 'Toggle header',\r\n            fullscreen: 'Toggle full screen',\r\n            borderless: 'Toggle borderless mode',\r\n            close: 'Close detailed preview'\r\n        }\r\n    };\r\n\r\n    $.fn.fileinput.Constructor = FileInput;\r\n\r\n    /**\r\n     * Convert automatically file inputs with class 'file' into a bootstrap fileinput control.\r\n     */\r\n    $(document).ready(function () {\r\n        var $input = $('input.file[type=file]');\r\n        if ($input.length) {\r\n            $input.fileinput();\r\n        }\r\n    });\r\n}));\r\n"],"sourceRoot":""}